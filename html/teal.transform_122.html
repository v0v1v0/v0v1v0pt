<div class="container">

<table style="width: 100%;"><tr>
<td>variable_choices</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Variable label extraction and custom selection from data</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>
<p>Wrapper on choices_labeled to label variables basing on existing labels in data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">variable_choices(data, subset = NULL, fill = FALSE, key = NULL)

## S3 method for class 'character'
variable_choices(data, subset = NULL, fill = FALSE, key = NULL)

## S3 method for class 'data.frame'
variable_choices(data, subset = NULL, fill = TRUE, key = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>(<code>data.frame</code> or <code>character</code>)
If <code>data.frame</code>, then data to extract labels from.
If <code>character</code>, then name of the dataset to extract data from once available.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>(<code>character</code> or <code>function</code>)
If <code>character</code>, then a vector of column names.
If <code>function</code>, then this function is used to determine the possible columns (e.g. all factor columns).
In this case, the function must take only single argument "data" and return a character vector.
</p>
<p>See examples for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>(<code>logical(1)</code>) if <code>TRUE</code>, the function will return variable names
for columns with non-existent labels; otherwise will return <code>NA</code> for them.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>(<code>character</code>) vector with names of the variables, which are part of the primary key
of the <code>data</code> argument.
</p>
<p>This is an optional argument, which allows to identify variables associated
with the primary key and display the appropriate icon for them in the
<code>teal.widgets::optionalSelectInput()</code> widget.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Named <code>character</code> vector with additional attributes or <code>delayed_data</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(teal.data)

ADRS &lt;- teal.transform::rADRS
variable_choices(ADRS)
variable_choices(ADRS, subset = c("PARAM", "PARAMCD"))
variable_choices(ADRS, subset = c("", "PARAM", "PARAMCD"))
variable_choices(
  ADRS,
  subset = c("", "PARAM", "PARAMCD"),
  key = default_cdisc_join_keys["ADRS", "ADRS"]
)

# delayed version
variable_choices("ADRS", subset = c("USUBJID", "STUDYID"))

# functional subset (with delayed data) - return only factor variables
variable_choices("ADRS", subset = function(data) {
  idx &lt;- vapply(data, is.factor, logical(1))
  names(data)[idx]
})
</code></pre>


</div>
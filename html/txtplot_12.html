<div class="container">

<table style="width: 100%;"><tr>
<td>txtimage</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Display a Text Image of a Matrix</h2>

<h3>Description</h3>

<p>Print a rudimentary image of a matrix on the R console using a
user-supplied alphabet as a palette of sorts.
</p>


<h3>Usage</h3>

<pre><code class="language-R">txtimage(z, width, height, yaxis = c('up', 'down'), transpose = TRUE,
         legend = TRUE, na.char = ' ', alphabet = 0:9, Lanczos = 3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>

<p>Numeric matrix containing values to be plotted.  <code>NA</code> and
<code>NaN</code> are allowed, but infinities, being impossible to scale,
cause an error.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>

<p>Desired width in characters.  Defaults to full screen (by means of
<code>getOption('width')</code>) or number of columns (rows if transposed)
in <code>z</code>, whichever is less.   Asking for more characters than
there is in the supplied matrix results in an error.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>

<p>Desired height in characters.  Defaults to <code class="reqn">25/80</code> of <code>width</code>
or number of rows (columns if transposed) in <code>z</code>, whichever
is less.  Asking for more characters than there is in the supplied
matrix results in an error.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yaxis</code></td>
<td>

<p>Direction of the Y axis, <code>"up"</code> or <code>"down"</code>.  Defaults to
'up' like in <code>image</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transpose</code></td>
<td>

<p>Whether to arrange rows by the X axis, like <code>image</code>
does.  Defaults to <code>TRUE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>

<p>Whether to print the legend under the plot.  If set, the returned
object will have the <code>'cuts'</code> and <code>'alphabet'</code> attributes
set containing the values separating the intervals and characters
used for the intervals, respectively.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.char</code></td>
<td>

<p>Character to substitute for values satisfying <code>is.na</code>.  A warning
is produced if <code>na.char</code> is found in the <code>alphabet</code> in
presence of <code>NA</code> in <code>z</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alphabet</code></td>
<td>

<p>Symbols to compose the plot of, linear scale.  Either a single
multi-character string or a vector of single-character strings.
Defaults to <code>0:9</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Lanczos</code></td>
<td>

<p>Positive integer defining the size of the Lanczos filter kernel.
Given a value of <code class="reqn">a</code>, the windowed sinc kernel will have
<code class="reqn">2a-1</code> lobes.  Increasing the value may lead to better frequency
response, but cause worse performance and wider undefined zones when
the input contains <code>NA</code>s.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>By default, <code>txtimage</code> mimics the behaviour of <code>image</code>,
drawing the rows of the matrix along the X axis and making the Y axis
grow from bottom to the top of the plot.  The function can be made to
mimic matrix <code>print</code> instead (rows arranged vertically from top to
bottom) by specifying <code>yaxis</code> and <code>image.transpose</code> arguments.
</p>
<p>If requested <code>width</code> or <code>height</code> is different from dimensions
of the matrix, it is resampled using the Lanczos filter for a given
downsampling ratio <code class="reqn">r</code> and window parameter <code class="reqn">a</code>:
</p>
<p style="text-align: center;"><code class="reqn">%
    L(x) = \mathrm{sinc}(x) \, \mathrm{sinc}(x/a) \, | x | &lt; a
  </code>
</p>

<p style="text-align: center;"><code class="reqn">%
    S_{ij} = \sum_{k, l} s_{kl} %
      L \left( i - \frac{k}{r} \right) %
      L \left( j - \frac{l}{r} \right)
  </code>
</p>

<p>When resampling, the rows and columns are assumed to correspond to a
uniform linear grid.
</p>


<h3>Value</h3>

<p>The function is called for its side effect of printing the textual
plot on the R console using <code>cat</code>, but it also invisibly returns
the resulting character matrix.  If <code>legend</code> is <code>TRUE</code>, the
<code>'cuts'</code> attribute contains the values separating the intervals
used for characters in the <code>alphabet</code> (the copy of which is stored
in the <code>'alphabet'</code> attribute).
</p>


<h3>Note</h3>

<p>Resampling constant signals may produce rounding errors that get greatly
amplified after scaling them to <code>diff(range(z))</code>.  For constant
signals this is compensated by not allowing the resampling process to
increase the range of the signal, but if the range of the matrix values
is already really small (comparable to <code>.Machine$double.eps</code>,
but not zero), the result of resampling process may not make sense.
</p>
<p>Resampling high frequency signals (e.g.
<code>outer(1:200, 1:200, function(x,y) cos(x*y))</code>) might give
hard-to-interpret results.
</p>


<h3>Author(s)</h3>

<p>Ivan Krylov
</p>


<h3>References</h3>

<p>Szeliski, R. (2010) <em>Computer Vision: Algorithms and Applications.</em>
Section 3.5.2: Decimation.
</p>


<h3>See Also</h3>

<p><code>symnum</code>, <code>image</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">  txtimage(datasets::volcano)
  ## Not run: 
  ## try this if your terminal supports shade/block characters
  txtimage(datasets::volcano, alphabet = " \u2591\u2592\u2593\u2588")
  
## End(Not run)
</code></pre>


</div>
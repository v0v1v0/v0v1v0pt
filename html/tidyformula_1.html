<div class="container">

<table style="width: 100%;"><tr>
<td>tidyformula</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build a formula using <code>tidyselect</code>-style selection helpers</h2>

<h3>Description</h3>

<p><code>tidyformula()</code> translates formulas containing <code>tidyselect</code>-style
selection helpers, expanding these helpers by evaluating
<code>dplyr::select()</code> with the relevant selection helper and a supplied data frame.
</p>
<p>When the selection helper appears as the first argument of a function, that
function is distributed across the sum of the selected variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tidyformula(
  formula,
  data,
  select_helpers = .select_helpers,
  nodistribute = c("+", "-", "*", "^"),
  env = rlang::caller_env()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>An object of class <code>formula</code>. Can contain selection helpers
to be expanded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame whose column names should be used for selection</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select_helpers</code></td>
<td>
<p>A character vector. The names of selection helpers to
be matched and substituted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodistribute</code></td>
<td>
<p>A character vector. Functions with these names are not
distributed over selection helpers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>The environment to associate with the result.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>formula</code>, which is a translation of the argument
<code>formula</code> in which the selection helpers are replaced with the corresponding
variables of <code>data</code>.
</p>


<h3>Examples</h3>

<div class="sourceCode r"><pre>df &lt;- data.frame(
  x1 = rnorm(5),
  x2 = rnorm(5),
  x3 = rnorm(5),
  y  = rnorm(5)
)

tidyformula(y ~ num_range("x", 1:2) + z, data = df)
#&gt; y ~ x1 + x2 + z
#&gt; &lt;environment: 0x000001e0d7d53910&gt;

tidyformula(y ~ poly(starts_with("x"), 3), data = df)
#&gt; y ~ poly(x1, 3) + poly(x2, 3) + poly(x3, 3)
#&gt; &lt;environment: 0x000001e0d7d53910&gt;

tidyformula( ~ everything() * contains("x"), data = df)
#&gt; ~(x1 + x2 + x3 + y) * (x1 + x2 + x3)
#&gt; &lt;environment: 0x000001e0d7d53910&gt;
</pre></div>
<p>Interaction operators are typically not distributed, but this behaviour can be changed.
</p>
<div class="sourceCode r"><pre>tidyformula(y ~ starts_with("x")^2, data = df)
#&gt; y ~ (x1 + x2 + x3)^2
#&gt; &lt;environment: 0x000001e0d7d53910&gt;

tidyformula(y ~ starts_with("x")^2, data = df, nodistribute = c("+", "-"))
#&gt; y ~ x1^2 + x2^2 + x3^2
#&gt; &lt;environment: 0x000001e0d7d53910&gt;
</pre></div>


<h3>See Also</h3>

<p><code>dplyr::select()</code>, <code>tidyselect::language</code> for
documentation of selection helpers.
</p>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>LINENO</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Line Number of Executing Expression</h2>

<h3>Description</h3>

<p>Get the line number of the executing expression.
</p>


<h3>Usage</h3>

<pre><code class="language-R">LINENO(n = 0, envir = parent.frame(n + 1),
       matchThisEnv = getOption("topLevelEnvironment"),
       srcfile = if (n) sys.parent(n) else 0)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>n, envir, matchThisEnv, srcfile</code></td>
<td>
<p>See <code>?this.path()</code>.</p>
</td>
</tr></table>
<h3>Details</h3>

<p><code>LINENO()</code> only works if the expressions have a
<code>srcref</code>.
</p>
<p>Scripts run with <code>Rscript</code> do not store their <code>srcref</code>, even when
<code>getOption("keep.source")</code> is <code>TRUE</code>.
</p>
<p>For <code>source()</code> and <code>sys.source()</code>, make sure to supply argument
<code>keep.source = TRUE</code> directly, or set options <code>"keep.source"</code> and
<code>"keep.source.pkgs"</code> to <code>TRUE</code>.
</p>
<p>For <a href="https://support.posit.co/hc/en-us/articles/205612627-Debugging-with-the-RStudio-IDE"><code>debugSource</code></a><code>()</code> in ‘<a href="https://posit.co/products/open-source/rstudio/">RStudio</a>’, it has no argument <code>keep.source</code>, so set
option <code>"keep.source"</code> to <code>TRUE</code> before calling.
</p>
<p>For <code>compiler::loadcmp()</code>, the <code>srcref</code> is never stored for the compiled
code, there is nothing that can be done.
</p>
<p>For <code>utils::Sweave()</code>, the <code>srcref</code> is never stored, there is nothing
that can be done.
</p>
<p>For <code>knitr::knit()</code>, the <code>srcref</code> is never stored, there is nothing that
can be done. I am looking into a fix.
</p>
<p>For <a href="https://CRAN.R-project.org/package=targets"><span class="pkg">package:targets</span></a>, set option <code>"keep.source"</code> to <code>TRUE</code> before
calling associated functions.
</p>
<p>For <code>box::use()</code>, <code>plumber::plumb()</code>, <code>shiny::runApp()</code>, and
<code>testthat::source_file()</code>, the <code>srcref</code> is always stored.
</p>


<h3>Value</h3>

<p>integer; <code>NA_integer_</code> if the line number is not found.
</p>


<h3>Note</h3>

<p>You can get a more accurate line number by wrapping <code>LINENO()</code> in
braces: </p>
<pre>{ LINENO() }</pre>


<h3>Examples</h3>

<pre><code class="language-R">FILE.R &lt;- tempfile(fileext = ".R")
writeLines(c("
LINENO()
LINENO()
## LINENO() respects #line directives
#line 15
LINENO()
#line 1218
cat(sprintf('invalid value %d at %s, line %d\\n',
            -5, try.this.path(), LINENO()))
"), FILE.R)


if (getRversion() &gt;= "4.3.0") {
    source(FILE.R, echo = TRUE, verbose = FALSE,
        max.deparse.length = Inf, keep.source = TRUE)
} else {
    this.path:::.source(FILE.R, echo = TRUE, verbose = FALSE,
        max.deparse.length = Inf, keep.source = TRUE)
}


unlink(FILE.R)
</code></pre>


</div>
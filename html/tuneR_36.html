<div class="container">

<table style="width: 100%;"><tr>
<td>FF</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimation of Fundamental Frequencies from a Wspec object</h2>

<h3>Description</h3>

<p>Estimation of Fundamental Frequencies from an object of class <code>Wspec</code>.
Additionally, some heuristics are used to distinguish silence, noise (and breathing for singers) 
from real tones.</p>


<h3>Usage</h3>

<pre><code class="language-R">FF(object, peakheight = 0.01, silence = 0.2, minpeak = 9, diapason = 440, 
    notes = NULL, interest.frqs = seq(along = object@freq),
    search.par = c(0.8, 10, 1.3, 1.7))
    
FFpure(object, peakheight = 0.01, diapason = 440, 
    notes = NULL, interest.frqs = seq(along = object@freq),
    search.par = c(0.8, 10, 1.3, 1.7))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class <code>Wspec</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>peakheight</code></td>
<td>
<p>The peak's proportion of the maximal peak height to be 
considered for fundamental frequency detection.
The default (0.01) means peaks smaller than 0.02 times the maximal peak height are omitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silence</code></td>
<td>
<p>The maximum proportion of periodograms to be considered as silence or noise (such as breathing).
The default (0.2) means that less than 20 out of 100 periodograms represent silence or noise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minpeak</code></td>
<td>
<p>If more than <code>minpeak</code> peaks are considered for detection and passed argument <code>peakheight</code>,
such periodograms are detected to be silence or noise (if <code>silence &gt; 0</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diapason</code></td>
<td>
<p>Frequency of diapason a, default is 440 (Hertz).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>notes</code></td>
<td>
<p>Optional, a vector of integers indicating the notes (in halftones from diapason a)
that are expected. By applying this restriction, the “detection error” might be reduced in some cases.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interest.frqs</code></td>
<td>
<p>Optional, either a vector of integers indicating the 
indices of (fundamental) frequencies in <code>object</code> that are expected,
or one of the character strings <code>"bass"</code>, <code>"tenor"</code>, <code>"alto"</code> or <code>"soprano"</code>.
For these voice types, only typical frequency ranges are considered for detection.
</p>
<p>By applying this restriction, the “detection error” might be reduced in some cases.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>search.par</code></td>
<td>
<p>Parameters to look for peaks:
</p>

<ol>
<li>
<p> The first peak larger than <code>peakheight * 'largest_peak'</code> is taken.
</p>
</li>
<li>
<p> Its frequency is multiplied by <code>1+search.par[1]</code>
Now, any larger peak between the old peak and that value is taken,
if (a) it exists and if (b) it is above the <code>search.par[2]</code>-th Fourier-Frequency.
</p>
</li>
<li>
<p> Within the interval of frequencies <code>'current peak' * search.par[3:4]</code>,
another high peak is looked for. If any high peak exists in that interval, 
it can be assumed we got the wrong partial and the ‘real’ fundamental frequency can be re-estimated 
from the next two partials.</p>
</li>
</ol>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>FFpure</code> just estimates the fundamental frequencies for all periodograms contained in the 
<code>object</code> (of class <code>Wspec</code>).
</p>
<p><code>FF</code> additionally uses some heuristics to distinguish silence, noise (and breathing for singers) 
from real tones. It is recommended to use the wrapper function <code>FF</code> rather than <code>FFpure</code>.
If silence detecion can be omitted by specifying <code>silence = 0</code>.
</p>


<h3>Value</h3>

<p>Vector of estimated fundamental frequencies (in Hertz) for each periodogram conatined in <code>object</code>.
</p>


<h3>Note</h3>

<p>These functions are still in development and may be changed in due course.</p>


<h3>Author(s)</h3>

<p>Uwe Ligges <a href="mailto:ligges@statistik.tu-dortmund.de">ligges@statistik.tu-dortmund.de</a></p>


<h3>See Also</h3>

<p><code>Wspec</code>, <code>periodogram</code> (including an example), <code>noteFromFF</code>,
and tuneR for a very complete example.</p>


</div>
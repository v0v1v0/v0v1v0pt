<div class="container">

<table style="width: 100%;"><tr>
<td>transform_if</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>transform_if: Conditional Sub-set Transformation of Atomic objects</h2>

<h3>Description</h3>

<p>The <code>transform_if()</code> function transforms an object <code>x</code>,
based on the logical result (<code>TRUE, FALSE, NA</code>)
of condition function <code>cond(x)</code> or logical vector <code>cond</code>,
such that: <br></p>

<ul>
<li>
<p> For every value where <code>cond(x)==TRUE</code> / <code>cond==TRUE</code>,
function <code>yes(x)</code> is run or scalar <code>yes</code> is returned.
</p>
</li>
<li>
<p> For every value where <code>cond(x)==FALSE</code> / <code>cond==FALSE</code>,
function <code>no(x)</code> is run or scalar <code>no</code> is returned.
</p>
</li>
<li>
<p> For every value where <code>cond(x)==NA</code> / <code>cond==NA</code>,
function <code>other(x)</code> is run or scalar <code>other</code> is returned. <br></p>
</li>
</ul>
<p>For a more <code>ifelse</code>-like function where
<code>yes</code>, <code>no</code>, and <code>other</code> are vectors,
see <code>kit::</code>iif.
</p>


<h3>Usage</h3>

<pre><code class="language-R">transform_if(x, cond, yes = function(x) x, no = function(x) x, other = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a vector, matrix, or array.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cond</code></td>
<td>
<p>either an object of class <code>logical</code> with the same length as <code>x</code>, <br>
or a (possibly anonymous) function that returns an object of class <code>logical</code>
with the same length as <code>x</code>. <br>
For example: <code>\(x)x&gt;0</code>. <br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yes</code></td>
<td>
<p>the (possibly anonymous) transformation function to use
when function <code>cond(x)==TRUE</code> / logical <code>cond==TRUE</code>. <br>
Alternatively, one can also supply an atomic scalar. <br>
If argument <code>yes</code> is not specified, it defaults to <code>\(x)x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>no</code></td>
<td>
<p>the (possibly anonymous) transformation function to use
when function <code>cond(x)==FALSE</code> / logical <code>cond==FALSE</code>. <br>
Alternatively, one can also supply an atomic scalar. <br>
If argument <code>no</code> is not specified, it defaults to <code>\(x)x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>other</code></td>
<td>
<p>the (possibly anonymous) transformation function to use
when function <code>cond(x)</code> / logical <code>cond</code> returns <code>NA</code>. <br>
Alternatively, one can also supply an atomic scalar. <br>
If argument <code>other</code> is not specified, it defaults to <code>NA</code>. <br>
Note that function  <code>other(x)</code> is run or scalar <code>other</code> is returned
when function <code>cond(x)</code> or logical <code>cond</code> is <code>NA</code>,
not necessarily when <code>x</code> itself is <code>NA</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Be careful with coercion! For example the following code:
</p>
<div class="sourceCode r"><pre>x &lt;- c("a", "b")
transform_if(x, \(x) x == "a", as.numeric, as.logical)
</pre></div>
<p>returns:
</p>
<div class="sourceCode r"><pre>[1] NA NA
</pre></div>
<p>due to the same character vector being given 2 incompatible classes. <br><br></p>


<h3>Value</h3>

<p>The transformed vector, matrix, or array (attributes are conserved).
</p>


<h3>See Also</h3>

<p>tinycodet_dry
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- c(-10:9, NA, NA)
object &lt;- matrix(x, ncol = 2)
attr(object, "helloworld") &lt;- "helloworld"
print(object)
y &lt;- 0
z &lt;- 1000

object |&gt; transform_if(\(x) x &gt; y, log, \(x) x^2, \(x) -z)
object |&gt; transform_if(object &gt; y, log, \(x) x^2, -z) # same as previous line

</code></pre>


</div>
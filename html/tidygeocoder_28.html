<div class="container">

<table style="width: 100%;"><tr>
<td>query_api</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Execute a geocoder API query</h2>

<h3>Description</h3>

<p>The get_api_query function can create queries for this
function to execute.
</p>


<h3>Usage</h3>

<pre><code class="language-R">query_api(
  api_url,
  query_parameters,
  mode = "single",
  batch_file = NULL,
  input_list = NULL,
  content_encoding = "UTF-8",
  timeout = 20,
  method = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>api_url</code></td>
<td>
<p>Base URL of the API. query parameters are appended to this</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query_parameters</code></td>
<td>
<p>api query parameters in the form of a named list</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>determines the type of query to execute</p>
<pre>- "single": geocode a single input (all methods)
- "list": batch geocode a list of inputs (ex. geocodio)
- "file": batch geocode a file of inputs (ex. census)
</pre>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch_file</code></td>
<td>
<p>a csv file of input data to upload (for <code>mode = 'file'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_list</code></td>
<td>
<p>a list of input data (for <code>mode = 'list'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>content_encoding</code></td>
<td>
<p>Encoding to be used for parsing content</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeout</code></td>
<td>
<p>timeout in minutes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>if 'mapquest' or 'arcgis' then the query status code is changed appropriately</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a named list containing the response content (<code>content</code>) and the HTTP request status (<code>status</code>)
</p>


<h3>See Also</h3>

<p>get_api_query extract_results extract_reverse_results geo reverse_geo
</p>


<h3>Examples</h3>

<pre><code class="language-R">
raw1 &lt;- query_api("http://nominatim.openstreetmap.org/search", 
   get_api_query("osm", list(address = 'Hanoi, Vietnam')))
   
raw1$status
   
extract_results('osm', jsonlite::fromJSON(raw1$content))

raw2 &lt;- query_api("http://nominatim.openstreetmap.org/reverse", 
   get_api_query("osm", custom_parameters = list(lat = 38.895865, lon = -77.0307713)))
   
extract_reverse_results('osm', jsonlite::fromJSON(raw2$content))


</code></pre>


</div>
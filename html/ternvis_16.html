<div class="container">

<table style="width: 100%;"><tr>
<td>tverify</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Verification of ternary forecasts / observations</h2>

<h3>Description</h3>

<p>Function to create verification information associated with a set of forecasts <code>p</code> and associated observations <code>o</code>.</p>


<h3>Usage</h3>

<pre><code class="language-R">tverify(p, o, q, forceq, ncirc, L)

## Default S3 method:
tverify(p = cbind(1, 1, 1)/3, o = cbind(0, 0, 1), 
        q = cbind(1, 1, 1)/3, forceq = FALSE, 
        ncirc = 11, L = diag(c(1, 1, 1))/sqrt(2))
## S3 method for class 'tverify'
plot(x, thresh = 0, lsharp = TRUE, 
     L = diag(c(1, 1, 1))/sqrt(2),...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>An n-by-3 matrix of ternary forecasts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>o</code></td>
<td>
<p>An n-by-3 matrix of ternary observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>A 1-by-3 matrix containing the climatology.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forceq</code></td>
<td>
<p>A logical. If <code>forceq</code> = TRUE then the input climatology <code>q</code> is used. If <code>forceq</code> = FALSE a climatology is calculated from <code>o</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncirc</code></td>
<td>
<p>Controls discretisation of barycentric coordinates. (The number of hexagons along each side of the triangle.) </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of the tverify class (as produced by <code>tverify</code> or <code>tgetcal</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresh</code></td>
<td>
<p>A ‘threshold’ number of forecasts in a ‘bin’, below which the forecast will not be plotted. (Prevents diagram being cluttered by very rare forecasts).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lsharp</code></td>
<td>
<p>Logical controlling whether a ternary sharpness diagram is to be included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L</code></td>
<td>
<p>A quadratic scoring matrix. The matrix for the Brier score is the default. Full functionality for other scores not yet implemented.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Not used.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>tverify</code>, which is a list containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>pbin</code></td>
<td>
<p>array of bins in barycentric coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nobs</code></td>
<td>
<p>number of forecasts in each bin.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obar</code></td>
<td>
<p>mean onservation associated with each forecast bin.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>score</code></td>
<td>
<p>score associated with each forecast bin.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unc</code></td>
<td>
<p>uncertainty associated with each forecast bin.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rel</code></td>
<td>
<p>reliability associated with each forecast bin.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>resolution associated with each forecast bin.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scorebar</code></td>
<td>
<p>overall score.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uncbar</code></td>
<td>
<p>overall uncertainty.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>relbar</code></td>
<td>
<p>overall reliability.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resbar</code></td>
<td>
<p>overall resolution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncirc</code></td>
<td>
<p>number of bins along each side of triangle.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>input forecast data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>o</code></td>
<td>
<p>input observation data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>assigned</code></td>
<td>
<p>index of bin assigned to each forecast.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L</code></td>
<td>
<p>scoring matrix used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hexc</code></td>
<td>
<p>array of hexagon centres.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>climatology.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pk</code></td>
<td>
<p>forecasts set to centre of each bin (<code>tverify</code>) or recalibrated (<code>tgetcal</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ok</code></td>
<td>
<p>mean observations corresponding to forecasts <code>pk</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pars</code></td>
<td>
<p>parameters in calibration (<code>tgetcal</code> only).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opt</code></td>
<td>
<p>details of calibration (<code>tgetcal</code> only ).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>calibration function (<code>tgetcal</code> only, for use with <code>tcalibrate</code>).</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Tim Jupp
</p>


<h3>References</h3>

<p>Jupp TE, Lowe R, Stephenson DB, Coelho CAS (2012) On the visualization, verification and recalibration of ternary probabilistic forecasts, Philosophical Transactions of the Royal Society, volume 370, pages 1100-1120. 
</p>
<p><a href="http://rsta.royalsocietypublishing.org/content/370/1962/1100.full">http://rsta.royalsocietypublishing.org/content/370/1962/1100.full</a>
</p>
<p><a href="http://arxiv.org/abs/1103.1303">http://arxiv.org/abs/1103.1303</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(foot)                            # get football betting data
tv   &lt;- tverify(p=foot$p,o=foot$o)    # get verification info
plot(tv)                              # plot verification info
</code></pre>


</div>
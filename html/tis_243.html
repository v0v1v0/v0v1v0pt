<div class="container">

<table style="width: 100%;"><tr>
<td>ymdShade</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Shading Date Ranges</h2>

<h3>Description</h3>

<p><code>ymdXy</code> returns a list of x and y coordinates that can be fed
to <code>polygon</code> to draw NBER shadings on the current plot.
If the last row of the <code>ymds</code> argument has a Start entry but an "NA"
End entry and <code>openShade</code> is <code>FALSE</code>, the returned list will
not have coordinates for the last row, but will instead include a
vLine element that gives the x coordinate of the last Start. If
<code>openShade</code> is <code>TRUE</code> (the default), the list includes x
and y coordinates for the last row of <code>ymds</code>, using the second
element of the horizontal range determined by the <code>xrange</code>
parameter as its end time.
</p>
<p><code>ymdShade</code> shades date ranges on the current tisPlot. 
on the current plot.  It calls <code>ymdXy</code> to get x and y
coordinates for the areas to be shaded and then passes those
coordinates along with its own arguments to <code>polygon</code> to
do the shading.  It also draws a vertical line at the appropriate
location if the list returned by <code>ymdXy</code> has a vLine element.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ymdShade(ymds, col = grey(0.8), border = FALSE, xpd = FALSE,
          xrange = NULL, openShade = TRUE, ...)
ymdXy(ymds, xrange = NULL, openShade = TRUE)
</code></pre>


<h3>Arguments</h3>

<p>All but <code>ymds</code> are passed along to <code>polygon</code>:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>ymds</code></td>
<td>
<p>a matrix of yyyymmdd dates with two columns named 'Start'
and 'End' that specifies the date ranges to be shaded.
<code>nberDates()</code> produces a suitable matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>color to shade recessionary periods </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>
<p>the default (<code>FALSE</code>) omits borders on the shaded
regions. <code>TRUE</code> draws borders in the foreground color.
Alternatively, specify a border color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xpd</code></td>
<td>
<p>should clipping take place? </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other args passed to <code>polygon</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xrange</code></td>
<td>
<p>horizontal range over which recession shading should be
drawn.  The default value <code>NULL</code> uses the entire range of the
plot. Note however the <code>tisPlot</code> uses the range of the data,
which will generally differ the plot range unless the <code>tisPlot</code>
parameters <code>leftExpandBy</code> and <code>rightExpandBy</code> are zero.
You can force <code>tisPlot</code> to use the plot range by setting the
parameter <code>nberArgs = list(xrange = NULL)</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>openShade</code></td>
<td>
<p>governs how <code>ymdXy</code> and consequently
<code>ymdShade</code> handle the case where the last row of the <code>ymds</code>
matrix has an <code>NA</code> in the "End" column, indicating that the end
date of the most recent shaded period is not known.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>As described above, <code>ymdXy</code> returns a list.  <code>ymdShade</code>
does not return anything useful.
</p>


<h3>See Also</h3>

 <p><code>polygon</code></p>


<h3>Examples</h3>

<pre><code class="language-R">    require("datasets")
    plot(presidents, type='n', ylab="Presidents approval rating")
    ymdShade(nberDates())
    lines(presidents)
</code></pre>


</div>
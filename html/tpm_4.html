<div class="container">

<table style="width: 100%;"><tr>
<td>phed</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate PHED Metric</h2>

<h3>Description</h3>

<p>Calculate the CMAQ Traffic Congestion Measure in accordance with
<a href="https://www.fhwa.dot.gov/tpm/guidance/hif18040.pdf">FHWA General Guidance and Step-by-Step Metric Calculation Procedures for National Performance Measures for Congestion, Reliability, and Freight, and CMAQ Traffic Congestion</a>
Requires the speed limits for all TMC segments. Other parameters are optional
and (with defaults supplied from  FHWA's guidance). Uses the same travel time readings
file as <code>score(..., metric = "LOTTR")</code>. Outputs annual hours of delay.
</p>


<h3>Usage</h3>

<pre><code class="language-R">phed(
  travel_time_readings,
  tmc_identification,
  speed_limits,
  urban_code = NA,
  pm_peak = 3,
  avo_cars = 1.7,
  avo_trucks = 1,
  avo_buses = 10.7,
  moy_factor = moy_factor_default,
  dow_factor = dow_factor_default,
  hod_profile = hod_profile_default,
  population = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>travel_time_readings</code></td>
<td>
<p>path to readings CSV with 15-minute travel time observations for all vehicles exported from RITIS.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tmc_identification</code></td>
<td>
<p>Path to TMC_Identification.csv file provided by RITIS with travel time download.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>speed_limits</code></td>
<td>
<p>a data.frame-like object with speed limits for all TMCs with format tmc,speed_limit</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>urban_code</code></td>
<td>
<p>optional vector of one (or more) urban_code values. if specified, filters TMCs to the relevant urban_code</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pm_peak</code></td>
<td>
<p>3 or 4. Peak Period is defined as weekdays from 6 am to 10 am and either 3 pm to 7 pm (3) or 4 pm to 8 pm (4)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avo_cars</code></td>
<td>
<p>Average vehicle occupancy for passenger vehicles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avo_trucks</code></td>
<td>
<p>Average vehicle occupancy for freight trucks</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avo_buses</code></td>
<td>
<p>Average vehicle occupancy for buses</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>moy_factor</code></td>
<td>
<p>Month of year traffic adjustment factors for freeways and non-freeway facilities in format </p>
<pre>month,freeway,non_freeway
1, 0.99, 0.98
... 
12, 1.01, 1.00</pre>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dow_factor</code></td>
<td>
<p>Day of week adjustment factors. Monday (2) through Friday (6). Format: </p>
<pre>day,freeway,non_freeway
2, 1.05, 1.05
...
6, 1.1, 1.1</pre>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hod_profile</code></td>
<td>
<p>Hourly traffic percentages for peak hours. Non-directional. Format: </p>
<pre>hour,freeway,non_freeway
6,0.045,0.050
...
18,0.052,0.048</pre>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>population</code></td>
<td>
<p>Optional population value. If provided, function will print PHED value</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Annual hours of peak hour excessive delay per capita
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
phed(travel_time_readings = "npmrds/all_vehicles_2021/Readings.csv",
     tmc_identification = "npmrds/all_vehicles_2021/TMC_Identification.csv", 
     speed_limits = fread("birmingham_tmc_speed_limits.csv"), 
     urban_code = 7786,
     pm_peak = 3, 
     output_file_name = "phed_2021.csv",
     avo_cars = 1.62, avo_trucks = 1.0, avo_buses = 5.1,
     moy_factor = fread("birmingham_moy_factors.csv"), 
     dow_factor = fread("birmingham_dow_factors.csv"), 
     hod_profile = fread("birmingham_hod_profile.csv"),
     population = 752898)

## End(Not run)

</code></pre>


</div>
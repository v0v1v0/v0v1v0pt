<div class="container">

<table style="width: 100%;"><tr>
<td>validateSchema</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Check and update schema descriptions</h2>

<h3>Description</h3>

<p>This function takes a raw schema description and updates values that were
only given as wildcard or implied values. It is automatically called by
<code>reorganise</code>, but can also be used in concert with the getters to debug
a schema.
</p>


<h3>Usage</h3>

<pre><code class="language-R">validateSchema(schema = NULL, input = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>schema</code></td>
<td>
<p>[<code>symbol(1)</code>]<br> the schema description.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>[<code>data.frame(1)</code>]<br> an input for which to check a schema
description.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The core idea of a schema description is that it can be written in a
very generic way, as long as it describes sufficiently where in a table
what variable can be found. A very generic way can be via using the
function <code>.find</code> to identify the initially unknown
cell-locations of a variable on-the-fly, for example when it is merely
known that a variable must be in the table, but not where it is.
</p>
<p><code>validateSchema</code> matches a schema with an input table and inserts the
accordingly evaluated positions (of clusters, filters and variables),
adapts some of the meta-data and ensures formal consistency of the schema.
</p>


<h3>Value</h3>

<p>An updated schema description
</p>


<h3>Examples</h3>

<pre><code class="language-R"># build a schema for an already tidy table
(tidyTab &lt;- tabs2shift$tidy)

schema &lt;-
  setIDVar(name = "territories", col = 1) %&gt;%
  setIDVar(name = "year", col = .find(pattern = "period")) %&gt;%
  setIDVar(name = "commodities", col = 3) %&gt;%
  setObsVar(name = "harvested", col = 5) %&gt;%
  setObsVar(name = "production", col = 6)

# before ...
schema

# ... after
validateSchema(schema = schema, input = tidyTab)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>FilterStateExpr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
<code>FilterStateExpr</code> <code>R6</code> class</h2>

<h3>Description</h3>

<p>Sister class to <code>FilterState</code> that handles arbitrary filter expressions.
</p>


<h3>Details</h3>

<p>Creates a filter state around a predefined condition call (logical predicate).
The condition call is independent of the data
and the filter card allows no interaction (the filter is always fixed).
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-FilterStateExpr-new"><code>FilterStateExpr$new()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-format"><code>FilterStateExpr$format()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-print"><code>FilterStateExpr$print()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-get_state"><code>FilterStateExpr$get_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-set_state"><code>FilterStateExpr$set_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-get_call"><code>FilterStateExpr$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-destroy_observers"><code>FilterStateExpr$destroy_observers()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-server"><code>FilterStateExpr$server()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-ui"><code>FilterStateExpr$ui()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-clone"><code>FilterStateExpr$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-FilterStateExpr-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Initialize a <code>FilterStateExpr</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$new(slice)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>slice</code></dt>
<dd>
<p>(<code>teal_slice_expr</code>)</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Object of class <code>FilterStateExpr</code>, invisibly.
</p>


<hr>
<a id="method-FilterStateExpr-format"></a>



<h4>Method <code>format()</code>
</h4>

<p>Returns a formatted string representing this <code>FilterStateExpr</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$format(show_all = FALSE, trim_lines = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>show_all</code></dt>
<dd>
<p>(<code>logical(1)</code>) passed to <code>format.teal_slice</code></p>
</dd>
<dt><code>trim_lines</code></dt>
<dd>
<p>(<code>logical(1)</code>) passed to <code>format.teal_slice</code></p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>character(1)</code> the formatted string
</p>


<hr>
<a id="method-FilterStateExpr-print"></a>



<h4>Method <code>print()</code>
</h4>

<p>Prints this <code>FilterStateExpr</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$print(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt>
<dd>
<p>arguments passed to the <code>format</code> method</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilterStateExpr-get_state"></a>



<h4>Method <code>get_state()</code>
</h4>

<p>Returns a complete description of this filter state.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$get_state()</pre></div>



<h5>Returns</h5>

<p>A <code>teal_slice</code> object.
</p>


<hr>
<a id="method-FilterStateExpr-set_state"></a>



<h4>Method <code>set_state()</code>
</h4>

<p>Does nothing. Exists for compatibility.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$set_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt>
<dd>
<p>(<code>teal_slice</code>)</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>self</code>, invisibly.
</p>


<hr>
<a id="method-FilterStateExpr-get_call"></a>



<h4>Method <code>get_call()</code>
</h4>

<p>Get reproducible call.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$get_call(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt>
<dd>
<p>(<code>ignored</code>) for a consistency with <code>FilterState</code>
</p>
<p>Returns reproducible condition call for current selection relevant
for selected variable type.
Method is using internal reactive values which makes it reactive
and must be executed in reactive or isolated context.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>call</code> or <code>NULL</code>
</p>


<hr>
<a id="method-FilterStateExpr-destroy_observers"></a>



<h4>Method <code>destroy_observers()</code>
</h4>

<p>Destroy observers stored in <code>private$observers</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$destroy_observers()</pre></div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilterStateExpr-server"></a>



<h4>Method <code>server()</code>
</h4>

<p><code>shiny</code> module server.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$server(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Reactive expression signaling that the remove button has been clicked.
</p>


<hr>
<a id="method-FilterStateExpr-ui"></a>



<h4>Method <code>ui()</code>
</h4>

<p><code>shiny</code> module UI.
The UI for this class contains simple message stating that it is not supported.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$ui(id, parent_id = "cards")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
<dt><code>parent_id</code></dt>
<dd>
<p>(<code>character(1)</code>)
id of the <code>FilterStates</code> card container.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-FilterStateExpr-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R"># use non-exported function from teal.slice
include_js_files &lt;- getFromNamespace("include_js_files", "teal.slice")
include_css_files &lt;- getFromNamespace("include_css_files", "teal.slice")
FilterStateExpr &lt;- getFromNamespace("FilterStateExpr", "teal.slice")

filter_state &lt;- FilterStateExpr$new(
  slice = teal_slice(
    dataname = "x",
    id = "FA",
    title = "Adult females",
    expr = "sex == 'F' &amp; age &gt;= 18"
  )
)
filter_state$get_call()

# working filter in an app
library(shiny)
library(shinyjs)

ui &lt;- fluidPage(
  useShinyjs(),
  include_css_files(pattern = "filter-panel"),
  include_js_files(pattern = "count-bar-labels"),
  column(4, tags$div(
    tags$h4("ChoicesFilterState"),
    filter_state$ui("fs")
  )),
  column(8, tags$div(
    tags$h4("Condition (i.e. call)"), # display the condition call generated by this FilterState
    textOutput("condition_choices"), tags$br(),
    tags$h4("Unformatted state"), # display raw filter state
    textOutput("unformatted_choices"), tags$br(),
    tags$h4("Formatted state"), # display human readable filter state
    textOutput("formatted_choices"), tags$br()
  ))
)

server &lt;- function(input, output, session) {
  filter_state$server("fs")
  output$condition_choices &lt;- renderPrint(filter_state$get_call())
  output$formatted_choices &lt;- renderText(filter_state$format())
  output$unformatted_choices &lt;- renderPrint(filter_state$get_state())
}

if (interactive()) {
  shinyApp(ui, server)
}

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>tfrmt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Table Format</h2>

<h3>Description</h3>

<p>tfrmt, or "table format" is a way to pre-define the non-data components of
your tables, and how the data will be handled once added: i.e. title,
footers, headers, span headers, and cell formats. In addition, tfrmt's can be
layered, building from one table format to the next. For cases where only one
value can be used, the newly defined tfrmt accepts the latest tfrmt
</p>


<h3>Usage</h3>

<pre><code class="language-R">tfrmt(
  tfrmt_obj,
  group = vars(),
  label = quo(),
  param = quo(),
  value = quo(),
  column = vars(),
  title,
  subtitle,
  row_grp_plan,
  body_plan,
  col_style_plan,
  col_plan,
  sorting_cols,
  big_n,
  footnote_plan,
  page_plan,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tfrmt_obj</code></td>
<td>
<p>a tfrmt object to base this new format off of</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>what are the grouping vars of the input dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>what is the label column of the input dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>what is the param column of the input dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>what is the value column of the input dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>column</code></td>
<td>
<p>what is the column names column in the input dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>title of the table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subtitle</code></td>
<td>
<p>subtitle of the table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_grp_plan</code></td>
<td>
<p>plan of the row groups blocking. Takes a <code>row_grp_plan()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>body_plan</code></td>
<td>
<p>combination and formatting of the input data. Takes a <code>body_plan()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_style_plan</code></td>
<td>
<p>how to style columns including alignment (left, right, character) and width. Takes a <code>col_style_plan()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_plan</code></td>
<td>
<p>a col_plan object which is used to select, rename, and nest
columns. Takes a <code>col_plan()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sorting_cols</code></td>
<td>
<p>which columns determine sorting of output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>big_n</code></td>
<td>
<p>how to format subject totals ("big Ns") for inclusion in the column labels. Takes a <code>big_n_structure()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>footnote_plan</code></td>
<td>
<p>footnotes to be added to the table. Takes a <code>footnote_plan()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>page_plan</code></td>
<td>
<p>pagination splits to be applied to the table. Takes a <code>page_plan()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td>
</tr>
</table>
<h3>Details</h3>



<h4>NSE and Argument Evaluation</h4>


<ul>
<li>
<p> tfrmt allows users to pass <code>vars</code>, <code>quo</code>, and unquoted expressions to a
variety of arguments, such as <code>group</code>, <code>label</code>, <code>param</code>, <code>value</code>,
<code>column</code>, and <code>sorting_cols</code>. Users accustomed to tidyverse semantics
should be familiar with this behaviour. However, there is an important
behaviour difference between tfrmt and normal tidyverse functions. Because
the data are not a part of tfrmt, it does not know when a value being
passed to it is intended to be an unquoted expression representing a column
name or an object from the environment. As such, it preferentially uses the
value from the environment over preserving the entry as an expression. For
example, if you have an object "my_object" in your
environment with the value "Hello world", and try to create a tfrmt as
<code>tfrmt(column = my_object)</code>, it will take the value of "my_object" over
assuming the column argument is an unquoted expression and view the entry
to <code>column</code> as "Hello World". To pass "my_object" to tfrmt as a column name, use
quotes around the value: <code>tfrmt(columnn = "my_object")</code>.
</p>
</li>
<li>
<p> Additionally, unquoted expressions that match <code>tfrmt</code>'s other
argument names can cause unexpected results. It is recommended
to put quotes around the value as such:
<code>tfrmt(label = "group")</code>. In this case, the quoting will prevent <code>tfrmt</code>
from assigning its <code>group</code> input value to the <code>label</code> value.
</p>
</li>
</ul>
<h3>Value</h3>

<p>tfrmt object
</p>


<h3>Images</h3>

<p>Here are some example outputs:

<img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/main/images/tfrmt-groups-three-cols-cropped.jpg" alt="Example showing no groups, one group and two groups" style="width:100%;"></p>


<h3>See Also</h3>

<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/building_blocks.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
tfrmt_spec &lt;- tfrmt(
  label = label,
  column = column,
  param = param,
  value=value)

tfrmt_spec &lt;- tfrmt(
  label = label,
  column = column,
  param = param,
  value=value,
# Set the formatting for values
  body_plan = body_plan(
    frmt_structure(
      group_val = ".default",
      label_val = ".default",
      frmt_combine("{n} {pct}",
           n = frmt("xxx"),
           pct = frmt_when(
                "==100" ~ "(100%)",
                "==0" ~ "",
                TRUE ~ frmt("(xx.x %)")
                )
           )
    )
  ),
# Specify column styling plan
  col_style_plan = col_style_plan(
    col_style_structure(col = vars(everything()), align = c(".",","," "))
  ))

tfrmt_spec &lt;- tfrmt(
  group = group,
  label = label,
  column = column,
  param = param,
  value=value,
  sorting_cols = c(ord1, ord2),
  # specify value formatting
  body_plan = body_plan(
    frmt_structure(
      group_val = ".default",
      label_val = ".default",
      frmt_combine("{n} {pct}",
           n = frmt("xxx"),
           pct = frmt_when(
                "==100" ~ "(100%)",
                "==0" ~ "",
                TRUE ~ frmt("(xx.x %)")
                )
           )
    ),
    frmt_structure(
        group_val = ".default",
        label_val = "n",
        frmt("xxx")
   ),
    frmt_structure(
        group_val = ".default",
        label_val = c("Mean", "Median", "Min","Max"),
        frmt("xxx.x")
     ),
    frmt_structure(
        group_val = ".default",
        label_val = "SD",
        frmt("xxx.xx")
    ),
    frmt_structure(
        group_val = ".default",
        label_val = ".default",
        p = frmt("")
    ),
    frmt_structure(
        group_val = ".default",
        label_val = c("n","&lt;65 yrs","&lt;12 months","&lt;25"),
        p = frmt_when(
            "&gt;0.99" ~ "&gt;0.99",
            "&lt;0.001" ~ "&lt;0.001",
            TRUE ~ frmt("x.xxx", missing = "")
        )
    )
  ),
  # remove extra cols
  col_plan = col_plan(-grp,
                      -starts_with("ord") ),
  # Specify column styling plan
  col_style_plan = col_style_plan(
    col_style_structure(col = vars(everything()), align = c(".",","," "))
  ),

  # Specify row group plan
  row_grp_plan = row_grp_plan(
    row_grp_structure(
         group_val = ".default",
         element_block(post_space = " ")
    ),
    label_loc = element_row_grp_loc(location = "column")
  )

)


</code></pre>


</div>
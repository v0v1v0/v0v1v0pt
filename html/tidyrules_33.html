<div class="container">

<table style="width: 100%;"><tr>
<td>rulelist</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rulelist</h2>

<h3>Description</h3>



<h4>Structure</h4>

<p>A <code>rulelist</code> is ordered list of rules stored as a dataframe. Each row,
specifies a rule (LHS), expected outcome (RHS) and some other details.
</p>
<p>It has these mandatory columns:
</p>

<ul>
<li> <p><code>rule_nbr</code>: (integer vector) Rule number
</p>
</li>
<li> <p><code>LHS</code>: (character vector) A rule is a string that can be parsed using <code>base::parse()</code>
</p>
</li>
<li> <p><code>RHS</code>: (character vector or a literal)
</p>
</li>
</ul>
<h4>Example</h4>

<div class="sourceCode"><pre>| rule_nbr|LHS                                                                  |RHS       | support| confidence|     lift|
|--------:|:--------------------------------------------------------------------|:---------|-------:|----------:|--------:|
|        1|( island %in% c('Biscoe') ) &amp; ( flipper_length_mm &gt; 203 )            |Gentoo    |     122|  1.0000000| 2.774193|
|        2|( island %in% c('Biscoe') ) &amp; ( flipper_length_mm &lt;= 203 )           |Adelie    |      46|  0.9565217| 2.164760|
|        3|( island %in% c('Dream', 'Torgersen') ) &amp; ( bill_length_mm &gt; 44.1 )  |Chinstrap |      65|  0.9538462| 4.825339|
|        4|( island %in% c('Dream', 'Torgersen') ) &amp; ( bill_length_mm &lt;= 44.1 ) |Adelie    |     111|  0.9459459| 2.140825|
</pre></div>



<h4>Create a rulelist</h4>

<p>A <code>rulelist</code> can be created using <code>tidy()</code> on some supported model fits
(run: <code>utils::methods(tidy)</code>). It can also be created manually from a
existing dataframe using as_rulelist.
</p>



<h4>Keys and attributes</h4>

<p>Columns identified as 'keys' along with <code>rule_nbr</code> form a unique
combination
â€“ a group of rules. For example, rule-based C5 model with multiple trials
creates rules per each <code>trial_nbr</code>. <code>predict</code> method understands 'keys',
thereby provides/predicts a rule number (for each row in new data / test
data) within the same <code>trial_nbr</code>.
</p>
<p>A rulelist has these mandatory attributes:
</p>

<ul>
<li> <p><code>estimation_type</code>: One among <code>regression</code>, <code>classification</code>
</p>
<p>A rulelist has these optional attributes:
</p>
</li>
<li> <p><code>keys</code>: (character vector)Names of the column that forms a key.
</p>
</li>
<li> <p><code>model_type</code>: (string) Name of the model
</p>
</li>
</ul>
<h5>Set Validation data</h5>

<p>This helps a few methods like augment, calculate, prune, reorder
require few additional attributes which can be set using
set_validation_data.
</p>



<h5>Methods for rulelist</h5>


<ol>
<li> <p>Predict: Given a dataframe (possibly without a
dependent variable column aka 'test data'), predicts the first rule (as
ordered in the rulelist) per 'keys' that is applicable for each row. When
<code>multiple = TRUE</code>, returns all rules applicable for a row (per key).
</p>
</li>
<li> <p>Augment: Outputs summary statistics per rule over
validation data and returns a rulelist with a new dataframe-column.
</p>
</li>
<li> <p>Calculate: Computes metrics for a rulelist in a
cumulative manner such as <code>cumulative_coverage</code>, <code>cumulative_overlap</code>,
<code>cumulative_accuracy</code>.
</p>
</li>
<li> <p>Prune: Suggests pruning a rulelist such that some
expectation are met (based on metrics). Example: cumulative_coverage of 80%
can be met with a first few rules.
</p>
</li>
<li> <p>Reorder: Reorders a rulelist in order to maximize a
metric.
</p>
</li>
</ol>
<h5>Manipulating a rulelist</h5>

<p>Rulelists are essentially dataframes. Hence, any dataframe operations which
preferably preserve attributes will output a rulelist. as_rulelist and
as.data.frame will help in moving back and forth between rulelist and
dataframe worlds.
</p>



<h5>Utilities for a rulelist</h5>


<ol>
<li> <p>as_rulelist: Create a <code>rulelist</code> from a
dataframe with some mandatory columns.
</p>
</li>
<li> <p>set_keys: Set or Unset 'keys' of a <code>rulelist</code>.
</p>
</li>
<li> <p>to_sql_case: Outputs a SQL case statement for a <code>rulelist</code>.
</p>
</li>
<li> <p>convert_rule_flavor: Converts <code>R</code>-parsable rule strings to python/SQL
parsable rule strings.
</p>
</li>
</ol>
<h3>See Also</h3>

<p>rulelist, tidy, augment,
predict, calculate,
prune, reorder
</p>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>compose_and_enable_validators</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function to compose <code>validators</code> from <code>data_extract_multiple_srv</code>
</h2>

<h3>Description</h3>

<p>This function takes the output from <code>data_extract_multiple_srv</code> and
collates the <code>shinyvalidate::InputValidator</code>s returned into a single
<code>validator</code> and enables this.
</p>


<h3>Usage</h3>

<pre><code class="language-R">compose_and_enable_validators(iv, selector_list, validator_names = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>iv</code></td>
<td>
<p>(<code>shinyvalidate::InputValidator</code>) A <code>validator</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selector_list</code></td>
<td>
<p>(<code>reactive</code> named list of <code>reactives</code>).
Typically this is the output from <code>data_extract_multiple_srv</code>.
The <code>validators</code> in this list (specifically <code style="white-space: pre;">⁠selector_list()[[validator_names]]()iv⁠</code>)
will be added into <code>iv</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validator_names</code></td>
<td>
<p>(<code>character</code> or <code>NULL</code>). If <code>character</code> then only <code>validators</code>
in the elements of <code>selector_list()</code> whose name is in this list will be added. If <code>NULL</code>
all <code>validators</code> will be added</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>(<code>shinyvalidate::InputValidator</code>) enabled <code>iv</code> with appropriate <code>validators</code> added into it.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(shiny)
library(shinyvalidate)
library(shinyjs)
library(teal.widgets)

iris_extract &lt;- data_extract_spec(
  dataname = "iris",
  select = select_spec(
    label = "Select variable:",
    choices = variable_choices(iris, colnames(iris)),
    selected = "Sepal.Length",
    multiple = TRUE,
    fixed = FALSE
  )
)

data_list &lt;- list(iris = reactive(iris))

ui &lt;- fluidPage(
  useShinyjs(),
  standard_layout(
    output = verbatimTextOutput("out1"),
    encoding = tagList(
      data_extract_ui(
        id = "x_var",
        label = "Please select an X column",
        data_extract_spec = iris_extract
      ),
      data_extract_ui(
        id = "y_var",
        label = "Please select a Y column",
        data_extract_spec = iris_extract
      ),
      data_extract_ui(
        id = "col_var",
        label = "Please select a color column",
        data_extract_spec = iris_extract
      )
    )
  )
)

server &lt;- function(input, output, session) {
  exactly_2_validation &lt;- function() {
    ~ if (length(.) != 2) "Exactly 2 'Y' column variables must be chosen"
  }

  selector_list &lt;- data_extract_multiple_srv(
    list(x_var = iris_extract, y_var = iris_extract, col_var = iris_extract),
    datasets = data_list,
    select_validation_rule = list(
      x_var = sv_required("Please select an X column"),
      y_var = compose_rules(
        sv_required("Exactly 2 'Y' column variables must be chosen"),
        exactly_2_validation()
      )
    )
  )
  iv_r &lt;- reactive({
    iv &lt;- InputValidator$new()
    compose_and_enable_validators(
      iv,
      selector_list,
      # if validator_names = NULL then all validators are used
      # to turn on only "x_var" then set this argument to "x_var"
      validator_names = NULL
    )
  })

  output$out1 &lt;- renderPrint({
    if (iv_r()$is_valid()) {
      ans &lt;- lapply(selector_list(), function(x) {
        cat(format_data_extract(x()), "\n\n")
      })
    } else {
      "Check that you have made a valid selection"
    }
  })
}

if (interactive()) {
  shinyApp(ui, server)
}

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>tab_num</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Means table</h2>

<h3>Description</h3>

<p>Cross categorical variables with numeric variables, and get a table
of means and standard deviations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tab_num(
  data,
  row_var,
  col_vars,
  tab_vars,
  wt,
  color = c("auto", "diff", "diff_ci", "after_ci"),
  na = c("keep", "drop", "drop_fct", "drop_num"),
  ref = "tot",
  comp = c("tab", "all"),
  ci = NULL,
  conf_level = 0.95,
  totaltab = "line",
  totaltab_name = "Ensemble",
  tot = NULL,
  total_names = "Total",
  subtext = "",
  digits = 0,
  num = FALSE,
  df = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_var</code></td>
<td>
<p>The row variable, which will be printed with one level per line. If
numeric, it will be used as a factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_vars</code></td>
<td>
<p>The numeric variables, which will appear in columns :
means and standard deviation are calculated for each levels of <code>row_var</code> and <code>tab_vars</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tab_vars</code></td>
<td>
<p>&lt;tidy-select&gt; Tab variables :
a subtable is made for each combination of levels of the
selected variables. Leave empty to make a simple cross-table. All tab variables
are converted to factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wt</code></td>
<td>
<p>A weight variable, of class numeric. Leave empty for unweighted results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p><code>TRUE</code> print the color percentages and means based on cells differences from
totals or reference cell, as provided by <code>ref</code>. Default to <code>FALSE</code>, no colors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na</code></td>
<td>
<p>The policy to adopt for missing values in row and tab variables (factors),
as a single string.
</p>

<ul>
<li> <p><code>"keep"</code>: by default, <code>NA</code>'s of row and tab variables
are printed as an explicit <code>"NA"</code> level.
</p>
</li>
<li> <p><code>"drop"</code>: remove <code>NA</code>'s in row and tab variables.
</p>
</li>
</ul>
<p><code>NA</code>s in numeric variables are always removed when calculating means. For that reason
the <code>n</code> field of each resulting <code>fmt</code> column, used to calculate confidence
intervals, only takes into account the complete observations (without <code>NA</code>).
To drop all rows with <code>NA</code> in any numeric variable first, use <code>tab_prepare</code>
or <code>tab_many</code> with the <code>na_drop_all</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref</code></td>
<td>
<p>The reference cell to calculate differences and ratios
(used to print <code>colors</code>) :
</p>

<ul>
<li> <p><code>"auto"</code>: by default, cell difference from the corresponding total
(rows or cols depending on <code>pct = "row"</code> or <code>pct = "col"</code>) is
used for <code>diff</code> ; cell ratio from the first line (or col) is use for <code>OR</code>
(odds ratio/relative risks ratio).
</p>
</li>
<li> <p><code>"tot"</code>: totals are always used.
</p>
</li>
<li> <p><code>"first"</code>: calculate cell difference or ratio from the first cell
of the row or column (useful to color temporal developments).
</p>
</li>
<li> <p><code>n</code>: when <code>ref</code> is an integer, the nth row (or column) is used for comparison.
</p>
</li>
<li> <p><code>"regex"</code>: when <code>ref</code> is a string, it it used as a regular expression,
to match with the names of the rows (or columns). Be precise enough to match only one
column or row, otherwise you get a warning message.
</p>
</li>
<li> <p><code>"no"</code>: not use ref and not calculate diffs to gain calculation time.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comp</code></td>
<td>
<p>Comparison level. When <code>tab_vars</code> are present, should the
contributions to variance be calculated for each subtable/group (by default,
<code>comp = "tab"</code>) ? Should they be calculated for the whole table
(<code>comp = "all"</code>) ?
<code>comp</code> must be set once and for all the first time you use <code>tab_plain</code>,
<code>tab_num</code> or <code>tab_chi2</code> with rows, or <code>tab_ci</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>The type of confidence intervals to calculate, passed to <code>tab_ci</code>
(automatically added if needed for <code>color</code>).
</p>

<ul>
<li> <p><code>"cell"</code>: absolute confidence intervals of cells percentages.
</p>
</li>
<li> <p><code>"diff"</code>: confidence intervals of the difference between a cell and the
relative total cell (or relative first cell when <code>ref = "first"</code>).
</p>
</li>
<li> <p><code>"auto"</code>: <code>ci = "diff"</code> for means and row/col percentages,
<code>ci = "cell"</code> for frequencies ("all", "all_tabs").
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf_level</code></td>
<td>
<p>The confidence level for the confidence intervals,
as a single numeric between 0 and 1. Default to 0.95 (95%).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>totaltab</code></td>
<td>
<p>The total table,
if there are subtables/groups (i.e. when <code>tab_vars</code> is provided) :
</p>

<ul>
<li> <p><code>"line"</code>: by default, add a general total line (necessary for
calculations with <code>comp = "all"</code>)
</p>
</li>
<li> <p><code>"table"</code>: add a complete total table
(i.e. <code>row_var</code> by <code>col_vars</code> without <code>tab_vars</code>).
</p>
</li>
<li> <p><code>"no"</code>: not to draw any total table.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>totaltab_name</code></td>
<td>
<p>The name of the total table, as a single string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tot</code></td>
<td>
<p>The totals :
</p>

<ul>
<li> <p><code>c("col", "row")</code> or <code>"both"</code> : by default, both total rows and total
columns.
</p>
</li>
<li> <p><code>"row"</code>: only total rows.
</p>
</li>
<li> <p><code>"col"</code>: only total column.
</p>
</li>
<li> <p><code>"no"</code>: remove all totals (after calculations if needed).
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_names</code></td>
<td>
<p>The names of the totals, as a character vector of length one or two.
Use syntax of type <code>c("Total row", "Total column")</code> to set different names for
rows and cols.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subtext</code></td>
<td>
<p>A character vector to print rows of legend under the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>The number of digits to print, as a single integer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num</code></td>
<td>
<p>Set to <code>TRUE</code> to obtain a table with normal numeric vectors (not <code>fmt</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>Set to <code>TRUE</code> to obtain a plain data.frame (not a <code>tibble</code>),
with normal numeric vectors (not <code>fmt</code>). Useful, for example, to pass the table to
correspondence analysis with <span class="pkg">FactoMineR</span>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>tibble</code> of class <code>tabxplor_tab</code>. If <code>...</code> (<code>tab_vars</code>)
are provided, a <code>tab</code> of class <code>tabxplor_grouped_tab</code>.
All non-text columns are <code>fmt</code> vectors of class <code>tabxplor_fmt</code>,
storing all the data necessary to print formats and colors. Columns with <code>row_var</code>
and <code>tab_vars</code> are of class <code>factor</code> : every added <code>factor</code> will be
considered as a <code>tab_vars</code> and used for grouping. To add text columns without
using them in calculations, be sure they are of class <code>character</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data &lt;- dplyr::storms %&gt;% tab_prepare(category, wind, na_drop_all = wind)
tab_num(data, category, wind, tot = "row", color = "after_ci")

</code></pre>


</div>
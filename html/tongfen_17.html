<div class="container">

<table style="width: 100%;"><tr>
<td>proportional_reaggregate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Dasymetric downsampling</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing"><img src="../help/figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
</p>
<p>Proportionally re-aggregate hierarchical data to lower-level w.r.t. values of the *base* variable
Also handles cases where lower level data may be available but blinded at times by filling in data from higher level
</p>
<p>Data at lower aggregation levels may not add up to the more accurate aggregate counts.
This function distributes the aggregate level counts proportionally (by population) to the containing lower
level geographic regions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">proportional_reaggregate(
  data,
  parent_data,
  geo_match,
  categories,
  base = "Population"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The base geographic data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parent_data</code></td>
<td>
<p>Higher level geographic data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geo_match</code></td>
<td>
<p>A named string informing on what column names to match data and parent_data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categories</code></td>
<td>
<p>Vector of column names to re-aggregate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>Column name to use for proportional weighting when re-aggregating</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>dataframe with downsampled variables from parent_data
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Proportionally reaggregate visible minority data from dissemination area 2016
# census data to dissemination block geography, proportionally based on dissemination
# block population
## Not run: 
regions &lt;- list(CSD="5915022")
variables &lt;- cancensus::child_census_vectors("v_CA16_3954")

da_data &lt;- cancensus::get_census("CA16",regions=regions,
                                 vectors=setNames(variables$vector,variables$label),
                                 level="DA")
geo_data &lt;- cancensus::get_census("CA16",regions=regions,geo_format="sf",level="DB")

db_data &lt;- geo_data %&gt;% proportional_reaggregate(da_data,c("DA_UID"="GeoUID"),variables$label)


## End(Not run)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>timeDate-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Class "timeDate"</h2>

<h3>Description</h3>

 
<p>Class <code>"timeDate"</code> represents date and time objects.
</p>


<h3>Details</h3>

<p>For the management of chronological objects under R three concepts
are available: The first is the implementation of date and time in R's
<code>chron</code> package neglecting locals, time zones and day light saving
times. This approach is in most cases appropriate for economic time 
series. The second approach, available in R's base package implements 
the POSIX standard to date and time objects, named <code>"POSIXt"</code>. 
</p>
<p>Unfortunately, the representation of these objects is in some cases
operating system dependent and especially under MS Windows several 
problems appeared over the time in the management of time zones and 
day light saving times. Rmetrics overcomes these difficulties with 
POSIX objects and introduce a new S4 class of <code>"timeDate"</code> objects 
which allow for powerful methods to represent dates and times in 
different financial centers around the world. 
</p>
<p>Many of the basic functionalities of these objects are in common 
with S-Plus' <code>"timeDate"</code> objects and thus many of your privately 
written functions for SPlus/FinMetrics may also be used within the
R/Rmetrics environment.
</p>
<p>A major difference is the time zone concept which is replaced by the
"Financial Center" concept. The <code>FinCenter</code> character variable
specifies where you are living and at which financial center you are
working. With the variable <code>myFinCenter</code> you can overwrite the
default setting with your personal settings. With the specification 
of the <code>FinCenter</code> your system knows what rules rules for day 
light saving times should be applied, what is your holiday calendar, 
what is your currency, what are your interest rate conventions. 
(Not all specifications are already implemented.) Many other
aspects can be easily accessed when a financial center is named. So we
can distinguish between Frankfurt and Zurich, which both belong to the
same time zone, but differed in DST changes in the eighties and have
different holiday calendars. Futhermore, since the underlying time
refers to "GMT" and DST rules and all other information is available
in local (ASCII) databases, we are sure, that R/Rmetrics delivers with 
such a date/time concept on every computer independent of the operating 
systemin use, identical results.
</p>
<p>Another important feature of the <code>"timeDate"</code> concept used here is
the fact that we don't rely on American or European ways to write dates.
We use consequently the ISO-8601 standard for date and time notations. <br></p>
<p><b>Generation of <code>"timeDate"</code> Objects</b>
</p>
<p>We have defined a <code>"timeDate"</code> class which is in many aspects similar
to the S-Plus class with the same name, but has also some important
advantageous differeneces. The S4 class has four Slots, the <code>Data</code>
slot which holds date and time as 'POSIXct' objects in the standard
ISO-8601 format, the <code>Dim</code> slot which gives the dimension
of the data object (i.e. its length), the <code>format</code> specification 
slot and the <code>FinCenter</code> slot which holds the name of the financial 
center. By default this is the value 
</p>
<p>Three functions allow to cgenerate date/time objects: <code>"timeDate"</code>
from character vectors, <code>timeCalendar</code> from date and time atoms,
and <code>timeSequence</code> from a "from/to" or from a "from/length" sequence
specification. Note, time zone transformations are easily handled by
by the <code>"timeDate"</code> functions which can also take <code>"timeDate"</code>
and <code>POSIXt</code> objects as inputs, while transforming them between
financial centers and/or time zones specified by the arguments <code>zone</code>
and <code>FinCenter</code>. Finally the function <code>Sys.timeDate</code> returns
current system time in form of a <code>"timeDate"</code> object.<br></p>
<p><b>Tests and Representation of timeDate Objects:</b>
</p>
<p>Rmetrics has implemented several methods to represent
<code>"timeDate"</code> objects. For example, the 
print method returns the date/time in square <code>"[]"</code> brackets 
to distinguish the output from other date and time objects. 
On top of the date and
time output the name of the <code>FinCenter</code> is printed. The summary
method returns a printed report with information about the
<code>"timeDate"</code> object. Finally, the format methods allows to
transform objects into a ISO conform formatted character strings. <br></p>
<p><b>Mathematical Operations:</b>
</p>
<p>Rmetrics supports methods
to perform many mathematical operations. Included are methods 
to extract or 
to replace subsets from <code>"timeDate"</code> objects, 
to perform arithmetic <code>"+"</code> and <code>"-"</code> operations, 
to group <code>Ops</code> generic functions,
to return suitably lagged and iterated differences <code>diff</code>, 
to return differences <code>difftimeDate</code> of two <code>"timeDate"</code> 
objects, to concatenate objects, to replicate objects, 
to <code>round</code> objects, 
to truncate objects using <code>trunc</code>, 
to extract the first or last entry of a vector, 
to <code>sort</code> the objects of the elements of a date/time vector, and 
to revert <code>"timeDate"</code> vector objects, among other functions. <br></p>
<p><b>Transformation of Objects:</b>
</p>
<p>Rmetrics has also functions to transform dat/time objects between 
different representations. Included are methods to transform 
<code>"timeDate"</code> objects to character strings, to data frames, 
to POSIXct or POSIXlt objects, to <code>julian</code>
counts. One can extract date/time <code>atoms</code> from calendar 
dates, and the <code>months</code> atoms from a <code>"timeDate"</code> 
object.
</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the functions
<code>timeDate</code>, <code>timeSequence</code>,
<code>timeCalendar</code> and <code>as.timeDate</code>, among
others. There is also a <code>"timeDate"</code> method for
<code>seq</code>.
</p>


<h3>Slots</h3>


<dl>
<dt>
<code>Data</code>:</dt>
<dd>
<p>Object of class <code>"POSIXct"</code>: 
a vector of POSIXct dates and times always related to
"GMT".
</p>
</dd> 
<dt>
<code>format</code>:</dt>
<dd>
<p>Object of class <code>"character"</code>: 
a character string denoting the format specification of 
the input data character vector.
</p>
</dd>
<dt>
<code>FinCenter</code>:</dt>
<dd>
<p>Object of class <code>"character"</code>: 
a character string with the location of the
financial center named as "continent/city", or just "city".
</p>
</dd>
</dl>
<h3>Methods</h3>


<dl>
<dt>timeDate</dt>
<dd>
<p><code>signature(charvec = "timeDate")</code>:
create objects from class <code>"timeDate"</code>, see <code>timeDate</code>;
</p>
</dd>
<dt>show</dt>
<dd>
<p><code>signature(object = "timeDate")</code>: 
prints an object of class <code>"timeDate"</code>;
</p>
</dd>  
<dt>plot</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:  </p>
</dd>
<dt>points</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:  </p>
</dd>
<dt>lines</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:  </p>
</dd>
<dt>abline</dt>
<dd>
<p><code>signature(a = "ANY", b = "ANY", h = "ANY", v ="timeDate")</code>: 
see <code>plot-methods</code>.
</p>
</dd>
<dt>[</dt>
<dd>
<p><code>signature(x = "timeDate", i = "ANY", j = "missing")</code>:  </p>
</dd>
<dt>[</dt>
<dd>
<p><code>signature(x = "timeDate", i = "character", j = "missing")</code>:  </p>
</dd>
<dt>[</dt>
<dd>
<p><code>signature(x = "timeDate", i = "logical", j = "missing")</code>:  </p>
</dd>
<dt>[</dt>
<dd>
<p><code>signature(x = "timeDate", i = "missing", j = "missing")</code>:  </p>
</dd>
<dt>[</dt>
<dd>
<p><code>signature(x = "timeDate", i = "numeric", j =	"missing")</code>:  
take parts of a <code>"timeDate"</code> object, see <code>subset</code>.
</p>
</dd>
<dt>finCenter</dt>
<dd>
<p><code>signature(x = "timeDate")</code>: </p>
</dd>
<dt>finCenter&lt;-</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:
see <code>finCenter</code>.
</p>
</dd>
<dt>atoms</dt>
<dd>
<p><code>signature(x = "timeDate")</code>: </p>
</dd>
<dt>months</dt>
<dd>
<p><code>signature(x = "timeDate")</code>: </p>
</dd>
<dt>julian</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:
see <code>julian</code>.
</p>
</dd>
<dt>align</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:
see <code>align</code>.
</p>
</dd>
<dt>isDaily</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:  </p>
</dd>
<dt>isMonthly</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:  </p>
</dd>
<dt>isQuarterly</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:  </p>
</dd>
<dt>isRegular</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:
see see <code>isRegular</code>.
</p>
</dd>
<dt>frequency</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:
see <code>frequency</code>.
</p>
</dd>
<dt>is.na</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:
see <code>is.na-methods</code>.
</p>
</dd>
<dt>sample</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:
see <code>sample</code>.
</p>
</dd>
<dt>Ops</dt>
<dd>
<p><code>signature(e1 = "timeDate", e2 = "timeDate")</code>:  </p>
</dd>
<dt>+</dt>
<dd>
<p><code>signature(e1 = "numeric", e2 = "timeDate")</code>:  </p>
</dd>
<dt>+</dt>
<dd>
<p><code>signature(e1 = "timeDate", e2 = "numeric")</code>:  </p>
</dd>
<dt>+</dt>
<dd>
<p><code>signature(e1 = "timeDate", e2 = "timeDate")</code>:  </p>
</dd>
<dt>-</dt>
<dd>
<p><code>signature(e1 = "numeric", e2 = "timeDate")</code>:  </p>
</dd>
<dt>-</dt>
<dd>
<p><code>signature(e1 = "timeDate", e2 = "numeric")</code>:  </p>
</dd>
<dt>-</dt>
<dd>
<p><code>signature(e1 = "timeDate", e2 = "timeDate")</code>:
see <code>timeDateMathOps</code>.
</p>
</dd>
<dt>coerce</dt>
<dd>
<p><code>signature(from = "ANY", to = "timeDate")</code>:  </p>
</dd>
<dt>coerce</dt>
<dd>
<p><code>signature(from = "Date", to = "timeDate")</code>:  </p>
</dd>
<dt>coerce</dt>
<dd>
<p><code>signature(from = "POSIXt", to = "timeDate")</code>:  </p>
</dd>
<dt>coerce</dt>
<dd>
<p><code>signature(from = "timeDate", to = "character")</code>:  </p>
</dd>
<dt>coerce</dt>
<dd>
<p><code>signature(from = "timeDate", to = "data.frame")</code>:  </p>
</dd>
<dt>coerce</dt>
<dd>
<p><code>signature(from = "timeDate", to = "Date")</code>:  </p>
</dd>
<dt>coerce</dt>
<dd>
<p><code>signature(from = "timeDate", to = "list")</code>:  </p>
</dd>
<dt>coerce</dt>
<dd>
<p><code>signature(from = "timeDate", to = "numeric")</code>:  </p>
</dd>
<dt>coerce</dt>
<dd>
<p><code>signature(from = "timeDate", to = "POSIXct")</code>:  </p>
</dd>
<dt>coerce</dt>
<dd>
<p><code>signature(from = "timeDate", to = "POSIXlt")</code>:
convert from/to <code>"timeDate"</code> objects. 
These are methods for <code>as</code>, to be used with the syntax
<code>as(from, to)</code>, where <code>from</code> is the object to be
converted and <code>to</code> is the desired target class. Most
conversions can also be done with specialised functions such as
<code>as.character</code> and <code>as.timeDate</code>, see
<code>as.timeDate</code>.
</p>
</dd>
<dt>names</dt>
<dd>
<p><code>signature(x = "timeDate")</code>: </p>
</dd>
<dt>names&lt;-</dt>
<dd>
<p><code>signature(x = "timeDate")</code>:
see <code>names-methods</code>.
</p>
</dd>
<dt>getDataPart</dt>
<dd>
<p><code>signature(object = "timeDate")</code>: ... </p>
</dd>
<dt>initialize</dt>
<dd>
<p><code>signature(.Object = "timeDate")</code>: ... </p>
</dd>
</dl>
<h3>Note</h3>

<p>Originally, these functions were written for Rmetrics users using R and
Rmetrics under Microsoft's Windows XP operating system where time zones,
daylight saving times and holiday calendars are not or insufficiently
supported. 
</p>
<p>The usage of the Ical Library and the introduction of the FinCenter
concept was originally develloped for R Version 1.5. The
<code>"timeDate"</code> and <code>timeSeries</code> objects were added for
R Version 1.8.1. Minor changes were made to adapt the functions
for R Version 1.9.1. As a consequence, newer concepts like the
<code>Date</code> objects were not yet considered and included in this
collection of date and time concepts. With R Version 2.3.0 a major
update has been made adding many new generic functions and renaming
a few already existing functions, please be aware of this.
</p>
<p>Note, the date/time conversion from an arbitrary time zone to GMT cannot
be unique, since date/time objects appear twice during the hour
when DST changes and the isdt flag was not recorded. A bookkeeping 
which takes care if DST is effective or not is not yet included. 
However, in most applications this is not necessary since the markets 
are closed on weekends, especially at times when DST usually changes. 
It is planned for the future to implement the DST supporting this
facility.
</p>
<p>The ISO-8601 midnight standard has been implemented. Note, that for
example "2005-01-01 24:00:00" is accepted as a valid date/time string.
</p>
<p>Also available is an automated format recognition, so the user does
not have to specify the format string for the most common date/time
formats.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Examples for Objects of class 'timeDate'

## timeDate

## Sys.timeDate()           # direct
## timeDate(Sys.time())     # transformed from "POSIX(c)t"

## # Local Time in Zurich
## timeDate(Sys.time(), FinCenter = "Zurich")  

# Character Vector Strings:
dts = c("1989-09-28", "2001-01-15", "2004-08-30", "1990-02-09")
dts
tms = c(  "23:12:55",   "10:34:02",   "08:30:00",   "11:18:23")
tms

t1 &lt;- timeDate(dts, format = "%Y-%m-%d", FinCenter = "GMT" )
t1

stopifnot(identical(t1, timeDate(dts, FinC = "GMT"))) # auto-format

timeDate(dts, format = "%Y-%m-%d", FinCenter = "Europe/Zurich")

timeDate(paste(dts, tms), format = "%Y-%m-%d %H:%M:%S",
  zone = "GMT", FinCenter = "GMT")

timeDate(paste(dts, tms), 
  zone = "Europe/Zurich", FinCenter = "Europe/Zurich")

timeDate(paste(dts, tms), format = "%Y-%m-%d %H:%M:%S",
  zone = "GMT", FinCenter = "Europe/Zurich")

## Non Standard Format:
timeDate(paste(20:31, "03.2005", sep="."), format = "%d.%m.%Y")

# Note, ISO and American Formats are Auto-Detected:
timeDate("2004-12-31", FinCenter = "GMT")
timeDate("12/11/2004", FinCenter = "GMT")
timeDate("1/31/2004") # auto-detect American format

## ... from POSIX?t, and Using NAs:
## lsec &lt;- as.POSIXlt(.leap.seconds) 
## lsec[c(2,4:6)] &lt;- NA
## timeDate(lsec)

## dtms &lt;- paste(dts,tms)
## dtms[2:3] &lt;- NA
## timeDate(dtms, FinCenter = "Europe/Zurich") # but in GMT





## timeCalendar
## getRmetricsOptions("currentYear")
## timeCalendar()  # 12 months of current year

timeCalendar(2022) # 12 months of 2022
timeCalendar(y = c(1989, 2001, 2004, 1990), 
    m = c(9, 1, 8, 2), d = c(28, 15, 30, 9), FinCenter = "GMT")
timeCalendar(y = c(1989, 2001, 2004, 1990),
    m = c(9, 1, 8, 2), d = c(28, 15, 30, 9), FinCenter = "Europe/Zurich")

## timeCalendar(h = c(9, 14), min = c(15, 23))
timeCalendar(2022, h = c(9, 14), min = c(15, 23))

## timeSequence
timeSequence(from = "2004-03-12", to = "2004-04-11",
  format = "%Y-%m-%d", FinCenter = "GMT")
timeSequence(from = "2004-03-12", to = "2004-04-11",
  format = "%Y-%m-%d", FinCenter = "Europe/Zurich")

## print, summary, format
tC = timeCalendar(2022)
tC
print(tC)
summary(tC)
format(tC)
</code></pre>


</div>
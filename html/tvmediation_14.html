<div class="container">

<table style="width: 100%;"><tr>
<td>tvma_3trt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Time Varying Mediation Function: Continuous Outcome and Three Treatment Groups</h2>

<h3>Description</h3>

<p>Function to estimate the time-varying mediation effect and bootstrap standard 
errors for three treatment groups and a continuous outcome.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tvma_3trt(
  T1,
  T2,
  t.seq,
  mediator,
  outcome,
  t.est = t.seq,
  plot = FALSE,
  CI = "boot",
  replicates = 1000,
  grpname = "T",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>T1</code></td>
<td>
<p>a vector indicating assignment to treatment 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>T2</code></td>
<td>
<p>a vector indicating assignment to treatment 2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t.seq</code></td>
<td>
<p>a vector of time points for each observation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediator</code></td>
<td>
<p>matrix of mediator values in wide format</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>matrix of outcome values in wide format</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t.est</code></td>
<td>
<p>a vector of time points at which to make the estimation. 
Default = t.seq. (OPTIONAL ARGUMENT)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>TRUE or FALSE for plotting mediation effect. 
Default = "FALSE". (OPTIONAL ARGUMENT)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>"none" or "boot" method of deriving confidence intervals. 
Default = "boot". (OPTIONAL ARGUMENT)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replicates</code></td>
<td>
<p>number of replicates for bootstrapping confidence intervals. 
Default = 1000. (OPTIONAL ARGUMENT)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grpname</code></td>
<td>
<p>name of the treatment arms (exposure groups) to be displayed in
the results. Default = "T". (OPTIONAL ARGUMENT)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>TRUE or FALSE for printing results to screen. 
Default = "FALSE". (OPTIONAL ARGUMENT)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>hat.alpha1</code></td>
<td>
<p>estimated Treatment 1 effect on mediator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.alpha1</code></td>
<td>
<p>CI lower limit for estimated coefficient hat.alpha1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.alpha1</code></td>
<td>
<p>CI upper limit for estimated coefficient hat.alpha1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hat.alpha2</code></td>
<td>
<p>estimated Treatment 2 effect on mediator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.alpha2</code></td>
<td>
<p>CI lower limit for estimated coefficient hat.alpha2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.alpha2</code></td>
<td>
<p>CI upper limit for estimated coefficient hat.alpha2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hat.gamma1</code></td>
<td>
<p>estimated Treatment 1 direct effect on outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.gamma1</code></td>
<td>
<p>CI lower limit for estimated coefficient hat.gamma1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.gamma1</code></td>
<td>
<p>CI upper limit for estimated coefficient hat.gamma1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hat.gamma2</code></td>
<td>
<p>estimated Treatment 2 direct effect on outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.gamma2</code></td>
<td>
<p>CI lower limit for estimated coefficient hat.gamma2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.gamma2</code></td>
<td>
<p>CI upper limit for estimated coefficient hat.gamma2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hat.tau1</code></td>
<td>
<p>estimated Treatment 1 total effect on outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.tau1</code></td>
<td>
<p>CI lower limit for estimated coefficient hat.tau1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.tau1</code></td>
<td>
<p>CI upper limit for estimated coefficient hat.tau1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hat.tau2</code></td>
<td>
<p>estimated Treatment 2 total effect on outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.tau2</code></td>
<td>
<p>CI lower limit for estimated coefficient hat.tau2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.tau2</code></td>
<td>
<p>CI upper limit for estimated coefficient hat.tau2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hat.beta</code></td>
<td>
<p>estimated mediator effect on outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.beta</code></td>
<td>
<p>CI lower limit for estimated coefficient hat.beta</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.beta</code></td>
<td>
<p>CI upper limit for estimated coefficient hat.beta</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hat.mediation1</code></td>
<td>
<p>time varying mediation effect for Treatment 1 on outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SE_MedEff1</code></td>
<td>
<p>estimated standard errors of hat.mediation1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.T1</code></td>
<td>
<p>CI upper limit for hat.mediation1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.T1</code></td>
<td>
<p>CI lower limit for hat.mediation1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hat.mediation2</code></td>
<td>
<p>time varying mediation effect for Treatment 2 on outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SE_MedEff2</code></td>
<td>
<p>estimated standard errors of hat.mediation2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.T2</code></td>
<td>
<p>CI upper limit for hat.mediation2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.T2</code></td>
<td>
<p>CI lower limit for hat.mediation2</p>
</td>
</tr>
</table>
<h3>Plot Returns</h3>


<ol>
<li>
<p><code>plot1_a1 </code>plot for hat.alpha1 with CIs over t.est
</p>
</li>
<li>
<p><code>plot2_a2 </code>plot for hat.alpha2 with CIs over t.est
</p>
</li>
<li>
<p><code>plot3_g1 </code>plot for hat.gamma1 with CIs over t.est
</p>
</li>
<li>
<p><code>plot4_g2 </code>plot for hat.gamma2 with CIs over t.est
</p>
</li>
<li>
<p><code>plot5_t1 </code>plot for hat.tau1 with CIs over t.est
</p>
</li>
<li>
<p><code>plot6_t2 </code>plot for hat.tau2 with CIs over t.est
</p>
</li>
<li>
<p><code>plot7_b </code>plot for hat.beta with CIs over t.est
</p>
</li>
<li>
<p><code>MedEff_T1 </code>plot for hat.mediation1 over t.est
</p>
</li>
<li>
<p><code>MedEff_T2 </code>plot for hat.mediation2 over t.est
</p>
</li>
<li>
<p><code>MedEff_CI_T1 </code>plot for hat.mediation1 with CIs over t.est
</p>
</li>
<li>
<p><code>MedEff_CI_T2 </code>plot for hat.mediation2 with CIs over t.est
</p>
</li>
</ol>
<h3>References</h3>


<ol>
<li>
<p>Fan, J. and Gijbels, I. Local polynomial modelling and its 
applications: Monographs on statistics and applied probability 66. 
CRC Press; 1996.
</p>
</li>
<li>
<p>Fan J, Zhang W. Statistical Estimation in Varying Coefficient Models. 
The Annals of Statistics. 1999;27(5):1491-1518.
</p>
</li>
<li>
<p>Fan J, Zhang JT. Two-step estimation of functional linear models with 
applications to longitudinal data. Journal of the Royal Statistical Society: 
Series B (Statistical Methodology). 2000;62(2):303-322.
</p>
</li>
<li>
<p>Cai X, Coffman DL, Piper ME, Li R. Estimation and inference for the mediation 
effect in a time-varying mediation model. BMC Med Res Methodol. 
2022;22(1):1-12.
</p>
</li>
<li>
<p>Baker TB, Piper ME, Stein JH, et al. Effects of Nicotine Patch vs Varenicline 
vs Combination Nicotine Replacement Therapy on Smoking Cessation at 26 Weeks: 
A Randomized Clinical Trial. JAMA. 2016;315(4):371.
</p>
</li>
<li>
<p>B. Efron, R. Tibshirani. Bootstrap Methods for Standard Errors, Confidence 
Intervals, and Other Measures of Statistical Accuracy. Statistical Science. 
1986;1(1):54-75.
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: data(smoker)

# GENERATE WIDE FORMATTED MEDIATORS
mediator &lt;- LongToWide(smoker$SubjectID,
                        smoker$timeseq, 
                        smoker$NegMoodLst15min)

# GENERATE WIDE FORMATTED OUTCOMES
outcome &lt;- LongToWide(smoker$SubjectID,
                      smoker$timeseq,
                      smoker$cessFatig)

# GENERATE TWO BINARY TREATMENT VARIABLES
NRT1 &lt;- as.numeric(unique(smoker[,c("SubjectID","varenicline")])[,2])-1
NRT2 &lt;- as.numeric(unique(smoker[,c("SubjectID","comboNRT")])[,2])-1

# GENERATE A VECTOR OF UNIQUE TIME POINTS
t.seq &lt;- sort(unique(smoker$timeseq))

# COMPUTE TIME VARYING MEDIATION ANALYSIS USING BOOTSTRAPPED CONFIDENCE INTERVALS
results &lt;- tvma_3trt(NRT1, NRT2, t.seq, mediator, outcome)

# COMPUTE TIME VARYING MEDIATION ANALYSIS FOR SPECIFIED POINTS IN TIME USING 250 REPLICATES
results &lt;- tvma_3trt(NRT1, NRT2, t.seq, mediator, outcome,
                     t.est = c(0.2, 0.4, 0.6, 0.8),
                     replicates = 250)
## End(Not run)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>TFVInitCons</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a TFV initial conditions file from point observations</h2>

<h3>Description</h3>

<p>Generate a TFV initial conditions file from point observations
</p>


<h3>Usage</h3>

<pre><code class="language-R">TFVInitCons(
  file,
  fgdb,
  initialvaluesfile,
  outputfile,
  cellsize = 50,
  ncell = 50000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>.2dm mesh used to generate the cell IDs and centres</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fgdb</code></td>
<td>
<p>Shape file (.shp and associated .prj) for zones to be preserved</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initialvaluesfile</code></td>
<td>
<p>csv file with observed data to interpolate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputfile</code></td>
<td>
<p>file to write the initial conditions to</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cellsize</code></td>
<td>
<p>size of cells to interpolate the observations onto</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncell</code></td>
<td>
<p>number of cells to interpolate the observations onto</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The shapefile should be a polygon shape file, with different zones to interpolate within. This can be useful to ensure
interpolations are physically sensible, for example where there is a barrier between fresh and saline water, or a
storage above a lower river. Projections are not handled by this function, so the shapefile should be in the same projection as the mesh.
</p>
<p>The initialvaluesfile should have at least 6 columns of information:
</p>

<ul>
<li>
<p>Column 1 as point index
</p>
</li>
<li>
<p>Column 2 and 3, columns named "X" and "Y",
with the coordinates of the point observation, in the same projection as the mesh.
</p>
</li>
<li>
<p>Columns 4 and 5 are reserved for point information, e.g. a station number and station name.
These are not used, but all for context to be documented, and helpful and if the same csv file is also used for specifying locations in a points output block in the model .fvc file.
</p>
</li>
<li>
<p>Columns 6 and beyond should be values and will be interpolated. Each column will be interpolated for each zone,
allowing for multiple initial conditions. The column name should match the model scalar (e.g. H, SAL, TEMP, trace_1)
</p>
</li>
</ul>
<p>cellsize and ncell are used to specify the resolution of the interpolation. ncell is in units of the mesh coordinates, e.g. m or degrees
</p>
<p>interpolation is undertaken using inverse distance weighting from the gstat package, with the default weighting power of 2.
</p>


<h3>Value</h3>

<p>Nothing is returned to the environment, with the initial conditions generated written to outputfile. Summary metrics are printed to screen to allows for some quick QA
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
file="001_RM_Wetlands_LL_Coorong_MZ.2dm"
fgdb&lt;-"Zones/Zones.shp"
initialvaluesfile&lt;-"CLLMMInitialValues2019.csv"
outputfile&lt;-pate0(tempdir(),"/Initcons2021.csv")
TFVInitCons(file,fgdb,initialvaluesfile,outputfile)

## End(Not run)

</code></pre>


</div>
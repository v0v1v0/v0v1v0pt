<div class="container">

<table style="width: 100%;"><tr>
<td>td.kw.cr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate conditional probability of being a case at time tau</h2>

<h3>Description</h3>

<p>This is key function to estimate the weight, the conditional probability of being a case at time tau
given the observed time to event, event status, and prognostic risk score, as described in Wu and Li, 2018.
</p>


<h3>Usage</h3>

<pre><code class="language-R">td.kw.cr(
  X,
  Y,
  delta,
  event.code,
  tau,
  span = 0.1,
  h = NULL,
  type = "uniform",
  epsilon = 0.01
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>a numeric vector of risk score for each subject. Higher value of <code>X</code> indicates higher risk of the event.
It can be biomarker, a function of multiple biomarker, or predicted cumulative incidence function by other methods.
Same length with <code>Y</code> and <code>delta</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>
<p>a numeric vector of time to event. Same length with <code>X</code> and <code>delta</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>
<p>a vector of numeric indicator of event type. The primary event you want to study should be coded as 1,
the competing event should be coded as 2, and censoring should be coded as 0. Same length with <code>X</code> and <code>Y</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event.code</code></td>
<td>
<p>numeric indicator of event (1), or competing event (2), it specifies you are going to calculate the
conditional probability for which event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau</code></td>
<td>
<p>a scalar, the prediction horizon at which the prediction is evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>span</code></td>
<td>
<p>a numeric value, the proportion of neighbour observations used in nearest neighbor method, default is 0.1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>
<p>a numeric value, the bandwidth of kernel weights, defualt is <code>NULL</code>. If not specified, the function will use the value of
<code>span</code> to calculate kernel weights. In case both <code>span</code> and <code>h</code> are specified, the function will use <code>h</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>a character value, indicating the type of kernel function used to calculate kernel weights. Default is "<code>uniform</code>" kernel.
Other options are "<code>Epanechnikov</code>" and "<code>normal</code>".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsilon</code></td>
<td>
<p>the precision parameter for weight calculation using neighborhood approximation. If not specified, default will be
calculating weights for all right censored points individually.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function read in the risk score value <code>X</code>, the time-to-event data <code>Y</code> and censoring indicator <code>delta</code>
to estimate the weight, the conditional probability of being a case at time tau when there is competing event.
The weight estimation serves for the further prediction accuracy estimation, including AUC, Brier score and so on.
</p>


<h3>Value</h3>

<p>Returns the estimated conditional probability of being a case at time tau for the specified event code.
</p>


<h3>See Also</h3>

<p><code>survfit</code>
</p>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>tree_mesh</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a Tree Mesh</h2>

<h3>Description</h3>

<p>This function generates a tree model and transforms it into a <code>ray_mesh</code> object or an OBJ file.
The tree model consists of two main parts: the crown (leafy part) and the trunk. Both parts can be customized according
to a range of preset types, as well as full control over the tree's colors and dimensions.
The tree model can be positioned, scaled, and rotated in 3D space.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tree_mesh(
  crown_type = "oval",
  position = c(0, 0, 0),
  angle = 0,
  solid = FALSE,
  resolution = "medium",
  filename = NULL,
  tree_height = 1,
  trunk_height_ratio = NULL,
  crown_width_ratio = 1,
  crown_height = NULL,
  crown_width = NULL,
  trunk_height = NULL,
  trunk_width = NULL,
  crown_color = NA,
  trunk_color = "#8C6F5B",
  diffuse_intensity = 1,
  ambient_intensity = 0.2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>crown_type</code></td>
<td>
<p>Default <code>"oval"</code>. Crown type (the leafy part of the tree). Full list of options:</p>

<table>
<tr>
<td style="text-align: center;">
   <strong>3D/Flat</strong> </td>
<td style="text-align: center;"> <strong>Name</strong> </td>
<td style="text-align: center;"> <strong>Crown Color</strong> </td>
<td style="text-align: center;"> <strong>Trunk Ratio</strong> </td>
</tr>
<tr>
<td style="text-align: center;">
   Both </td>
<td style="text-align: center;"> <code>"columnar"</code> </td>
<td style="text-align: center;"> <code>"#A2C683"</code> <img src="../help/figures/columnarsquare.png" alt="columnarsquare.png">
</td>
<td style="text-align: center;"> 1/3 </td>
</tr>
<tr>
<td style="text-align: center;">
   Both </td>
<td style="text-align: center;"> <code>"pyramidal1"</code> </td>
<td style="text-align: center;"> <code>"#066038"</code> <img src="../help/figures/pyramidal1square.png" alt="pyramidal1square.png">
</td>
<td style="text-align: center;"> 1/6 </td>
</tr>
<tr>
<td style="text-align: center;">
   Both </td>
<td style="text-align: center;"> <code>"pyramidal2"</code> </td>
<td style="text-align: center;"> <code>"#447765"</code> <img src="../help/figures/pyramidal2square.png" alt="pyramidal2square.png">
</td>
<td style="text-align: center;"> 1/6 </td>
</tr>
<tr>
<td style="text-align: center;">
   Both </td>
<td style="text-align: center;"> <code>"weeping"</code> </td>
<td style="text-align: center;"> <code>"#CBD362"</code> <img src="../help/figures/weepingsquare.png" alt="weepingsquare.png">
</td>
<td style="text-align: center;"> 1/3 </td>
</tr>
<tr>
<td style="text-align: center;">
   Both </td>
<td style="text-align: center;"> <code>"spreading1"</code> </td>
<td style="text-align: center;"> <code>"#CCB471"</code> <img src="../help/figures/spreading1square.png" alt="spreading1square.png">
</td>
<td style="text-align: center;"> 1/3 </td>
</tr>
<tr>
<td style="text-align: center;">
   Both </td>
<td style="text-align: center;"> <code>"oval"</code> </td>
<td style="text-align: center;"> <code>"#7CB262"</code> <img src="../help/figures/ovalsquare.png" alt="ovalsquare.png">
</td>
<td style="text-align: center;"> 1/3 </td>
</tr>
<tr>
<td style="text-align: center;">
   Flat-only </td>
<td style="text-align: center;"> <code>"palm"</code> </td>
<td style="text-align: center;"> <code>"#DB8952"</code> <img src="../help/figures/palmsquare.png" alt="palmsquare.png">
</td>
<td style="text-align: center;"> 1/2 </td>
</tr>
<tr>
<td style="text-align: center;">
   Flat-only </td>
<td style="text-align: center;"> <code>"rounded"</code> </td>
<td style="text-align: center;"> <code>"#E0A854"</code> <img src="../help/figures/roundedsquare.png" alt="roundedsquare.png">
</td>
<td style="text-align: center;"> 1/3 </td>
</tr>
<tr>
<td style="text-align: center;">
   Flat-only </td>
<td style="text-align: center;"> <code>"spreading2"</code> </td>
<td style="text-align: center;"> <code>"#75C165"</code> <img src="../help/figures/spreading2square.png" alt="spreading2square.png">
</td>
<td style="text-align: center;"> 1/3 </td>
</tr>
<tr>
<td style="text-align: center;">
   Flat-only </td>
<td style="text-align: center;"> <code>"vase"</code> </td>
<td style="text-align: center;"> <code>"#AECCB1"</code> <img src="../help/figures/vasesquare.png" alt="vasesquare.png">
</td>
<td style="text-align: center;"> 1/3 </td>
</tr>
<tr>
<td style="text-align: center;">
</td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>position</code></td>
<td>
<p>Default <code>c(0,0,0)</code>. A length-3 numeric vector specifying the X, Y, and Z coordinates of the tree mesh in 3D space.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p>Default <code>0</code>. Amount of rotation around the y-axis for the tree.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>solid</code></td>
<td>
<p>Default <code>FALSE</code>. Whether the crown should be a solid mesh (<code>TRUE</code>), or a collection of flat
2D planes (<code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resolution</code></td>
<td>
<p>Default <code>"medium"</code>. String indicating the level of detail of the tree mesh. All options:
<code>"low"</code>
<code>"medium"</code>
<code style="white-space: pre;">⁠"high⁠</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>Default <code>NULL</code>. File name of the OBJ file, if saving the mesh to a local file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tree_height</code></td>
<td>
<p>Default <code>1</code>. A numeric value setting the total height of the tree.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trunk_height_ratio</code></td>
<td>
<p>Default <code>NULL</code>. A numeric value specifying the ratio of the trunk height to the total height of the tree. If not provided, default values for each tree type will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crown_width_ratio</code></td>
<td>
<p>Default <code>1</code>. A numeric value specifying the ratio of the crown width to the crown height.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crown_height</code></td>
<td>
<p>Default <code>NULL</code>. A numeric value setting the height of the crown. If not provided, it is calculated based on the tree height and trunk height ratio.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crown_width</code></td>
<td>
<p>Default <code>NULL</code>. A numeric value setting the diameter of the crown. If not provided, it is calculated based on the crown height and crown width ratio.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trunk_height</code></td>
<td>
<p>Default <code>NULL</code>. A numeric value setting the height of the trunk. If not provided, it is calculated based on the tree height and trunk height ratio.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trunk_width</code></td>
<td>
<p>Default <code>NULL</code>. A numeric value setting the diameter of the trunk. If not provided, this is set to 1/10th the crown width.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crown_color</code></td>
<td>
<p>Default <code>NA</code>, use default for crown type. A string specifying the hex code of the crown color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trunk_color</code></td>
<td>
<p>Default <code>"#8C6F5B"</code>. A string specifying the hex code of the trunk color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diffuse_intensity</code></td>
<td>
<p>Default <code>1.0</code>. A numeric value controlling the amount of diffuse (shaded) color included in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ambient_intensity</code></td>
<td>
<p>Default <code>0.2</code>. A numeric value controlling the amount of ambient (constant) color included in the model.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>ray_mesh</code> list object
</p>


<h3>Examples</h3>

<pre><code class="language-R">#Load a tree and render it
library(rayvertex)
render_tree_example = function(example_tree_mesh) {
 example_tree_mesh |&gt;
   add_shape(xz_rect_mesh(c(0,0,-9),
                          material = material_list(diffuse="tan",
                          ambient = "grey", diffuse_intensity = 0.7,
                          ambient_intensity = 0.6),
                          scale=25)) |&gt;
   rasterize_scene(lookat=c(0,0.5,0),
                   light_info = directional_light(c(0.3,1,1), intensity = 0.7),
                   lookfrom=c(0,3,10),
                   fov=8,
                   shadow_map_dims = 2, shadow_map_bias = 0.0005,
                   width = 800, height = 800,
                   #fsaa = 4, ssao = TRUE, ssao_intensity = 1,
                   background = "lightblue")
}
if(run_documentation()) {
#Render a basic 3D crown
tree_mesh("columnar",
         solid = TRUE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
#Render the 2D planar version
tree_mesh("columnar",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
#Adjust the trunk/crown proportions of the overall tree using ratios
tree_mesh("columnar",
         tree_height = 1,
         trunk_height_ratio = 1/5,
         crown_width_ratio = 1.25,
         trunk_width = 0.125,
         solid = TRUE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()

}

if(run_documentation()) {
#The crown width is set proportional to the crown height (not the overall tree)
tree_mesh("columnar",
         tree_height = 1,
         trunk_height_ratio = 2/3,
         crown_width_ratio = 1,
         trunk_width = 0.075,
         solid = TRUE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}

if(run_documentation()) {
#Set the trunk and crown dimensions directly
tree_mesh("columnar",
         trunk_height = 0.25,
         trunk_width = 0.05,
         crown_height = 0.75,
         crown_width = 0.33,
         solid = TRUE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
#Change the crown and trunk color
tree_mesh("columnar",
         solid = TRUE,
         crown_color = "orange",
         trunk_color = "tan",
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
#Render different tree types, both 2D and 3D versions
tree_mesh("columnar",
         solid = TRUE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("columnar",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("pyramidal1",
         solid = TRUE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("pyramidal1",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("pyramidal2",
         solid = TRUE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("pyramidal2",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("weeping",
         solid = TRUE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("weeping",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("spreading1",
         solid = TRUE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("spreading1",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("oval",
         solid = TRUE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("oval",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("palm",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("rounded",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("spreading2",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
if(run_documentation()) {
tree_mesh("vase",
         solid = FALSE,
         ambient_intensity = 0.3) |&gt;
 render_tree_example()
}
</code></pre>


</div>
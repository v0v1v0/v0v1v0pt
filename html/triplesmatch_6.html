<div class="container">

<table style="width: 100%;"><tr>
<td>dist_mahal</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make Mahalanobis distance matrix</h2>

<h3>Description</h3>

<p>Make Mahalanobis distance matrix
</p>


<h3>Usage</h3>

<pre><code class="language-R">dist_mahal(X, z, st, rank_based = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Covariate matrix to be used in calculating distances</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>Vector of treatment assignments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>st</code></td>
<td>
<p>Vector of stratum assignments, should be denoted by consecutive integers starting from 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rank_based</code></td>
<td>
<p>Whether to use rank based Mahalanobis distance or not</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List of squared Mahalanobis distance matrices between each pair of treated-control units in a stratum.
There is one entry in the list for each stratum.
This entry is a distance matrix with a row for each treated unit and a column
for each control unit in the stratum.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Generate some data
set.seed(1)
n &lt;- 40
x &lt;- rnorm(n, 0, 1)
nt &lt;- floor(n * 0.4)
nc &lt;- n - nt
z &lt;- c(rep(1, nt), rep(0, nc))
# Create some strata
ps &lt;- glm(z ~ x, family = binomial)$fitted.values
ps_st &lt;- cut(ps, c(0, quantile(ps, 1/3 * 1:2), 1), labels = 1:3)
# Create a list of distance matrices, one for each stratum
dist &lt;- dist_mahal(data.frame(x = x), z, ps_st)

</code></pre>


</div>
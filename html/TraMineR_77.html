<div class="container">

<table style="width: 100%;"><tr>
<td>seqefsub</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Searching for frequent subsequences</h2>

<h3>Description</h3>

<p>Returns the list of subsequences with minimal support sorted in decreasing order of support. Various time constraints can be set to restrict the search to specific time periods or subsequence durations. The function permits also to get information on specified subsequences.
</p>


<h3>Usage</h3>

<pre><code class="language-R">seqefsub(eseq, str.subseq = NULL, min.support = NULL,
  pmin.support = NULL, constraint = seqeconstraint(), max.k = -1,
  weighted = TRUE, seq, strsubseq, minSupport, pMinSupport, maxK)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>eseq</code></td>
<td>
<p>A list of event sequences</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>str.subseq</code></td>
<td>
<p>A list of specific subsequences to look for. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.support</code></td>
<td>
<p>The minimum support (in number of sequences)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pmin.support</code></td>
<td>
<p>The minimum support (in percentage, corresponding count will be rounded)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint</code></td>
<td>
<p>A time constraint object as returned by <code>seqeconstraint</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.k</code></td>
<td>
<p>The maximum number of events allowed in a subsequence</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weighted</code></td>
<td>
<p>Logical. Should <code>seqefsub</code> use the weights specified in <code>eseq</code> (see <code>seqeweight</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seq</code></td>
<td>
<p>Deprecated. Use <code>eseq</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strsubseq</code></td>
<td>
<p>Deprecated. Use <code>str.subseq</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minSupport</code></td>
<td>
<p>Deprecated. Use <code>min.support</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pMinSupport</code></td>
<td>
<p>Deprecated. Use <code>pmin.support</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxK</code></td>
<td>
<p>Deprecated. Use <code>max.k</code> instead.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>There are two usages of this function. The first is for searching subsequences satisfying a support condition.
By default, the support is counted per sequence and not per occurrence, i.e. when a sequence contains several occurrences of a same subsequence it is counted only once. Use the <code>count.method</code> argument of <code>seqeconstraint</code> to change that. The minimal required support can be set with <code>pmin.support</code> as a proportion (between 0 and 1) in which case the support will be rounded, or through min.support as a number of sequences.
Time constraints can also be imposed with the <code>constraint</code> argument, which must be the outcome of a call to the <code>seqeconstraint</code> function.
</p>
<p>The second possibility is for searching sequences that contain specified subsequences. This is done by passing the list of subsequences with the <code>str.subseq</code> argument. The subsequences must contain only events from the alphabet of events of <code>eseq</code> and must be in the same format as that used to display subsequences (see <code>str.seqelist</code>).
Each transition (group of events) should be enclosed in parentheses () and separated with commas, and the succession of transitions should be denoted by a '-' indicating a time gap.
For instance "(FullTime)-(PartTime, Children)" stands for the subsequence "FullTime" followed by the transition defined by the two simultaneously occurring events "PartTime" and "Children".
</p>
<p>To get information such as the number of occurrences of the subsequences returned by <code>seqefsub</code> or the sequences that contain each subsequence use the function <code>seqeapplysub</code>.
</p>
<p>Subsets of the returned <code>subseqelist</code> can be accessed with the <code>[]</code> operator (see example). There are print and plot methods for <code>subseqelist</code>.
</p>


<h3>Value</h3>

<p>A <code>subseqelist</code> object with at least the following attributes:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>eseq</code></td>
<td>
<p>The list of sequences in which the subsequences were searched (a <code>seqelist</code> event sequence object).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subseq</code></td>
<td>
<p>A list of subsequences (a <code>seqelist</code> event sequence object).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing details (support, frequency, ...) about the subsequences</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint</code></td>
<td>
<p>The constraint object used when searching the subsequences.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>The type of search: 'frequent' or 'user'</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Matthias Studer and Reto Bürgin (alternative counting methods) (with Gilbert Ritschard for the help page)</p>


<h3>References</h3>

<p>Ritschard, G., Bürgin, R., and Studer, M. (2014), "Exploratory Mining of Life Event Histories", In McArdle, J.J. &amp; Ritschard, G. (eds) <em>Contemporary Issues in Exploratory Data Mining in the Behavioral Sciences</em>. Series: Quantitative Methodology, pp. 221-253. New York: Routledge.
</p>


<h3>See Also</h3>

<p>See <code>plot.subseqelist</code> to plot the result.
See <code>seqecreate</code> for creating event sequences. 
See <code>seqeapplysub</code> to count the number of occurrences of frequent subsequences in each sequence.
See <code>is.seqelist</code> about <code>seqelist</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(actcal.tse)
actcal.eseq &lt;- seqecreate(actcal.tse)

## Searching for subsequences appearing at least 20 times
fsubseq &lt;- seqefsub(actcal.eseq, min.support=20)
## The same using a percentage
fsubseq &lt;- seqefsub(actcal.eseq, pmin.support=0.01)
## Getting a string representation of subsequences
## First ten most frequent subsequences
fsubseq[1:10]

## Using time constraints
## Looking for subsequences starting in Summer (between June and September)
fsubseq &lt;- seqefsub(actcal.eseq, min.support=10,
  constraint=seqeconstraint(age.min=6, age.max=9))
fsubseq[1:10]

##Looking for subsequences occurring in Summer (between June and September)
fsubseq &lt;- seqefsub(actcal.eseq, min.support = 10,
  constraint=seqeconstraint(age.min=6, age.max=9, age.max.end=9))
fsubseq[1:10]

##Looking for subsequence enclosed in a 6 month period
## and with a maximum gap of 2 month
fsubseq &lt;- seqefsub(actcal.eseq, min.support=10,
  constraint=seqeconstraint(max.gap=2, window.size=6))
fsubseq[1:10]
</code></pre>


</div>
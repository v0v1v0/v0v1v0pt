<div class="container">

<table style="width: 100%;"><tr>
<td>produce_plugin_estimates</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate models of nuisance functions</h2>

<h3>Description</h3>

<p>This takes a dataset with an identified outcome and treatment column along
with any number of covariates and appends three columns to the dataset corresponding
to an estimate of the conditional expectation of treatment (<code>.pi_hat</code>), along with the
conditional expectation of the control and treatment potential outcome surfaces
(<code>.mu0_hat</code> and <code>.mu1_hat</code> respectively).
</p>


<h3>Usage</h3>

<pre><code class="language-R">produce_plugin_estimates(data, outcome, treatment, ..., .weights = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>dataframe (already prepared with <code>attach_config</code> and <code>make_splits</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>Unquoted name of the outcome variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>Unquoted name of the treatment variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Unquoted names of covariates to include in the models of the nuisance functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.weights</code></td>
<td>
<p>Unquoted name of weights column. If NULL, all analysis will assume weights
are all equal to one and sample-based quantities will be returned.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To see an example analysis, read <code>vignette("experimental_analysis")</code> in the context
of an experiment, <code>vignette("experimental_analysis")</code> for an observational study, or
<code>vignette("methodological_details")</code> for a deeper dive under the hood.
</p>


<h3>See Also</h3>

<p><code>attach_config()</code>, <code>make_splits()</code>, <code>construct_pseudo_outcomes()</code>, <code>estimate_QoI()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("dplyr")
if(require("palmerpenguins")) {
data(package = 'palmerpenguins')
penguins$unitid = seq_len(nrow(penguins))
penguins$propensity = rep(0.5, nrow(penguins))
penguins$treatment = rbinom(nrow(penguins), 1, penguins$propensity)
cfg &lt;- basic_config() %&gt;% 
add_known_propensity_score("propensity") %&gt;%
add_outcome_model("SL.glm.interaction") %&gt;%
remove_vimp()
attach_config(penguins, cfg) %&gt;%
make_splits(unitid, .num_splits = 4) %&gt;%
produce_plugin_estimates(outcome = body_mass_g, treatment = treatment, species, sex) %&gt;%
construct_pseudo_outcomes(body_mass_g, treatment) %&gt;%
estimate_QoI(species, sex)
}
</code></pre>


</div>
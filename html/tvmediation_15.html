<div class="container">

<table style="width: 100%;"><tr>
<td>tvmb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Time Varying Mediation Function: Binary Outcome and Two Treatment Groups</h2>

<h3>Description</h3>

<p>Function to estimate the time-varying mediation effect and bootstrap standard errors, involving two treatment groups and binary outcome.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tvmb(
  treatment,
  t.seq,
  mediator,
  outcome,
  span = 0.75,
  plot = FALSE,
  CI = "boot",
  replicates = 1000,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>a vector indicating treatment group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t.seq</code></td>
<td>
<p>a vector of unique time points for each observation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediator</code></td>
<td>
<p>matrix of mediator values in wide format</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>matrix of outcome values in wide format</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>span</code></td>
<td>
<p>Numeric value of the span to be used for LOESS regression. Default = 0.75.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>TRUE or FALSE for producing plots. Default = "FALSE". (OPTIONAL ARGUMENT)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>"none" or "boot" method of deriving confidence intervals. Default = "boot". (OPTIONAL ARGUMENT)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replicates</code></td>
<td>
<p>Number of replicates for bootstrapping confidence intervals. Default = 1000. (OPTIONAL ARGUMENT)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>TRUE or FALSE for printing results to screen. Default = "FALSE". (OPTIONAL ARGUMENT)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>timeseq</code></td>
<td>
<p>time points of estimation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_hat</code></td>
<td>
<p>estimated treatment effect on mediator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.a</code></td>
<td>
<p>CI lower limit for estimated coefficient alpha_hat</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.a</code></td>
<td>
<p>CI upper limit for estimated coefficient alpha_hat</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma_hat</code></td>
<td>
<p>estimated treatment effect on outcome (direct effect)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.g</code></td>
<td>
<p>CI lower limit for estimated coefficient gamma_hat</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.g</code></td>
<td>
<p>CI upper limit for estimated coefficient gamma_hat</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta_hat</code></td>
<td>
<p>estimated mediator effect on outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.b</code></td>
<td>
<p>CI lower limit for estimated coefficient beta_hat</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.b</code></td>
<td>
<p>CI upper limit for estimated coefficient beta_hat</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau_hat</code></td>
<td>
<p>estimated treatment effect on outcome (total effect)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower.t</code></td>
<td>
<p>CI lower limit for estimated coefficient tau_hat</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper.t</code></td>
<td>
<p>CI upper limit for estimated coefficient tau_hat</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>medEffect</code></td>
<td>
<p>time varying mediation effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.lower</code></td>
<td>
<p>CI lower limit for medEffect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.upper</code></td>
<td>
<p>CI upper limit for medEffect</p>
</td>
</tr>
</table>
<h3>Plot Returns</h3>


<ol>
<li>
<p><code>plot1_a </code>plot for alpha_hat with CIs over t.seq
</p>
</li>
<li>
<p><code>plot2_g </code>plot for gamma_hat with CIs over t.seq
</p>
</li>
<li>
<p><code>plot3_b </code>plot for beta_hat with CIs over t.seq
</p>
</li>
<li>
<p><code>plot4_t </code>plot for tau_hat with CIs over t.seq
</p>
</li>
<li>
<p><code>MedEff </code>plot for medEffect over t.seq
</p>
</li>
<li>
<p><code>MedEff_CI </code>plot for medEffect with CIs over t.seq
</p>
</li>
<li>
<p><code>bootstrap </code>plot for estimated medEffect from bootstrapped samples over t.seq
</p>
</li>
</ol>
<h3>Note</h3>


<ol>
<li>
<p>Currently supports 2 treatment groups
</p>
</li>
<li>
<p>** IMPORTANT ** An alternate way of formatting the data and calling the function 
is documented in detail in the tutorial for the tvmb() function.
</p>
</li>
</ol>
<h3>References</h3>


<ol>
<li>
<p>Fan, J. and Gijbels, I. Local polynomial modelling and its 
applications: Monographs on statistics and applied probability 66. 
CRC Press; 1996.
</p>
</li>
<li>
<p>Fan J, Zhang W. Statistical Estimation in Varying Coefficient Models. 
The Annals of Statistics. 1999;27(5):1491-1518.
</p>
</li>
<li>
<p>Fan J, Zhang JT. Two-step estimation of functional linear models with 
applications to longitudinal data. Journal of the Royal Statistical Society: 
Series B (Statistical Methodology). 2000;62(2):303-322.
</p>
</li>
<li>
<p>Baker TB, Piper ME, Stein JH, et al. Effects of Nicotine Patch vs Varenicline 
vs Combination Nicotine Replacement Therapy on Smoking Cessation at 26 Weeks: 
A Randomized Clinical Trial. JAMA. 2016;315(4):371.
</p>
</li>
<li>
<p>B. Efron, R. Tibshirani. Bootstrap Methods for Standard Errors, Confidence 
Intervals, and Other Measures of Statistical Accuracy. Statistical Science. 
1986;1(1):54-75.
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: data(smoker)

# REDUCE DATA SET TO ONLY 2 TREATMENT CONDITIONS (EXCLUDE COMBINATION NRT)
smoker.sub &lt;- smoker[smoker$treatment != 4, ]

# GENERATE WIDE FORMATTED MEDIATORS
mediator &lt;- LongToWide(smoker.sub$SubjectID,
                       smoker.sub$timeseq,
                       smoker.sub$NegMoodLst15min)

# GENERATE WIDE FORMATTED OUTCOMES
outcome &lt;- LongToWide(smoker.sub$SubjectID,
                      smoker.sub$timeseq,
                      smoker.sub$smoke_status)

# GENERATE A BINARY TREATMENT VARIABLE
trt &lt;- as.numeric(unique(smoker.sub[, c("SubjectID","varenicline")])[, 2])-1

# GENERATE A VECTOR OF UNIQUE TIME POINTS
t.seq &lt;- sort(unique(smoker.sub$timeseq))

# COMPUTE TIME VARYING MEDIATION ANALYSIS USING BOOTSTRAPPED CONFIDENCE INTERVALS
results &lt;- tvmb(trt, t.seq, mediator, outcome)
## End(Not run)

</code></pre>


</div>
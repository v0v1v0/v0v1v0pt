<div class="container">

<table style="width: 100%;"><tr>
<td>TheiaCollection</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A collection of tiles from Theia</h2>

<h3>Description</h3>

<p>Generate and manage collection of tiles from Theia. This collection can be
created either from a cart file ('.meta4') downloaded from Theia website,
from a <code>TheiaQuery</code> object or from a list of
<code>TheiaTile</code> (not implemented yet).
</p>


<h3>Usage</h3>

<pre>
   c &lt;- TheiaCollection$new(cart.path = NULL,
                            tiles     = NULL,
                            query     = NULL,
                            dir.path  = NULL,
                            check     = TRUE)
                            quiet     = TRUE)

   c$download(auth, overwrite = FALSE, check = TRUE, quiet = TRUE)
   c$check()
   c$status
   c$extract(overwrite = FALSE, dest.dir = NULL)
   c$read(bands)
   c$as_gdalcube(out.file = "gdalcube_collection.sqlite")
</pre>


<h3>Arguments</h3>


<dl>
<dt>c:</dt>
<dd>
<p>A <code>TheiaCollection</code> object</p>
</dd>
<dt>dir.path:</dt>
<dd>
<p>The path to the directory containing zip files</p>
</dd>
<dt>check:</dt>
<dd>
<p>Whether or not to check existing files on collection's creation</p>
</dd>
<dt>quiet:</dt>
<dd>
<p>Control verbose output</p>
</dd>
<dt>tiles:</dt>
<dd>
<p>A list of TheiaTile objects</p>
</dd>
<dt>cart:</dt>
<dd>
<p>An XML cart parsed from a 'meta4' file downloaded from Theia</p>
</dd>
</dl>
<p>website. Used only if Collection is created from a cart
</p>
<dl>
<dt>query:</dt>
<dd>
<p>A TheiaQuery object, used only if collection is created
from a TheiaQuery object. Can also be a list with search terms. In this
case, it will create a 'TheiaQuery' object from it. See
<code>TheiaQuery</code> for details on query syntax</p>
</dd>
<dt>auth:</dt>
<dd>
<p>A character string giving the file path to Theia credentials.
Or a <code>TheiaAuth</code> object</p>
</dd>
<dt>overwrite:</dt>
<dd>
<p>Overwrite existing tiles (default to 'FALSE')</p>
</dd>
<dt>bands:</dt>
<dd>
<p>A character vector of bands to load from tiles</p>
</dd>
<dt>out.file:</dt>
<dd>
<p>Filename to store gdalcubes' image collection</p>
</dd>
</dl>
<h3>Details</h3>

<p><code>TheiaCollection$new()</code> Create a new instance of the class
</p>
<p><code>c$download(overwrite = FALSE, check = TRUE)</code> Download the tiles of the collection
and check the resulting files
</p>
<p><code>$ccheck()</code> Check the tiles of the collection
</p>
<p><code>c$status</code> Return the status of each tile of the collection
</p>
<p><code>c$extract(overwrite = FALSE, dest.dir = NULL)</code> Extract archives to
dest.dir if supplied, or to the same directory as the archives otherwise
</p>
<p><code>c$read(bands)</code> Read requested bands, apply corrections on values
(as specified in Theia's product information), and return a list of
RasterStack objects (one stack per tile)
</p>
<p><code>c$as_gdalcube(out.file)</code> Create a 'gdalcubes' image collection from
downloaded tiles. See <a href="https://github.com/appelmar/gdalcubes_R">https://github.com/appelmar/gdalcubes_R</a> for
more details.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# Create a collection from a query
## Create a query to Theia database, looking for tiles from Sentinel2
## satellite around Grenoble, between 2018-07-01 and 2018-07-06.

query &lt;- list(collection = "SENTINEL2",
              town       = "Grenoble",
              start.date = "2018-07-01",
              end.date   = "2018-07-06")

## Create a collecion of tiles from this query
mycollection &lt;- TheiaCollection$new(query = query, dir.path = ".")

print(mycollection)


# Alternatively, you can create a collection from a cart file (that you can
# download from Theia's website)
cart.path &lt;- system.file("extdata", "cart.meta4", package = "theiaR")

mycollection &lt;- TheiaCollection$new(cart.path = cart.path,
                                    dir.path  = ".")

print(mycollection)

## Not run: 
# Download the tiles in the collection
mycollection$download()

## End(Not run)

## Not run: 
# Finally, you can extract zip archives containing the tiles
mycollection$extract(overwrite = FALSE)

## End(Not run)

</code></pre>


</div>
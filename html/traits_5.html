<div class="container">

<table style="width: 100%;"><tr>
<td>betydb_query</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Query a BETY table</h2>

<h3>Description</h3>

<p>Query a BETY table
</p>


<h3>Usage</h3>

<pre><code class="language-R">betydb_query(
  ...,
  table = "search",
  key = NULL,
  api_version = NULL,
  betyurl = NULL,
  user = NULL,
  pwd = NULL,
  progress = TRUE
)

betydb_search(
  query = "Maple SLA",
  ...,
  include_unchecked = NULL,
  progress = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>(named character) Columns to query, as key="value" pairs. Note that betydb_query passes these along to BETY with no check whether the requested keys exist in the specified table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>(character) The name of the database table to query, or "search" (the default) for the traits and yields view</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>(character) An API key. Use this or user/pwd combo.
Save in your <code>.Rprofile</code> file as <code>options(betydb_key = "your40digitkey")</code>. Optional</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_version</code></td>
<td>
<p>(character) Which version of the BETY API should we query? One of "v0" or "beta".
Default is <code>options("betydb_api_version")</code> if set, otherwise  "v0".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>betyurl</code></td>
<td>
<p>(string) url to target instance of betydb.
Default is <code>options("betydb_url")</code> if set, otherwise "https:/www.betydb.org/"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user, pwd</code></td>
<td>
<p>(character) A user name and password. Use a user/pwd combo or an API key.
Save in your <code>.Rprofile</code> file as <code>options(betydb_user = "yournamehere")</code> and <code>options(betydb_pwd = "yourpasswordhere")</code>. Optional</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>show progress bar? default: <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>(character) A string containing one or more words to be queried across all columns of the "search" table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_unchecked</code></td>
<td>
<p>(logical) Include results that have not been quality checked? Applies only to tables with a "checked" column: "search", "traits", "yields". Default is to exclude unchecked values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Use betydb_query to retrieve records from a table that match on all the column filters specified in '...'.
If no filters are specified, retrieves the whole table. In API versions that support it (i.e. not in v0), filter strings beginning with "~" are treated as regular expressions.
</p>


<h3>Value</h3>

<p>A data.frame with attributes containing request metadata, or NULL if the query produced no results
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# literal vs regular expression vs anchored regular expression:
betydb_query(units = "Mg", table = "variables")
# NULL
betydb_query(units = "Mg/ha", table = "variables") %&gt;% select(name) %&gt;% c()
# $name
# [1] "a_biomass"                  "root_live_biomass"
# [3] "leaf_dead_biomass_in_Mg_ha" "SDM"

betydb_query(genus = "Miscanthus", table = "species") %&gt;% nrow()
# [1] 10
(betydb_query(genus = "~misc", table = "species", api_version = "beta")
 %&gt;% select(genus)
 %&gt;% unique() %&gt;% c())
# $genus
# [1] "Platymiscium" "Miscanthus"   "Dermiscellum"

(betydb_query(genus = "~^misc", table = "species", api_version = "beta")
 %&gt;% select(genus)
 %&gt;% unique() %&gt;% c())
# $genus
# [1] "Miscanthus"

## End(Not run)

</code></pre>


</div>
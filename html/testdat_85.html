<div class="container">

<table style="width: 100%;"><tr>
<td>label-expectations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Expectations: labels</h2>

<h3>Description</h3>

<p>Test whether variables in a data frame are labelled in a given way.
</p>


<h3>Usage</h3>

<pre><code class="language-R">expect_labels(
  vars,
  val_labels = NULL,
  var_label = NULL,
  flt = TRUE,
  data = get_testdata()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>&lt;<code>tidy-select</code>&gt; A set of columns to
test.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>val_labels</code></td>
<td>
<p>What value label check should be performed? One of:
</p>

<ul>
<li>
<p> A character vector of expected value labels.
</p>
</li>
<li>
<p> A named vector of expected label-value pairs.
</p>
</li>
<li> <p><code>TRUE</code> to test for the presence of value labels in general.
</p>
</li>
<li> <p><code>FALSE</code> to test for the absence of value labels.
</p>
</li>
<li> <p><code>NULL</code> to ignore value labels when checking.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_label</code></td>
<td>
<p>What variable label check should be performed? One of:
</p>

<ul>
<li>
<p> A character vector of expected variable labels.
</p>
</li>
<li> <p><code>TRUE</code> to test for the presence of a variable labels.
</p>
</li>
<li> <p><code>FALSE</code> to test for the absence of a variable labels.
</p>
</li>
<li> <p><code>NULL</code> to ignore the variable label when checking.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flt</code></td>
<td>
<p>&lt;<code>data-masking</code>&gt; A filter specifying
a subset of the data frame to test.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame to test. The global test data is used
by default.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code style="white-space: pre;">⁠expect_*()⁠</code> functions are mainly called for their side effects. The
expectation signals its result (e.g. "success", "failure"), which is logged
by the current test reporter. In a non-testing
context the expectation will raise an error with class
<code>expectation_failure</code> if it fails.
</p>


<h3>See Also</h3>

<p>Checks: labels
</p>
<p>Other data expectations: 
<code>conditional-expectations</code>,
<code>datacomp-expectations</code>,
<code>date-expectations</code>,
<code>exclusivity-expectations</code>,
<code>expect_depends()</code>,
<code>generic-expectations</code>,
<code>pattern-expectations</code>,
<code>proportion-expectations</code>,
<code>text-expectations</code>,
<code>uniqueness-expectations</code>,
<code>value-expectations</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
df &lt;- data.frame(
  x = labelled::labelled(c("M", "M", "F"), c(Male = "M", Female = "F"), "Sex"),
  y = labelled::labelled(c("M", "M", "F"), c(Male = "M", Female = "F", Other = "X")),
  z = c("M", "M", "F")
)

# Check for a value-label pairing
try(expect_labels(x, c(Male = "M"), data = df))

# Check that two variables have the same values
expect_labels(x, labelled::val_labels(df$y), data = df) # N.B. This passes!

# Check for the presence of a particular label
try(expect_labels(x, "Male", data = df))
expect_labels(x, var_label = "Sex", data = df)

# Check that a variable is labelled at all
try(expect_labels(z, val_labels = TRUE, data = df))
try(expect_labels(z, var_label = TRUE, data = df))

# Check that a variable isn't labelled
expect_labels(z, val_labels = FALSE, data = df)
expect_labels(z, var_label = FALSE, data = df)

</code></pre>


</div>
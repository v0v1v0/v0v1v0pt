<div class="container">

<table style="width: 100%;"><tr>
<td>stri_locate_ith</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Locate <code class="reqn">i^{th}</code> Pattern Occurrence or Text Boundary</h2>

<h3>Description</h3>

<p>The <code>stri_locate_ith()</code> function
locates the <code class="reqn">i^{th}</code> occurrence of a pattern in each string of
some character vector. <br><br>
The <code>stri_locate_ith_boundaries()</code> function
locates the <code class="reqn">i^{th}</code> text boundary
(like character, word, line, or sentence boundaries). <br></p>


<h3>Usage</h3>

<pre><code class="language-R">stri_locate_ith(str, i, ..., regex, fixed, coll, charclass)

stri_locate_ith_regex(str, pattern, i, ..., opts_regex = NULL)

stri_locate_ith_fixed(str, pattern, i, ..., opts_fixed = NULL)

stri_locate_ith_coll(str, pattern, i, ..., opts_collator = NULL)

stri_locate_ith_charclass(str, pattern, i, merge = TRUE, ...)

stri_locate_ith_boundaries(str, i, ..., opts_brkiter = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>str</code></td>
<td>
<p>a string or character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>
<p>an integer scalar,
or an integer vector of appropriate length
(vector recycling is not supported). <br>
Positive numbers count occurrences from the left/beginning of the strings. <br>
Negative numbers count occurrences from the right/end of the strings. <br>
I.e.:
</p>

<ul>
<li> <p><code>stri_locate_ith(str, i = 1, ...)</code> <br>
gives the position (range) of the first occurrence of a pattern.
</p>
</li>
<li> <p><code>stri_locate_ith(str, i = -1, ...)</code> <br>
gives the position (range) of the last occurrence of a pattern.
</p>
</li>
<li> <p><code>stri_locate_ith(str, i = 2, ...)</code><br>
gives the position (range) of the second occurrence of a pattern.
</p>
</li>
<li> <p><code>stri_locate_ith(str, i = -2, ...)</code> <br>
gives the position (range) of the second-last occurrence of a pattern.
</p>
</li>
</ul>
<p>If <code>abs(i)</code> is larger than the number of pattern occurrences <code>n</code>,
the first (if <code>i &lt; -n</code>) or last (if <code>i &gt; n</code>) instance will be given. <br>
For example: suppose a string has <code>3</code> instances of some pattern; <br>
then if <code>i &gt;= 3</code> the third instance will be located, <br>
and if <code>i &lt;= -3</code> the first instance will be located. <br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>more arguments to be supplied to
stri_locate_all or stri_locate_all_boundaries. <br>
Do not supply the arguments
<code>omit_no_match</code> or <code>get_length</code>,
as they are already specified internally.
Supplying these arguments anyway will result in an error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern, regex, fixed, coll, charclass</code></td>
<td>
<p>a character vector of search patterns,
as in stri_locate_all. <br><a href="https://stringi.gagolewski.com/rapi/about_search_regex.html"><img src="../help/figures/aboutsearch-regex-darkred.svg" alt="[REGEX]"></a> <br><a href="https://stringi.gagolewski.com/rapi/about_search_fixed.html"><img src="../help/figures/aboutsearch-fixed-darkgreen.svg" alt="[FIXED]"></a> <br><a href="https://stringi.gagolewski.com/rapi/about_search_coll.html"><img src="../help/figures/aboutsearch-coll-pink.svg" alt="[COLL]"></a> <br><a href="https://stringi.gagolewski.com/rapi/about_search_charclass.html"><img src="../help/figures/aboutsearch-charclass-lightyellow.svg" alt="[CHARCLASS]"></a> <br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opts_regex, opts_fixed, opts_collator, opts_brkiter</code></td>
<td>
<p>named list used to tune up the selected search engine's settings. <br>
see stri_opts_regex,
stri_opts_fixed,
stri_opts_collator,
and stri_opts_brkiter. <br>
NULL for the defaults. <br><a href="https://stringi.gagolewski.com/rapi/about_search_regex.html"><img src="../help/figures/aboutsearch-regex-darkred.svg" alt="[REGEX]"></a> <br><a href="https://stringi.gagolewski.com/rapi/about_search_fixed.html"><img src="../help/figures/aboutsearch-fixed-darkgreen.svg" alt="[FIXED]"></a> <br><a href="https://stringi.gagolewski.com/rapi/about_search_coll.html"><img src="../help/figures/aboutsearch-coll-pink.svg" alt="[COLL]"></a> <br><a href="https://stringi.gagolewski.com/rapi/about_search_charclass.html"><img src="../help/figures/aboutsearch-charclass-lightyellow.svg" alt="[CHARCLASS]"></a> <br><a href="https://stringi.gagolewski.com/rapi/about_search_boundaries.html"><img src="../help/figures/aboutsearch-boundaries-blue.svg" alt="[BOUNDARIES]"></a> <br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge</code></td>
<td>
<p>logical, indicating if charclass locations should be merged or not. <br><b>Details:</b> <br>
For the <code>charclass</code> pattern type,
the <code>stri_locate_ith()</code> function gives the start and end of
<b>consecutive</b> characters by default,
just like stri_locate_all. <br>
To give the start and end positions of single characters,
much like stri_locate_first or stri_locate_last,
set <code>merge = FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The 'stringi' functions only support operations on the
first, last, or all occurrences of a pattern. <br>
The <code>stri_locate_ith()</code> function
allows locating the <code class="reqn">i^{th}</code> occurrence of a pattern. <br>
This allows for several workflows
for operating on the <code class="reqn">i^{th}</code> pattern occurrence. <br>
See also the examples section. <br><br><b>Extract <code class="reqn">i^{th}</code> Occurrence of a Pattern</b> <br>
For extracting the <code class="reqn">i^{th}</code> pattern occurrence: <br>
Locate the the <code class="reqn">i^{th}</code> occurrence using <code>stri_locate_ith()</code>,
and then extract it using, for example, stri_sub. <br><br><b>Replace/Transform <code class="reqn">i^{th}</code> Occurrence of a Pattern</b> <br>
For replacing/transforming the <code class="reqn">i^{th}</code> pattern occurrence:
</p>

<ol>
<li>
<p> Locate the the <code class="reqn">i^{th}</code> occurrence using <code>stri_locate_ith()</code>.
</p>
</li>
<li>
<p> Extract the occurrence using stri_sub.
</p>
</li>
<li>
<p> Transform or replace the extracted sub-strings.
</p>
</li>
<li>
<p> Return the transformed/replaced sub-string back,
using again stri_sub. <br><br></p>
</li>
</ol>
<p><b>Capture Groups of <code class="reqn">i^{th}</code> Occurrence of a Pattern</b> <br>
The <code>capture_groups</code> argument for <code>regex</code> is not supported within <code>stri_locate_ith()</code>. <br>
To capture the groups of the <code class="reqn">i^{th}</code> occurrences:
</p>

<ol>
<li>
<p> Use <code>stri_locate_ith()</code> to locate the <code class="reqn">i^{th}</code> occurrences without group capture.
</p>
</li>
<li>
<p> Extract the occurrence using stri_sub.
</p>
</li>
<li>
<p> Get the matched group capture on the extracted occurrences using stri_match. <br><br></p>
</li>
</ol>
<h3>Value</h3>

<p>The <code>stri_locate_ith()</code> function returns an integer matrix with two columns,
giving the start and end positions of the <code class="reqn">i^{th}</code> matches,
two <code>NA</code>s if no matches are found,
and also two <code>NA</code>s if <code>str</code> is <code>NA</code>.<br><br>
If an empty string or empty pattern is supplied,
a warning is given and a matrix with 0 rows is returned. <br><br></p>


<h3>Note</h3>

<p><b>Long Vectors</b> <br>
The <code>stri_locate_ith</code>-functions
do not support <code>long vectors</code>
(i.e. character vectors with more than <code>2^31 - 1</code> strings). <br><br><b>Performance</b> <br>
The performance of <code>stri_locate_ith()</code> is close to that of stri_locate_all. <br><br></p>


<h3>See Also</h3>

<p>tinycodet_strings
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#############################################################################

# practical example: transform regex pattern ====

# input character vector:
x &lt;- c(paste0(letters[1:13], collapse = ""),
       paste0(letters[14:26], collapse = ""))
print(x)

# locate ith (second and second-last) vowel locations:
p &lt;- rep("A|E|I|O|U", 2) # vowels
loc &lt;- stri_locate_ith(x, c(2, -2), regex = p, case_insensitive = TRUE)
print(loc)

# extract ith vowels:
extr &lt;- stringi::stri_sub(x, loc)
print(extr)

# transform &amp; replace ith vowels with numbers:
repl &lt;- chartr("aeiou", "12345", extr)
stringi::stri_sub(x, loc) &lt;- repl

# result (notice ith vowels are now numbers):
print(x)

#############################################################################


# practical example: group-capture regex pattern ====

# input character:
# first group: c(breakfast=eggs, breakfast=bacon)
# second group: c(lunch=pizza, lunch=spaghetti)
x &lt;- c('breakfast=eggs;lunch=pizza',
       'breakfast=bacon;lunch=spaghetti',
       'no food here') # no group here
print(x)
       
# locate ith=2nd group:
p &lt;- '(\\w+)=(\\w+)'
loc &lt;- stri_locate_ith(x, i = 2, regex = p)
print(loc)

# extract ith=2nd group:
extr &lt;- stringi::stri_sub(x, loc)
print(extr)

# capture ith=2nd group:
stringi::stri_match(extr, regex = p)

#############################################################################


# practical example: replace words using boundaries ====

# input character vector:
x &lt;- c("good morning and good night",
"hello ladies and gentlemen")
print(x)

# report ith word locations:
loc &lt;- stri_locate_ith_boundaries(x, c(-3, 3), type = "word")
print(loc)

# extract ith words:
extr &lt;- stringi::stri_sub(x, from = loc)
print(extr)

# transform and replace words (notice ith words have inverted case):
tf &lt;- chartr(extr, old = "a-zA-Z", new = "A-Za-z")
stringi::stri_sub(x, loc) &lt;- tf

# result:
print(x)


#############################################################################

# find pattern ====

extr &lt;- stringi::stri_sub(x, from = loc)
repl &lt;- chartr(extr, old = "a-zA-Z", new = "A-Za-z")
stringi::stri_sub_replace(x, loc, replacement=repl)


#############################################################################

# simple pattern ====

x &lt;- rep(paste0(1:10, collapse = ""), 10)
print(x)
out &lt;- stri_locate_ith(x, 1:10, regex = as.character(1:10))
cbind(1:10, out)


x &lt;- c(paste0(letters[1:13], collapse = ""),
       paste0(letters[14:26], collapse = ""))
print(x)
p &lt;- rep("a|e|i|o|u", 2)
out &lt;- stri_locate_ith(x, c(-1, 1), regex = p)
print(out)
substr(x, out[, 1], out[, 2])


#############################################################################

# ignore case pattern ====


x &lt;- c(paste0(letters[1:13], collapse = ""),
       paste0(letters[14:26], collapse = ""))
print(x)
p &lt;- rep("A|E|I|O|U", 2)
out &lt;- stri_locate_ith(x, c(1, -1), regex = p, case_insensitive = TRUE)
substr(x, out[, 1], out[, 2])


#############################################################################

# multi-character pattern ====

x &lt;- c(paste0(letters[1:13], collapse = ""),
       paste0(letters[14:26], collapse = ""))
print(x)
# multi-character pattern:
p &lt;- rep("AB", 2)
out &lt;- stri_locate_ith(x, c(1, -1), regex = p, case_insensitive = TRUE)
print(out)
substr(x, out[, 1], out[, 2])



#############################################################################

# Replacement transformation using stringi ====

x &lt;- c("hello world", "goodbye world")
loc &lt;- stri_locate_ith(x, c(1, -1), regex = "a|e|i|o|u")
extr &lt;- stringi::stri_sub(x, from = loc)
repl &lt;- chartr(extr, old = "a-zA-Z", new = "A-Za-z")
stringi::stri_sub_replace(x, loc, replacement = repl)


#############################################################################

# Boundaries ====

test &lt;- c(
  paste0("The\u00a0above-mentioned    features are very useful. ",
         "Spam, spam, eggs, bacon, and spam. 123 456 789"),
  "good morning, good evening, and good night"
)

loc &lt;- stri_locate_ith_boundaries(test, i = c(1, -1), type = "word")
stringi::stri_sub(test, from = loc)


</code></pre>


</div>
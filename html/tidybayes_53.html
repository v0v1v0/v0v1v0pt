<div class="container">

<table style="width: 100%;"><tr>
<td>gather_emmeans_draws</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract a tidy data frame of draws of posterior distributions of "estimated marginal means" (emmeans/lsmeans) from
a Bayesian model fit.</h2>

<h3>Description</h3>

<p>Extract draws from the result of a call to <code>emmeans::emmeans()</code> (formerly <code>lsmeans</code>)
or <code>emmeans::ref_grid()</code> applied to a Bayesian model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gather_emmeans_draws(object, value = ".value", ...)

## Default S3 method:
gather_emmeans_draws(object, value = ".value", ...)

## S3 method for class 'emm_list'
gather_emmeans_draws(object, value = ".value", grid = ".grid", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An <code>emmGrid</code> object such as returned by
<code>emmeans::ref_grid()</code> or <code>emmeans::emmeans()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>The name of the output column to use to contain the values of draws. Defaults to <code>".value"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to the underlying method for the type of object given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid</code></td>
<td>
<p>If <code>object</code> is an <code>emmeans::emm_list()</code>, the name of the output column to use to contain the name of the
reference grid that a given row corresponds to. Defaults to <code>".grid"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>emmeans::emmeans()</code> provides a convenient syntax for generating draws from "estimated marginal means" from a model,
and can be applied to various Bayesian models, like rstanarm::stanreg-objects and
<code>MCMCglmm::MCMCglmm()</code>. Given a <code>emmeans::ref_grid()</code> object as returned by functions like
<code>emmeans::ref_grid()</code> or <code>emmeans::emmeans()</code> applied to a Bayesian model,
<code>gather_emmeans_draws</code> returns a tidy format data frame of draws from
the marginal posterior distributions generated by <code>emmeans::emmeans()</code>.
</p>


<h3>Value</h3>

<p>A tidy data frame of draws. The columns of the reference grid are returned as-is, with an
additional column called <code>.value</code> (by default) containing marginal draws. The resulting data
frame is grouped by the columns from the reference grid to make use of summary functions like
<code>point_interval()</code> straightforward.
</p>
<p>If <code>object</code> is an <code>emmeans::emm_list()</code>, which contains estimates from different reference grids,
an additional column with the default name of <code>".grid"</code> is added to indicate the reference grid for each row in the output.
The name of this column is controlled by the <code>grid</code> argument.
</p>


<h3>Author(s)</h3>

<p>Matthew Kay
</p>


<h3>See Also</h3>

<p><code>emmeans::emmeans()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

library(dplyr)
library(magrittr)
library(brms)
library(emmeans)

# Here's an example dataset with a categorical predictor (`condition`) with several levels:
set.seed(5)
n = 10
n_condition = 5
ABC = tibble(
  condition = rep(c("A","B","C","D","E"), n),
  response = rnorm(n * 5, c(0,1,2,1,-1), 0.5)
)

m = brm(response ~ condition, data = ABC,
  # 1 chain / few iterations just so example runs quickly
  # do not use in practice
  chains = 1, iter = 500)

# Once we've fit the model, we can use emmeans() (and functions
# from that package) to get whatever marginal distributions we want.
# For example, we can get marginal means by condition:
m %&gt;%
  emmeans(~ condition) %&gt;%
  gather_emmeans_draws() %&gt;%
  median_qi()

# or we could get pairwise differences:
m %&gt;%
  emmeans(~ condition) %&gt;%
  contrast(method = "pairwise") %&gt;%
  gather_emmeans_draws() %&gt;%
  median_qi()

# see the documentation of emmeans() for more examples of types of
# contrasts supported by that packge.


## End(Not run)
</code></pre>


</div>
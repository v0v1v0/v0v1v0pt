<div class="container">

<table style="width: 100%;"><tr>
<td>tikzAnnotate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Custom TikZ Code to an Active Device</h2>

<h3>Description</h3>

<p>These functions allow custom (LaTeX) commands to be added to the output of an
active tikzDevice.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tikzAnnotate(annotation, checkstate = TRUE)

tikzNode(
  x = NULL,
  y = NULL,
  opts = NULL,
  name = NULL,
  content = NULL,
  units = "user"
)

tikzCoord(x, y, name, units = "user")

tikzAnnotateGrob(annotation)

tikzNodeGrob(
  x = NULL,
  y = NULL,
  opts = NULL,
  name = NULL,
  content = NULL,
  units = "native"
)

tikzCoordGrob(x, y, name, units = "native")

grid.tikzAnnotate(annotation, draw = TRUE)

grid.tikzNode(
  x = NULL,
  y = NULL,
  opts = NULL,
  name = NULL,
  content = NULL,
  units = "native",
  draw = TRUE
)

grid.tikzCoord(x, y, name, units = "native", draw = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>annotation</code></td>
<td>
<p>A character vector, one element per line to be added to
the open tikz device.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>checkstate</code></td>
<td>
<p>A logical, whether to "flush" the device state prior to
writing the <code>annotation</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>numeric, x location for a named coordinate in user coordinates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>numeric, y location for a named coordinate in user coordinates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opts</code></td>
<td>
<p>A character string that will be used as options for a <code>node</code>.
See the "Nodes and Edges" section of the TikZ manual for complete details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Optional character string that will be used as a name for a
<code>coordinate</code> or <code>node</code>. Other TikZ commands can use this
name to refer to a location in a graphic.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>content</code></td>
<td>
<p>A character string that will be used as the content to be displayed
inside of a <code>node</code>. If left as <code>NULL</code> a <code>coordinate</code> will be
created instead of a <code>node</code>. If a <code>node</code> with empty content is truely
desired, pass an empty string <code>""</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>Character string specifying the unit system associated with
<code>x</code> and <code>y</code>. See <code>grconvertX()</code> for acceptable
units in base graphics and <code>unit()</code> for acceptable
units in grid graphics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draw</code></td>
<td>
<p>A logical value indicating whether graphics output should be
produced.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>tikzAnnotate</code> is intended to allow the insertion of arbitrary TikZ
commands into the output stream of a graphic. For LaTeX commands that
reference specific locations in an R plot, coordinates must be specified in
"device units" which for <code>tikz</code> output are TeX points relative to the
lower left corner of the device canvas. Functions such as
<code>grconvertX()</code> and <code>gridToDevice()</code> can help make the
necessary conversions for base and grid graphics. The <code>tikzNode</code> and
<code>tikzCoord</code> functions automatically perform unit conversions acording
the the value of their <code>units</code> parameters.
</p>
<p><code>tikzNode</code> is a wrapper for <code>tikzAnnotate</code> that inserts TikZ
<code style="white-space: pre;">⁠\\node⁠</code> or <code style="white-space: pre;">⁠\\coordinates⁠</code> commands into the output. The
difference between a node and a coordinate is the presence of a
<code>content</code> section that can contain arbitrary LaTeX text. This is
useful for adding textual annotations at specific locations in a TikZ
graphic. The <code>tikzCoord</code> function is a wrapper for <code>tikzNode</code>
that simplifies the task of inserting named coordinates.
</p>
<p>Additionally, the <code>tikzAnnotateGrob</code>, <code>tikzNodeGrob</code> and
<code>tikzCoordGrob</code> functions are supplied for creating grid objects
or "<code>grob()</code>s" that can be used in Grid graphics. High level
wrapper functions <code>grid.tikzAnnotate</code>, <code>grid.tikzNode</code> and
<code>grid.tikzCoord</code> are also supplied which creat and render a <code>grob</code>
in one step.
</p>
<p>See the TikZ Device vignette for more information and examples and the
TikZ manual for the definitive reference on what is possible with nodes.
</p>


<h3>Value</h3>

<p>Nothing returned.
</p>


<h3>Author(s)</h3>

<p>Cameron Bracken <a href="mailto:cameron.bracken@gmail.com">cameron.bracken@gmail.com</a> and Charlie Sharpsteen
<a href="mailto:source@sharpsteen.net">source@sharpsteen.net</a>
</p>


<h3>See Also</h3>

<p><code>grconvertX()</code>
<code>grconvertY()</code>
<code>gridToDevice()</code>
<code>unit()</code>
<code>tikz()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

### Example 1: Annotations in Base Graphics
# Load some additional TikZ libraries
tikz("annotation.tex",width=4,height=4,
  packages = c(getOption('tikzLatexPackages'),
    "\\usetikzlibrary{decorations.pathreplacing}",
    "\\usetikzlibrary{positioning}",
    "\\usetikzlibrary{shapes.arrows,shapes.symbols}")
)

p &lt;- rgamma (300 ,1)
outliers &lt;- which( p &gt; quantile(p,.75)+1.5*IQR(p) )
boxplot(p)

# Add named coordinates that other TikZ commands can hook onto
tikzCoord(1, min(p[outliers]), 'min outlier')
tikzCoord(1, max(p[outliers]), 'max outlier')

# Use tikzAnnotate to insert arbitrary code, such as drawing a
# fancy path between min outlier and max outlier.
tikzAnnotate(c("\\draw[very thick,red,",
  # Turn the path into a brace.
  'decorate,decoration={brace,amplitude=12pt},',
  # Shift it 1em to the left of the coordinates
  'transform canvas={xshift=-1em}]',
  '(min outlier) --',
  # Add a node with some text in the middle of the path
  'node[single arrow,anchor=tip,fill=white,draw=green,',
  'left=14pt,text width=0.70in,align=center]',
  '{Holy Outliers Batman!}', '(max outlier);'))

# tikzNode can be used to place nodes with customized options and content
tikzNode(
  opts='starburst,fill=green,draw=blue,very thick,right=of max outlier',
  content='Wow!'
)

dev.off()


### Example 2: Annotations in Grid Graphics
library(grid)

tikz("grid_annotation.tex",width=4,height=4,
  packages = c(getOption('tikzLatexPackages'),
    "\\usetikzlibrary{shapes.callouts}")
)

pushViewport(plotViewport())
pushViewport(dataViewport(1:10, 1:10))

grid.rect()
grid.xaxis()
grid.yaxis()
grid.points(1:10, 1:10)

for ( i in seq(2,8,2) ){
  grid.tikzNode(i,i,opts='ellipse callout,draw,anchor=pointer',content=i)
}

dev.off()


## End(Not run)


</code></pre>


</div>
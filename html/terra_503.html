<div class="container">

<table style="width: 100%;"><tr>
<td>factors</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Categorical rasters</h2>

<h3>Description</h3>

<p>A SpatRaster layer can represent a categorical variable (factor). Like <code>factor</code>s, SpatRaster categories are stored as integers that have an associated label. 
</p>
<p>The categories can be inspected with <code>levels</code> and <code>cats</code>. They are represented by a <code>data.frame</code> that must have two or more columns, the first one identifying the (integer) cell values and the other column(s) providing the category labels. 
</p>
<p>If there are multiple columns with categories, you can set the "active" category to choose the one you want to use. 
</p>
<p><code>cats</code> returns the entire data.frame, whereas <code>levels</code> only return two columns: the index and the active category.
</p>
<p>To set categories for the first layer of a SpatRaster, you can provide <code>levels&lt;-</code> with a data.frame or a list with a data.frame. To set categories for multiple layers you can provide <code>levels&lt;-</code> with a list with one element (that either has a <code>data.frame</code> or is <code>NULL</code>) for each layer. Use <code>categories</code> to set the categories for a specific layer or specific layers.
</p>
<p><code>droplevels</code> removes categories that are not used (declared but not present as values in the raster) if <code>levels=NULL</code>.
</p>
<p><code>addCats</code> adds additional categories to a layer that already is categorical. It adds new variables, not new levels of an existing categorical variable.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'SpatRaster'
levels(x)

## S4 replacement method for signature 'SpatRaster'
levels(x)&lt;-value

## S4 method for signature 'SpatRaster'
cats(x, layer)

## S4 method for signature 'SpatRaster'
categories(x, layer=1, value, active=1, ...)

## S4 method for signature 'SpatRaster'
droplevels(x, level=NULL, layer=1)

## S4 method for signature 'SpatRaster'
addCats(x, value, merge=FALSE, layer=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>SpatRaster</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layer</code></td>
<td>
<p>the layer name or number (positive integer); or 0 for all layers</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>a data.frame (ID, category) that define the categories. Or <code>NULL</code> to remove them</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>active</code></td>
<td>
<p>positive integer, indicating the column in <code>value</code> to be used as the active category (zero based to skip the first column with the cell values; that is 1 is the second column in <code>value</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>the categories to remove for the layer specified with <code>layer</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge</code></td>
<td>
<p>logical. If <code>TRUE</code>, the categories are combined with <code>merge</code> using the first column of <code>value</code> as ID. If <code>FALSE</code> the categories are combined with <code>cbind</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments (none)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>list of data.frames (levels, cats) or logical (is.factor)
</p>


<h3>See Also</h3>

<p><code>activeCat</code>, <code>catalyze</code>, <code>set.cats</code>, <code>as.factor</code>, <code>is.factor</code></p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(0)
r &lt;- rast(nrows=10, ncols=10)
values(r) &lt;- sample(3, ncell(r), replace=TRUE)
is.factor(r)

cls &lt;- data.frame(id=1:3, cover=c("forest", "water", "urban"))
levels(r) &lt;- cls
is.factor(r)
r

plot(r, col=c("green", "blue", "light gray"))
text(r, digits=3, cex=.75, halo=TRUE)

# raster starts at 3
x &lt;- r + 2
is.factor(x)

# Multiple categories
d &lt;- data.frame(id=3:5, cover=cls[,2], letters=letters[1:3], value=10:12)
levels(x) &lt;- d
x

# get current index
activeCat(x)
# set index 
activeCat(x) &lt;- 3
activeCat(x)
activeCat(x) &lt;- "letters"
plot(x, col=c("green", "blue", "light gray"))
text(x, digits=3, cex=.75, halo=TRUE)

r &lt;- as.numeric(x)
r

p &lt;- as.polygons(x)
plot(p, "letters", col=c("green", "blue", "light gray"))
</code></pre>


</div>
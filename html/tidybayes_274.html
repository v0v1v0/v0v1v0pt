<div class="container">

<table style="width: 100%;"><tr>
<td>x_at_y</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate lookup vectors for composing nested indices</h2>

<h3>Description</h3>

<p>Generates a lookup vector such that <code>x_at_y(x, y)[y] == x</code>. Particularly useful
for generating lookup tables for nested indices in conjunction with <code>compose_data()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">x_at_y(x, y, missing = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Values in the resulting lookup vector. There should be only
one unique value of <code>x</code> for every corresponding value of <code>y</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Keys in the resulting lookup vector. Should be factors or integers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing</code></td>
<td>
<p>Missing levels from <code>y</code> will be filled in with this value
in the resulting lookup vector. Default <code>NA</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>x_at_y(x, y)</code> returns a vector <code>k</code> such that <code>k[y] == x</code>. It also
fills in missing values in <code>y</code>: if <code>y</code> is an integer, <code>k</code> will contain
entries for all values from <code>1</code> to <code>max(y)</code>; if <code>y</code> is a factor,
<code>k</code> will contain entries for all values from <code>1</code> to <code>nlevels(y)</code>.
Missing values are replaced with <code>missing</code> (default <code>NA</code>).
</p>


<h3>Author(s)</h3>

<p>Matthew Kay
</p>


<h3>See Also</h3>

<p><code>compose_data()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(magrittr)

df = data.frame(
  plot = factor(paste0("p", rep(1:8, times = 2))),
  site = factor(paste0("s", rep(1:4, each = 2, times = 2)))
)

# turns site into a nested index: site[p] gives the site for plot p
df %&gt;%
  compose_data(site = x_at_y(site, plot))

</code></pre>


</div>
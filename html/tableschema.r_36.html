<div class="container">

<table style="width: 100%;"><tr>
<td>Schema.load</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Instantiate <code>Schema</code> class</h2>

<h3>Description</h3>

<p>Factory method to instantiate <code>Schema</code> class. 
This method is async and it should be used with <code>value</code> keyword from 
<a href="https://CRAN.R-project.org/package=future">future</a> package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Schema.load(descriptor, strict=FALSE, caseInsensitiveHeaders = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>descriptor</code></td>
<td>
<p>schema descriptor, a JSON string, URL or file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strict</code></td>
<td>
<p>flag to alter validation behaviour:
</p>

<ul>
<li>
<p>if <code>FALSE</code> error will not be raised and all error will be collected in <code>schema$errors</code>
</p>
</li>
<li>
<p>if <code>TRUE</code> any validation error will be raised immediately
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>caseInsensitiveHeaders</code></td>
<td>
<p>default is set to <code>FALSE</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>Schema</code> class object
</p>


<h3>See Also</h3>

<p><code>Schema</code>, <a href="https://specs.frictionlessdata.io//table-schema/">Table Schema Specifications</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">SCHEMA &lt;- '{"fields": [
  {"name": "id", "type": "string", "constraints": {"required": true}},
  {"name": "height", "type": "number"},
  {"name": "age", "type": "integer"},
  {"name": "name", "type": "string", "constraints": {"required": true}},
  {"name": "occupation", "type": "string"}
  ]}'

# instantiate Schema class
def  = Schema.load(descriptor = SCHEMA)
schema = future::value(def)

# correct number of fields
length(schema$fields)

# correct field names
schema$fieldNames

# convert row
row = list('string', '10.0', '1', 'string', 'string')
castRow = schema$castRow(row)
castRow

SCHEMA_MIN &lt;- '{
"fields": [
  {"name": "id"},
  {"name": "height"}
  ]}'

# load schema
def2  = Schema.load(descriptor = SCHEMA_MIN)
schema2 = future::value(def2)
  
# set default types if not provided
schema2$fields[[1]]$type
schema2$fields[[2]]$type

# fields are not required by default
schema2$fields[[1]]$required
schema2$fields[[2]]$required


#work in strict mode
descriptor = '{"fields": [{"name": "name", "type": "string"}]}'
def3  = Schema.load(descriptor = descriptor, strict = TRUE)
schema3 = future::value(def3)
schema3$valid

# work in non-strict mode
descriptor = '{"fields": [{"name": "name", "type": "string"}]}'
def4 = Schema.load(descriptor = descriptor, strict = FALSE)
schema4 = future::value(def4)
schema4$valid

# work with primary/foreign keys as arrays
descriptor2 = '{
"fields": [{"name": "name"}],
"primaryKey": ["name"],
"foreignKeys": [{
  "fields": ["parent_id"],
  "reference": {"resource": "resource", "fields": ["id"]}
}]}'

def5 = Schema.load(descriptor2)
schema5 = future::value(def5)

schema5$primaryKey
schema5$foreignKeys


# work with primary/foreign keys as string
descriptor3 = '{
"fields": [{"name": "name"}],
"primaryKey": "name",
"foreignKeys": [{
  "fields": "parent_id",
  "reference": {"resource": "resource", "fields": "id"}
}]}'

def6 = Schema.load(descriptor3)
schema6 = future::value(def6)
schema6$primaryKey
schema6$foreignKeys

</code></pre>


</div>
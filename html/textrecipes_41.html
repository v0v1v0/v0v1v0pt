<div class="container">

<table style="width: 100%;"><tr>
<td>step_stem</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Stemming of Token Variables</h2>

<h3>Description</h3>

<p><code>step_stem()</code> creates a <em>specification</em> of a recipe step that will convert a
<code>token</code> variable to have its stemmed version.
</p>


<h3>Usage</h3>

<pre><code class="language-R">step_stem(
  recipe,
  ...,
  role = NA,
  trained = FALSE,
  columns = NULL,
  options = list(),
  custom_stemmer = NULL,
  skip = FALSE,
  id = rand_id("stem")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>recipe</code></td>
<td>
<p>A recipe object. The step will be added to the
sequence of operations for this recipe.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>One or more selector functions to choose which
variables are affected by the step. See <code>recipes::selections()</code>
for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>role</code></td>
<td>
<p>Not used by this step since no new variables are
created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trained</code></td>
<td>
<p>A logical to indicate if the quantities for
preprocessing have been estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columns</code></td>
<td>
<p>A character string of variable names that will
be populated (eventually) by the <code>terms</code> argument. This is <code>NULL</code>
until the step is trained by <code>recipes::prep.recipe()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>options</code></td>
<td>
<p>A list of options passed to the stemmer function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custom_stemmer</code></td>
<td>
<p>A custom stemming function. If none is provided it will
default to "SnowballC".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip</code></td>
<td>
<p>A logical. Should the step be skipped when the
recipe is baked by <code>recipes::bake.recipe()</code>? While all operations are baked
when <code>recipes::prep.recipe()</code> is run, some operations may not be able to be
conducted on new data (e.g. processing the outcome variable(s)).
Care should be taken when using <code>skip = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>A character string that is unique to this step to identify it.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Words tend to have different forms depending on context, such as organize,
organizes, and organizing. In many situations it is beneficial to have these
words condensed into one to allow for a smaller pool of words. Stemming is
the act of chopping off the end of words using a set of heuristics.
</p>
<p>Note that the stemming will only be done at the end of the word and will
therefore not work reliably on ngrams or sentences.
</p>


<h3>Value</h3>

<p>An updated version of <code>recipe</code> with the new step added
to the sequence of existing steps (if any).
</p>


<h3>Tidying</h3>

<p>When you <code>tidy()</code> this step, a tibble with columns <code>terms</code>
(the selectors or variables selected) and <code>is_custom_stemmer</code> (indicate if
custom stemmer was used).
</p>


<h3>Case weights</h3>

<p>The underlying operation does not allow for case weights.
</p>


<h3>See Also</h3>

<p><code>step_tokenize()</code> to turn characters into <code>tokens</code>
</p>
<p>Other Steps for Token Modification: 
<code>step_lemma()</code>,
<code>step_ngram()</code>,
<code>step_pos_filter()</code>,
<code>step_stopwords()</code>,
<code>step_tokenfilter()</code>,
<code>step_tokenmerge()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(recipes)
library(modeldata)
data(tate_text)

tate_rec &lt;- recipe(~., data = tate_text) %&gt;%
  step_tokenize(medium) %&gt;%
  step_stem(medium)

tate_obj &lt;- tate_rec %&gt;%
  prep()

bake(tate_obj, new_data = NULL, medium) %&gt;%
  slice(1:2)

bake(tate_obj, new_data = NULL) %&gt;%
  slice(2) %&gt;%
  pull(medium)

tidy(tate_rec, number = 2)
tidy(tate_obj, number = 2)

# Using custom stemmer. Here a custom stemmer that removes the last letter
# if it is a "s".
remove_s &lt;- function(x) gsub("s$", "", x)

tate_rec &lt;- recipe(~., data = tate_text) %&gt;%
  step_tokenize(medium) %&gt;%
  step_stem(medium, custom_stemmer = remove_s)

tate_obj &lt;- tate_rec %&gt;%
  prep()

bake(tate_obj, new_data = NULL, medium) %&gt;%
  slice(1:2)

bake(tate_obj, new_data = NULL) %&gt;%
  slice(2) %&gt;%
  pull(medium)
</code></pre>


</div>
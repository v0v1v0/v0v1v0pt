<div class="container">

<table style="width: 100%;"><tr>
<td>schema-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The <code>schema</code> class (S4) and its methods</h2>

<h3>Description</h3>

<p>A <code>schema</code> stores the information of where which information is stored
in a table of data.
</p>


<h3>Slots</h3>


<dl>
<dt><code>cluster</code></dt>
<dd>
<p>[<code>list(1)</code>]<br> description of
<code>clusters</code> in the table.</p>
</dd>
<dt><code>format</code></dt>
<dd>
<p>[<code>list(1)</code>]<br> description of the table
<code>format</code></p>
</dd>
<dt><code>variables</code></dt>
<dd>
<p>[<code>named list(.)</code>]<br> description of
<code>identifying</code> and <code>observed</code>
variables.</p>
</dd>
</dl>
<h3>Setting up schema descriptions</h3>

<p>This section outlines the currently
recommended strategy for setting up schema descriptions. For example tables
and the respective schemas, see the vignette.
</p>
 <ol>
<li> <p><em>Variables</em>: Clarify which are the identifying
variables and which are the observed variables. Make sure not to mistake a
listed observed variable as identifying variable.
</p>
</li>
<li> <p><em>Clusters</em>: Determine whether there are clusters and if so, find
the origin (top left cell) of each cluster and provide the required
information in <code>setCluster(top = ..., left =
  ...)</code>. It is advised to treat a table that contains meta-data in the top
rows as cluster, as this is often the case with implicit variables. All
variables need to be specified in each cluster (in case clusters are all
organised in the same arrangement), or <code>relative = TRUE</code> can be used.
Data may be organised into clusters a) whenever a set of variables occurs
more than once in the same table, nested into another variable, or b) when
the data are organised into separate spreadsheets or files according to one
of the variables (depending on the context, these issues can also be solved
differently). In both cases the variable responsible for clustering (the
cluster ID) can be either an identifying variable, or a categorical
observed variable: </p>

<ul>
<li>
<p> in case the cluster ID is an identifying variable, provide its name
in <code>setCluster(id = ...)</code> and specify it as an
identifying variable (<code>setIDVar</code>)
</p>
</li>
<li>
<p> in case it is a observed variable, provide simply
<code>setCluster(..., id = "observed")</code>. </p>
</li>
</ul>
</li>
<li> <p><em>Meta-data</em>: Provide potentially information about the format
(<code>setFormat</code>).
</p>
</li>
<li> <p><em>Identifying variables</em>: Determine the following: </p>

<ul>
<li>
<p> is the variable available at all? This is particularly important when
the data are split up into tables that are in spreadsheets or files. Often
the variable that splits up the data (and thus identifies the clusters) is
not explicitly available in the table anymore. In such a case, provide the
value in <code>setIDVar(..., value = ...)</code>.
</p>
</li>
<li>
<p> all columns in which the variable values sit.
</p>
</li>
<li>
<p> in case the variable is in several columns, determine additionally
the row in which its values sit. In this case, the values will look like
they are part of a header.
</p>
</li>
<li>
<p> in case the variable must be split off of another column, provide a
regular expression that results in the target subset via
<code>setIDVar(..., split = ...)</code>.
</p>
</li>
<li>
<p> in case the variable is distinct from the main table, provide the
explicit (non-relative) position and set
<code>setIDVar(..., distinct = TRUE)</code>. </p>
</li>
</ul>
</li>
<li> <p><em>Observed variable</em>: Determine the following: </p>

<ul>
<li>
<p> all columns in which the values of the variable sit.
</p>
</li>
<li>
<p> the unit and conversion factor.
</p>
</li>
<li>
<p> in case the variable is not tidy, go through the following cases one
after the other: </p>

<ul>
<li>
<p> in case the variable is nested in a wide identifying variable,
determine in addition to the columns in which the values sit also the rows
in which the <em>variable name</em> sits.
</p>
</li>
<li>
<p> in case the names of the variable are given as a value of an
identifying variable, give the column name as
<code>setObsVar(..., key = ...)</code>, together with the name
of the respective observed variable (as it appears in the table) in
<code>values</code>.
</p>
</li>
<li>
<p> in case the name of the variable is the ID of clusters, specify
<code>setObsVar(..., key = "cluster", value = ...)</code>,
where <code>values</code> has the cluster number the variable refers to. </p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</div>
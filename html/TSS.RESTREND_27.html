<div class="container">

<table style="width: 100%;"><tr>
<td>TSSRattribution</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Vegetation change attribution using the Time Series Segmentation of Residual Trends (MAIN FUNCTION)</h2>

<h3>Description</h3>

<p>This is a wrapper function around the TSS-RESTREND main function that dows additional attribution.
It measues the Observed vegetation change, land use, climate change and climate varibility.
Unlike TSSRESTREND function, this requires both temperature and precitation data fo work.
</p>


<h3>Usage</h3>

<pre><code class="language-R">TSSRattribution(
  CTSR.VI,
  CTSR.RF,
  CTSR.TM,
  max.acp,
  max.osp,
  C4frac = 0,
  sig = 0.05,
  season = "none",
  exclude = 0,
  allow.negative = FALSE,
  allowneg.retest = FALSE,
  h = 0.15,
  returnmodels = FALSE,
  AnnualRes = FALSE,
  SkipError = TRUE,
  retnonsig = TRUE,
  splitclim = TRUE,
  cliwindow = 20,
  CO2 = FALSE,
  refyear = 1980
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>CTSR.VI</code></td>
<td>
<p>Complete Monthly Time Series of Vegetation Index values.
An object of class <code>'ts'</code> object without NA's.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CTSR.RF</code></td>
<td>
<p>Complete Time Series of Rainfall. An object of class 'ts' object without NA's
and be the same length and cover the same time range as CTSR.VI.
If ACP.table is provided, CTSR.RF will be automitaclly calculated using the
<code>ACP.calculator</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CTSR.TM</code></td>
<td>
<p>Complete Time Series of temperature. An object of class 'ts' object without NA's
and be the same length and cover the same time range as CTSR.VI.  Default (CTSR.TM=NULL).
If ACT.table is provided, CTSR.RF will be automitaclly calculated using the
<code>ACP.calculator</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.acp</code></td>
<td>
<p>The max accumuation period. Must be an integer &gt; 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.osp</code></td>
<td>
<p>The max offset period. Must be an integer &gt;1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>C4frac</code></td>
<td>
<p>The fraction of vegetation that follows the C4 photosynthetic pathway, between 0 and 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sig</code></td>
<td>
<p>Significance of all the functions. defualt sig=0.05</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>season</code></td>
<td>
<p>See <code>bfast</code>. This season value only applies to bfast done using the CTS
VPR. if a non VPR adjusted BFAST is performed.a harmonic season is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude</code></td>
<td>
<p>A numberic vector containg months excluded from breakpoint detection.  This was included to
allow sensor transitions to be masked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow.negative</code></td>
<td>
<p>If true, will not preference positive slope in either CTSR or VI calculations. default=FALSE is set
because negative associations between rainfall and vegetation in water limited ecosystems is unexpected
If temperature data is included then this paramter is forced to TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allowneg.retest</code></td>
<td>
<p>default=FALSE
If temperature data is provided but found to not be significant then a retest is performed.
This paramter is to allow negative on re-test.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>
<p>See <code>bfast</code>, The.minimal segment size between potentially detected breaks in the trend model
given as fraction relative to the sample size (i.e. the minimal number of observations in each segment
divided by the total length of the timeseries. Default h = 0.15.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnmodels</code></td>
<td>
<p>Return all the created models as well as the original data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AnnualRes</code></td>
<td>
<p>Report results in change per year. Defualt is False. Instead reports total change from the
start to the end of the time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SkipError</code></td>
<td>
<p>Bool, If TRUE will handle most errors and return a dataframe filled with NA's.
Usefull when processing large datasets to stop analysis failing on a single pixel.
Use with caution. Defualt=TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retnonsig</code></td>
<td>
<p>Bool. New in v0.3.0. Allows TSSRESTREND to return change estimates of values that filed the sig component in the residual analysis.
defualt FALSE will give the same result as eralier versions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>splitclim</code></td>
<td>
<p>Bool, If TRUE Climate will be split into climate change and climate varibility as
per Burrell et al., (2020). If FALSE. will just return climate as per IPCC:
Chapter 3: Desertification in the IPCC Special Report on Climate Change, Desertification,
Land Degradation, Sustainable Land Management, Food Security, and Greenhouse gas fluxes in Terrestrial Ecosystems.
Defualt=True.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cliwindow</code></td>
<td>
<p>The size of the window in years to be used for calculating climate change.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CO2</code></td>
<td>
<p>A timeseries containg the CO2 concentration. The defualt is CMIP5 RCP8.5</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refyear</code></td>
<td>
<p>The Year that acts as a baseline for CO2. All vegetation values will be scaled #
to the CO2 concentration of this year. Defulat is 1980. THis function will pick the
first value in the selected year,</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><b>tacp</b>
The accumulation period for the annual max time series temperature
</p>


<h3>Author(s)</h3>

<p>Arden Burrell, aburrell@whrc.org
</p>


</div>
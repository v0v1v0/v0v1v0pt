<div class="container">

<table style="width: 100%;"><tr>
<td>test_equality</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute equality test between correlation coefficient estimates at two time points</h2>

<h3>Description</h3>

<p>This function tests whether smoothed correlation values at two time points are equal (H0) or not.
The test is described page 341 in Choi &amp; Shin (2021).
</p>


<h3>Usage</h3>

<pre><code class="language-R">test_equality(
  tcor_obj,
  t1 = 1,
  t2 = nrow(tcor_obj),
  test = c("student", "chi2")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tcor_obj</code></td>
<td>
<p>the output of a call to <code>tcor()</code> with <code>CI = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t1</code></td>
<td>
<p>the first time point used by the test (by default, the first time point in the time series).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t2</code></td>
<td>
<p>the second time point used by the test (by default, the last time point in the time series).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>a character string indicating which test to use ("student", the default; or "chi2").</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Two different test statistics can be used, one is asymptotically Student-t distributed under H0 and one is chi-square distributed.
In practice, it seems to give very similar results.
</p>


<h3>Value</h3>

<p>a data.frame with the result of the test, including the effect size (<code>delta_r = r[t2] - r[t1]</code>).
</p>


<h3>See Also</h3>

<p><code>test_ref()</code>, <code>tcor()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Simple example

res &lt;- with(stockprice, tcor(x = SP500, y = FTSE100, t = DateID, h = 50, CI = TRUE))
test_equality(res)

## Chi2 instead of Student's t-test

test_equality(res, test = "chi2")


## Time point can be dates or indices (mixing possible) but output as in input data

test_equality(res, t1 = "2000-04-04", t2 = 1000)
res[1000, "t"] ## t2 matches with date in `res`
stockprice[1000, "DateID"] ## t2 does not match with date `stockprice` due to missing values


## It could be useful to use `keep.missing = TRUE` for index to match original data despite NAs

res2 &lt;- with(stockprice, tcor(x = SP500, y = FTSE100, t = DateID,
                              h = 50, CI = TRUE, keep.missing = TRUE))
test_equality(res2, t1 = "2000-04-04", t2 = 1000)
res[1000, "t"] ## t2 matches with date in `res`
stockprice[1000, "DateID"] ## t2 does match with date `stockprice` despite missing values

</code></pre>


</div>
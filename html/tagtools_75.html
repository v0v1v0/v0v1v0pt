<div class="container">

<table style="width: 100%;"><tr>
<td>rough_cal_3d</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate scale factors and offsets</h2>

<h3>Description</h3>

<p>This function is used to estimate scale factors and offsets for measurements from a triaxial field sensor. This function estimates the scale factor needed to make the magnitude of X close to the expected field strength. It then calls fix_offset_3d to correct any offset errors in X. This function does not try to optimize the results. See spherical_cal for a more powerful data-driven calibration method.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rough_cal_3d(X, fstr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>A sensor structure or matrix containing measurements from a triaxial field sensor such as an accelerometer or magnetometer. X can be in any units and frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fstr</code></td>
<td>
<p>The expected field strength at the measurement location in the same units as X</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with 2 elements:
</p>

<ul>
<li>
<p><strong>X: </strong> A sensor structure or matrix containing the adjusted triaxial sensor measurements. It is the same size and has the same sampling rate and units as the input data. If the input is a sensor structure, the output will be also.
</p>
</li>
<li>
<p><strong>G: </strong> A list of calibration information containing one field: G$poly, a 3x2 matrix. Rows correspond to X,Y,Z axes. with one column for each of the X, Y, Z axes. The first column of G$poly contains scale factors and second column of G$poly is the offset added to each column of X after scaling. 
</p>
</li>
</ul>
<h3>Note</h3>

<p>This function requires a lot of data as it is looking for extreme values in each axis. A minimum data size of 1000 samples should be used. This function is only usable for field sensors. It will not work for gyroscope data.
</p>


<h3>Examples</h3>

<pre><code class="language-R">BW &lt;- beaked_whale
plot(x = c(1:length(BW$M$data)), y = BW$M$data)
rcal &lt;- rough_cal_3d(BW$M$data, fstr = 38.2)
cal &lt;- list(x = c(1:length(rcal$X)), y = rcal$X)
plot(cal)
</code></pre>


</div>
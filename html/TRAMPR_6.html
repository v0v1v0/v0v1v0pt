<div class="container">

<table style="width: 100%;"><tr>
<td>build.knowns</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Automatically Build Knowns Database</h2>

<h3>Description</h3>

<p>This function uses several filters to select likely knowns, and
construct a <code>TRAMPknowns</code> object from a
<code>TRAMPsamples</code> object.  Samples are considered to be
“potential knowns” if they have data for an adequate number of
enzyme/primer combinations, and if for each combination they have
either a single peak, or a peak that is “distinct enough” from
any other peaks.
</p>


<h3>Usage</h3>

<pre><code class="language-R">build.knowns(d, min.ratio=3, min.comb=NA, restrict=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>A <code>TRAMPsamples</code> object, containing samples from which
to build the knowns database.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.ratio</code></td>
<td>
<p>Minimum ratio of maximum to second highest peak to
accept known (see Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.comb</code></td>
<td>
<p>Minimum number of enzyme/primer combinations required
for each known (see Details for behaviour of default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>restrict</code></td>
<td>
<p>Logical: Use only cases where <code>d$info$species</code> is
non-blank?  (These are assumed to come from samples of a known
species.  However, it is not guaranteed that all samples with data for
<code>species</code> will become knowns; if they fail either the
<code>min.ratio</code> or <code>min.comb</code> checks they will be excluded.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>TRAMPknowns</code>
(e.g. <code>cluster.pars</code>, <code>file.pat</code> and any additional
objects).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For all samples and enzyme/primer combinations, the ratio of the
largest to the second largest peak is calculated.  If it is greater
than <code>min.ratio</code>, then that combination is accepted.  If the
sample has at least <code>min.comb</code> valid enzyme/primer combinations,
then that sample is included in the knowns database.  If
<code>min.comb</code> is <code>NA</code> (the default), then <em>every</em>
enzyme/primer combination present in the data is required.
</p>


<h3>Value</h3>

<p>A new <code>TRAMPknowns</code> object.  It will generally be neccessary to
edit this object; see <code>read.TRAMPknowns</code> for details on
how to write, edit, and read back a modified object.
</p>


<h3>Note</h3>

<p>If two peaks have the same height, then using <code>min.ratio=1</code> will
not allow the entry as part of the knowns database; use
<code>min.ratio=0</code> instead if this is desired.  In this case, the peak
chosen is unspecified.
</p>
<p>Note that this function is sensitive to data quality.  In particular
split peaks may cause a sample not to be added.  These samples may be
manually added using <code>add.known</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(demo.samples)
demo.knowns.auto &lt;- build.knowns(demo.samples, min.comb=4)
plot(demo.knowns.auto, cex=.75)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>export</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>export</h2>

<h3>Description</h3>

<p>Export andromeda generated by computePathways
object to sharable csv-files and/or a zip archive.
</p>


<h3>Usage</h3>

<pre><code class="language-R">export(
  andromeda,
  outputPath,
  ageWindow = 10,
  minCellCount = 5,
  censorType = "minCellCount",
  archiveName = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>andromeda</code></td>
<td>
<p>(<code>Andromeda::andromeda()</code>)
Andromeda object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputPath</code></td>
<td>
<p>(<code>character(1)</code>)<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ageWindow</code></td>
<td>
<p>(<code>integer(n)</code>: <code>10</code>)<br>
Number of years to bin age groups into. It may also be a vector of integers.
I.e. <code>c(0, 18, 150)</code> which will results in age group <code>0-18</code> which includes
subjects <code style="white-space: pre;">⁠&lt; 19⁠</code>. And age group <code>18-150</code> which includes subjects <code style="white-space: pre;">⁠&gt; 18⁠</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minCellCount</code></td>
<td>
<p>(<code>integer(1)</code>: <code>5</code>)<br>
Minimum count required per pathway. Censors data below <code>x</code> as <code style="white-space: pre;">⁠&lt;x⁠</code>. This
minimum value will carry over to the sankey diagram and sunburst plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>censorType</code></td>
<td>
<p>(<code>character(1)</code>)<br></p>

<dl>
<dt><code>"minCellCount"</code></dt>
<dd>
<p>Censors pathways &lt;<code>minCellCount</code> to <code>minCellCount</code>.</p>
</dd>
<dt><code>"remove"</code></dt>
<dd>
<p>Censors pathways &lt;<code>minCellCount</code> by removing them completely.</p>
</dd>
<dt><code>"mean"</code></dt>
<dd>
<p>Censors pathways &lt;<code>minCellCount</code> to the mean of all frequencies below <code>minCellCount</code></p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>archiveName</code></td>
<td>
<p>(<code>character(1)</code>: <code>NULL</code>)<br>
If not <code>NULL</code> adds the exported files to a ZIP-file with the specified archive name.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>(<code>invisible(NULL)</code>)
</p>


<h3>Examples</h3>

<pre><code class="language-R">
ableToRun &lt;- all(
  require("CirceR", character.only = TRUE, quietly = TRUE),
  require("CDMConnector", character.only = TRUE, quietly = TRUE),
  require("TreatmentPatterns", character.only = TRUE, quietly = TRUE),
  require("dplyr", character.only = TRUE, quietly = TRUE)
)

if (ableToRun) {
  library(TreatmentPatterns)
  library(CDMConnector)
  library(dplyr)

  withr::local_envvar(
    R_USER_CACHE_DIR = tempfile(),
    EUNOMIA_DATA_FOLDER = Sys.getenv("EUNOMIA_DATA_FOLDER", unset = tempfile())
  )

  tryCatch({
    if (Sys.getenv("skip_eunomia_download_test") != "TRUE") {
      CDMConnector::downloadEunomiaData(overwrite = TRUE)
    }
  }, error = function(e) NA)

  con &lt;- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir())
  cdm &lt;- cdmFromCon(con, cdmSchema = "main", writeSchema = "main")

  cohortSet &lt;- readCohortSet(
    path = system.file(package = "TreatmentPatterns", "exampleCohorts")
  )

  cdm &lt;- generateCohortSet(
    cdm = cdm,
    cohortSet = cohortSet,
    name = "cohort_table"
  )

  cohorts &lt;- cohortSet %&gt;%
    # Remove 'cohort' and 'json' columns
    select(-"cohort", -"json") %&gt;%
    mutate(type = c("event", "event", "event", "event", "exit", "event", "event", "target")) %&gt;%
    rename(
      cohortId = "cohort_definition_id",
      cohortName = "cohort_name",
    ) %&gt;%
    select("cohortId", "cohortName", "type")

  outputEnv &lt;- computePathways(
    cohorts = cohorts,
    cohortTableName = "cohort_table",
    cdm = cdm
  )

  export(
    andromeda = outputEnv,
    outputPath = tempdir()
  )

  Andromeda::close(outputEnv)
  DBI::dbDisconnect(con, shutdown = TRUE)
}

</code></pre>


</div>
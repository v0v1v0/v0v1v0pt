<div class="container">

<table style="width: 100%;"><tr>
<td>test_package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Test a package during R CMD check or after installation</h2>

<h3>Description</h3>

<p>Run all tests in an installed package. Throw an error and print all failed test
results when one or more tests fail if not in interactive mode (e.g. when
R CMD check tests a package). This function is intended to be
used by <code>R CMD check</code> or by a user that installed a package that
uses the <span class="pkg">tinytest</span> test infrastructure.
</p>


<h3>Usage</h3>

<pre><code class="language-R">test_package(
  pkgname,
  testdir = "tinytest",
  lib.loc = NULL,
  at_home = FALSE,
  ncpu = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkgname</code></td>
<td>
<p><code>[character]</code> scalar. Name of the package, as in the <code>DESCRIPTION</code> file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>testdir</code></td>
<td>
<p><code>[character]</code> scalar. Path to installed directory. By default 
tinytest assumes that test files are in <code>inst/tinytest/</code>, which means
that after installation and thus during <code>R CMD check</code> they are in 
<code>tinytest/</code>. See details for using alternate paths.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p><code>[character]</code> scalar. location where the package is installed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>at_home</code></td>
<td>
<p><code>[logical]</code> scalar. Are we at home? (see Details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncpu</code></td>
<td>
<p>A positive integer, or a <code>makeCluster</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra arguments passed to <code>run_test_dir</code> (e.g. <code>ncpu</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>interactive()</code>, a <code>tinytests</code> object. If not
<code>interactive()</code>, an error is thrown when at least one test fails.
</p>


<h3>Details</h3>

<p>We set <code>at_home=FALSE</code> by default so <code>R CMD check</code> will run the
same as at CRAN. See the package vignette (Section 4) for tips on how to set
up the package structure.
<code>vignette("using_tinytest",package="tinytest")</code>.
</p>
<p>Package authors who want to avoid installing tests with the package can
create a directory under <code>tests</code>. If the test directoy is called
<code>"tests/foo"</code>, use <code>test_package("pkgname", testdir="foo")</code> in
<code>tests/tinytest.R</code>.
</p>


<h3>See Also</h3>

<p><code>setup_tinytest</code>
</p>
<p>Other test-files: 
<code>build_install_test()</code>,
<code>exit_file()</code>,
<code>run_test_dir()</code>,
<code>run_test_file()</code>,
<code>summary.tinytests()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Create a file with the following content, to use
# tinytest as your unit testing framework:
  if (requireNamespace("tinytest", quietly=TRUE))
    tinytest::test_package("your package name")

## End(Not run)
</code></pre>


</div>
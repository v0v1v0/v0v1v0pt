<div class="container">

<table style="width: 100%;"><tr>
<td>nn_utils_rnn_pad_packed_sequence</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Pads a packed batch of variable length sequences.</h2>

<h3>Description</h3>

<p>It is an inverse operation to <code>nn_utils_rnn_pack_padded_sequence()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">nn_utils_rnn_pad_packed_sequence(
  sequence,
  batch_first = FALSE,
  padding_value = 0,
  total_length = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sequence</code></td>
<td>
<p>(PackedSequence): batch to pad</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch_first</code></td>
<td>
<p>(bool, optional): if <code>True</code>, the output will be in “B x T x *'
format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>padding_value</code></td>
<td>
<p>(float, optional): values for padded elements.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_length</code></td>
<td>
<p>(int, optional): if not <code>NULL</code>, the output will be padded to
have length <code>total_length</code>. This method will throw <code>ValueError</code>
if <code>total_length</code> is less than the max sequence length in
<code>sequence</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The returned Tensor's data will be of size <code style="white-space: pre;">⁠T x B x *⁠</code>, where <code>T</code> is the length
of the longest sequence and <code>B</code> is the batch size. If <code>batch_first</code> is <code>TRUE</code>,
the data will be transposed into <code style="white-space: pre;">⁠B x T x *⁠</code> format.
</p>


<h3>Value</h3>

<p>Tuple of Tensor containing the padded sequence, and a Tensor
containing the list of lengths of each sequence in the batch.
Batch elements will be re-ordered as they were ordered originally when
the batch was passed to <code>nn_utils_rnn_pack_padded_sequence()</code> or
<code>nn_utils_rnn_pack_sequence()</code>.
</p>


<h3>Note</h3>

<p><code>total_length</code> is useful to implement the
<code style="white-space: pre;">⁠pack sequence -&gt; recurrent network -&gt; unpack sequence⁠</code> pattern in a
<code>nn_module</code> wrapped in <code>~torch.nn.DataParallel</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (torch_is_installed()) {
seq &lt;- torch_tensor(rbind(c(1, 2, 0), c(3, 0, 0), c(4, 5, 6)))
lens &lt;- c(2, 1, 3)
packed &lt;- nn_utils_rnn_pack_padded_sequence(seq, lens,
  batch_first = TRUE,
  enforce_sorted = FALSE
)
packed
nn_utils_rnn_pad_packed_sequence(packed, batch_first = TRUE)
}
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>IRT.WrightMap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Wright Map for Item Response Models by Using the <span class="pkg">WrightMap</span> Package
</h2>

<h3>Description</h3>

<p>This function creates a Wright map and works as a wrapper to the
<code>wrightMap</code> function in
the <span class="pkg">WrightMap</span> package. The arguments <code>thetas</code> and
<code>thresholds</code> are automatically generated from fitted
objects in <span class="pkg">TAM</span>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'tam.mml'
IRT.WrightMap(object, prob.lvl=.5, type="PV", ...)

## S3 method for class 'tamaan'
IRT.WrightMap(object, prob.lvl=.5, type="PV", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>

<p>Object of class <code>tam.mml</code> or class <code>tamaan</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob.lvl</code></td>
<td>
<p>Requested probability level of thresholds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Type of person parameter estimate. <code>"PV"</code> (plausible values),
<code>"WLE"</code> (weighted likelihood estimates) and
<code>"Pop"</code> (population trait distribution) can be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Further arguments to be passed in the
<code>wrightMap</code> (<span class="pkg">WrightMap</span>) function.
See Examples.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A Wright map is only created for models with an assumed normal distribution.
Hence, not for all models of the <code>tamaan</code> functions
Wright maps are created.
</p>


<h3>Value</h3>

<p>A Wright map generated by the <span class="pkg">WrightMap</span> package.
</p>


<h3>Author(s)</h3>

<p>The <code>IRT.WrightMap</code> function is based on the
<code>WrightMap::wrightMap</code> function
in the <span class="pkg">WrightMap</span> package.
</p>


<h3>See Also</h3>

<p>See the <code>WrightMap::wrightMap</code> function in
the <span class="pkg">WrightMap</span> package.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(WrightMap)

#############################################################################
# EXAMPLE 1: Unidimensional models dichotomous data
#############################################################################

data(data.sim.rasch)
str(data.sim.rasch)
dat &lt;- data.sim.rasch

# fit Rasch model
mod1 &lt;- TAM::tam.mml(resp=dat)
# Wright map
IRT.WrightMap( mod1 )
# some customized plots
IRT.WrightMap( mod1, show.thr.lab=FALSE, label.items=c(1:40), label.items.rows=3)

IRT.WrightMap( mod1,  show.thr.sym=FALSE, thr.lab.text=paste0("I",1:ncol(dat)),
     label.items="", label.items.ticks=FALSE)

#--- direct specification with wrightMap function
theta &lt;- TAM::tam.wle(mod1)$theta
thr &lt;- TAM::tam.threshold(mod1)

# default wrightMap plots
WrightMap::wrightMap( theta, thr, label.items.srt=90)
WrightMap::wrightMap( theta, t(thr), label.items=c("items") )

# stack all items below each other
thr.lab.text &lt;- matrix( "", 1, ncol(dat) )
thr.lab.text[1,] &lt;- colnames(dat)
WrightMap::wrightMap( theta, t(thr), label.items=c("items"),
       thr.lab.text=thr.lab.text, show.thr.sym=FALSE )

#############################################################################
# EXAMPLE 2: Unidimensional model polytomous data
#############################################################################

data( data.Students, package="CDM")
dat &lt;- data.Students

# fit generalized partial credit model using the tamaan function
tammodel &lt;- "
LAVAAN MODEL:
  SC=~ sc1__sc4
  SC ~~ 1*SC
    "
mod1 &lt;- TAM::tamaan( tammodel, dat )
# create item level colors
library(RColorBrewer)
ncat &lt;- 3               # number of category parameters
I &lt;- ncol(mod1$resp)    # number of items
itemlevelcolors &lt;- matrix(rep( RColorBrewer::brewer.pal(ncat, "Set1"), I),
        byrow=TRUE, ncol=ncat)
# Wright map
IRT.WrightMap(mod1, prob.lvl=.625, thr.sym.col.fg=itemlevelcolors,
     thr.sym.col.bg=itemlevelcolors, label.items=colnames( mod1$resp) )

#############################################################################
# EXAMPLE 3: Multidimensional item response model
#############################################################################

data( data.read, package="sirt")
dat &lt;- data.read

# fit three-dimensional Rasch model
Q &lt;- matrix( 0, nrow=12, ncol=3 )
Q[1:4,1] &lt;- Q[5:8,2] &lt;- Q[9:12,3] &lt;- 1
mod1 &lt;- TAM::tam.mml( dat, Q=Q, control=list(maxiter=20, snodes=1000)  )
summary(mod1)
# define matrix with colors for thresholds
c1 &lt;- matrix( c( rep(1,4), rep(2,4), rep(4,4)), ncol=1 )
# create Wright map using WLE
IRT.WrightMap( mod1, prob.lvl=.65, type="WLE", thr.lab.col=c1, thr.sym.col.fg=c1,
        thr.sym.col.bg=c1, label.items=colnames(dat) )
# Wright map using PV (the default)
IRT.WrightMap( mod1, prob.lvl=.65, type="PV" )
# Wright map using population distribution
IRT.WrightMap( mod1, prob.lvl=.65, type="Pop" )

#############################################################################
# EXAMPLE 4: Wright map for a multi-faceted Rasch model
#############################################################################

# This example is copied from
# http://wrightmap.org/post/107431190622/wrightmap-multifaceted-models

library(WrightMap)
data(data.ex10)
dat &lt;- data.ex10

#--- fit multi-faceted Rasch model
facets &lt;- dat[, "rater", drop=FALSE]  # define facet (rater)
pid &lt;- dat$pid  # define person identifier (a person occurs multiple times)
resp &lt;- dat[, -c(1:2)]  # item response data
formulaA &lt;- ~item * rater  # formula
mod &lt;- TAM::tam.mml.mfr(resp=resp, facets=facets, formulaA=formulaA, pid=dat$pid)

# person parameters
persons.mod &lt;- TAM::tam.wle(mod)
theta &lt;- persons.mod$theta
# thresholds
thr &lt;- TAM::tam.threshold(mod)
item.labs &lt;- c("I0001", "I0002", "I0003", "I0004", "I0005")
rater.labs &lt;- c("rater1", "rater2", "rater3")

#--- Plot 1: Item specific
thr1 &lt;- matrix(thr, nrow=5, byrow=TRUE)
WrightMap::wrightMap(theta, thr1, label.items=item.labs,
   thr.lab.text=rep(rater.labs, each=5))

#--- Plot 2: Rater specific
thr2 &lt;- matrix(thr, nrow=3)
WrightMap::wrightMap(theta, thr2, label.items=rater.labs,
   thr.lab.text=rep(item.labs,  each=3), axis.items="Raters")

#--- Plot 3a: item, rater and item*rater parameters
pars &lt;- mod$xsi.facets$xsi
facet &lt;- mod$xsi.facets$facet

item.par &lt;- pars[facet=="item"]
rater.par &lt;- pars[facet=="rater"]
item_rat &lt;- pars[facet=="item:rater"]

len &lt;- length(item_rat)
item.long &lt;- c(item.par, rep(NA, len - length(item.par)))
rater.long &lt;- c(rater.par, rep(NA, len - length(rater.par)))
ir.labs &lt;- mod$xsi.facets$parameter[facet=="item:rater"]

WrightMap::wrightMap(theta, rbind(item.long, rater.long, item_rat),
    label.items=c("Items",  "Raters", "Item*Raters"),
    thr.lab.text=rbind(item.labs, rater.labs, ir.labs), axis.items="")

#--- Plot 3b: item, rater and item*rater (separated by raters) parameters

# parameters item*rater
ir_rater &lt;- matrix(item_rat, nrow=3, byrow=TRUE)
# define matrix of thresholds
thr &lt;- rbind(item.par, c(rater.par, NA, NA), ir_rater)
# matrix with threshold labels
thr.lab.text &lt;- rbind(item.labs, rater.labs,
           matrix(item.labs, nrow=3, ncol=5, byrow=TRUE))

WrightMap::wrightMap(theta, thresholds=thr,
      label.items=c("Items", "Raters", "Item*Raters (R1)",
                           "Item*Raters (R2)", "Item*Raters (R3)"),
      axis.items="", thr.lab.text=thr.lab.text )

#--- Plot 3c: item, rater and item*rater (separated by items) parameters

# thresholds
ir_item &lt;- matrix(item_rat, nrow=5)
thr &lt;- rbind(item.par, c(rater.par, NA, NA), cbind(ir_item, NA, NA))
# labels
label.items &lt;- c("Items", "Raters", "Item*Raters\n (I1)", "Item*Raters \n(I2)",
     "Item*Raters \n(I3)", "Item*Raters \n (I4)", "Item*Raters \n(I5)")
thr.lab.text &lt;- rbind(item.labs,
          matrix(c(rater.labs, NA, NA), nrow=6, ncol=5, byrow=TRUE))

WrightMap::wrightMap(theta, thr,  label.items=label.items,
      axis.items="", thr.lab.text=thr.lab.text  )

## End(Not run)
</code></pre>


</div>
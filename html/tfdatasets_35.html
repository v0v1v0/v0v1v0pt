<div class="container">

<table style="width: 100%;"><tr>
<td>dataset_scan</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A transformation that scans a function across an input dataset</h2>

<h3>Description</h3>

<p>A transformation that scans a function across an input dataset
</p>


<h3>Usage</h3>

<pre><code class="language-R">dataset_scan(dataset, initial_state, scan_func)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>A tensorflow dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial_state</code></td>
<td>
<p>A nested structure of tensors, representing the initial
state of the accumulator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scan_func</code></td>
<td>
<p>A function that maps <code style="white-space: pre;">⁠(old_state, input_element)⁠</code> to
<code style="white-space: pre;">⁠(new_state, output_element)⁠</code>. It must take two arguments and return a
pair of nested structures of tensors. The <code>new_state</code> must match the
structure of <code>initial_state</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This transformation is a stateful relative of <code>dataset_map()</code>.
In addition to mapping <code>scan_func</code> across the elements of the input dataset,
<code>scan()</code> accumulates one or more state tensors, whose initial values are
<code>initial_state</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
initial_state &lt;- as_tensor(0, dtype="int64")
scan_func &lt;- function(state, i) list(state + i, state + i)
dataset &lt;- range_dataset(0, 10) %&gt;%
  dataset_scan(initial_state, scan_func)

reticulate::iterate(dataset, as.array) %&gt;%
  unlist()
# 0  1  3  6 10 15 21 28 36 45

## End(Not run)
</code></pre>


</div>
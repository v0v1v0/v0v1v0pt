<div class="container">

<table style="width: 100%;"><tr>
<td>build_install_test</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>build, install and test</h2>

<h3>Description</h3>

<p>Builds and installs the package in <code>pkgdir</code> under a temporary
directory.  Next, loads the package in a fresh R session and runs all the
tests. For this function to work the following system requirements are
necessary.
</p>

<ul>
<li>
<p><code>R CMD build</code> is available on your system
</p>
</li>
<li>
<p><code>Rscript</code> is available on your system
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">build_install_test(
  pkgdir = "./",
  testdir = "tinytest",
  pattern = "^test.*\\.[rR]$",
  at_home = TRUE,
  verbose = getOption("tt.verbose", 2),
  color = getOption("tt.pr.color", TRUE),
  ncpu = 1,
  remove_side_effects = TRUE,
  side_effects = FALSE,
  lc_collate = getOption("tt.collate", NA),
  keep_tempdir = FALSE,
  encoding = "unknown"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkgdir</code></td>
<td>
<p><code>[character]</code> Package directory</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>testdir</code></td>
<td>
<p><code>[character]</code> Name of directory under <code>pkgdir/inst</code>
containing test files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p><code>[character]</code> A regular expression that is used to find
scripts in <code>dir</code> containing tests (by default <code>.R</code> or <code>.r</code>
files starting with <code>test</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>at_home</code></td>
<td>
<p><code>[logical]</code> toggle local tests.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p><code>[logical]</code> toggle verbosity during execution</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p><code>[logical]</code> toggle colorize output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncpu</code></td>
<td>
<p><code>[numeric]</code> number of CPUs to use during the testing phase.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_side_effects</code></td>
<td>
<p><code>[logical]</code> toggle remove user-defined side
effects? See section on side effects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>side_effects</code></td>
<td>
<p><code>[logical|list]</code> Either a logical,
or a list of arguments to pass to <code>report_side_effects</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lc_collate</code></td>
<td>
<p><code>[character]</code> Locale setting used to sort the
test files into the order of execution. The default <code>NA</code> ensures
current locale is used. Set this e.g. to <code>"C"</code> to ensure bytewise
and more platform-independent sorting (see details in <code>run_test_dir</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_tempdir</code></td>
<td>
<p><code>[logical]</code> keep directory where the pkg is
installed and where tests are run? If <code>TRUE</code>, the directory is not
deleted and it's location is printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p><code>[character]</code> Encoding parameter passed to <code>parse</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>tinytests</code> object.
</p>


<h3>See Also</h3>

<p>Other test-files: 
<code>exit_file()</code>,
<code>run_test_dir()</code>,
<code>run_test_file()</code>,
<code>summary.tinytests()</code>,
<code>test_package()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
  ## If your package source directory is "./pkg" you can run
  build_install_test("pkg")

## End(Not run)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>runBatch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Batch analysis</h2>

<h3>Description</h3>

<p><code>runBatch</code> analyzes all image sequences in a specified
directory. Use this function when settings have been optimized
previously on a single or selection of movies/image sequences.
</p>


<h3>Usage</h3>

<pre><code class="language-R">runBatch(
  path,
  settings = NULL,
  dirnames = NULL,
  nImages = 1:30,
  pixelRange = NULL,
  threshold = -0.1,
  qthreshold = NULL,
  select = "dark",
  nn = NULL,
  incThres = NULL,
  plotOutput = FALSE,
  plotType = "trajectories",
  L = 20,
  R = 2,
  weight = c(1, 1, 1),
  autoThres = FALSE,
  perFrame = FALSE,
  methodBg = "mean",
  frames = NULL,
  saveAll = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>A character vector of path name that contains all directories
with image sequences.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>settings</code></td>
<td>
<p>Object of class 'tracked' containing all optimized settings
in attributes,
as obtained from <code>trackParticles</code>.
Alternatively, settings can be specified using arguments described below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dirnames</code></td>
<td>
<p>If not all image sequences should be
analyzed, specify which files to use as a character string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nImages</code></td>
<td>
<p>See <code>loadImages</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pixelRange</code></td>
<td>
<p>See <code>identifyParticles</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>See <code>identifyParticles</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>qthreshold</code></td>
<td>
<p>See <code>identifyParticles</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select</code></td>
<td>
<p>See <code>identifyParticles</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nn</code></td>
<td>
<p>Name of artificial neural net if apply it to images. Default
is <code>NULL</code>, resulting in no neural net being applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incThres</code></td>
<td>
<p>Minimum number of frames that a particle must be
present. By default, automated estimate is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotOutput</code></td>
<td>
<p>Default is <code>FALSE</code>. Set <code>TRUE</code> to plot results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotType</code></td>
<td>
<p>Default is 'trajectories'. Other options are 'sizes' and
'animation'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L</code></td>
<td>
<p>See <code>trackParticles</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>See <code>trackParticles</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>See <code>trackParticles</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>autoThres</code></td>
<td>
<p>See <code>identifyParticles</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perFrame</code></td>
<td>
<p>See <code>identifyParticles</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>methodBg</code></td>
<td>
<p>See <code>createBackground</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frames</code></td>
<td>
<p>See <code>identifyParticles</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>saveAll</code></td>
<td>
<p>Logical. Set <code>TRUE</code> to save for each image sequence the
full object obtained from <code>loadImages</code>. Default is FALSE.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Dataframe with estimated population size for each image sequence.
</p>


<h3>Author(s)</h3>

<p>Marjolein Bruijning, Caspar A. Hallmann &amp; Marco D. Visser
</p>


<h3>See Also</h3>

<p><code>loadImages</code>, <code>createBackground</code>,
<code>subtractBackground</code>, <code>identifyParticles</code>,
<code>trackParticles</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## Simulate 3 image sequences
wd &lt;- getwd()
folders &lt;- paste0(rep("images",3),1:3)
populations &lt;- c(15,25,50)
dir.create("./batchTest")
setwd("./batchTest")
for(i in 1:length(folders)){
  dir.create(folders[i])
  traj &lt;- simulTrajec(path=folders[i],
                      nframes=30,nIndividuals=populations[i],
                      h=0.01,rho=0.9,
                      sizes=runif(populations[i],0.004,0.006))
}
setwd(wd)
batchpath &lt;- "./batchTest"
results &lt;- runBatch(path=batchpath,
                    nImages=1:30,threshold=-0.1,select='dark',
                    pixelRange=c(1,100),L=50,R=3,
                    incThres=10)
results

## End(Not run)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>tar_source</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run R scripts.</h2>

<h3>Description</h3>

<p>Run all the R scripts in a directory
in the environment specified.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tar_source(
  files = "R",
  envir = targets::tar_option_get("envir"),
  change_directory = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>files</code></td>
<td>
<p>Character vector of file and directory paths
to look for R scripts to run. Paths must either be absolute
paths or must be relative to the current working directory
just before the function call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>Environment to run the scripts. Defaults to
<code>tar_option_get("envir")</code>, the environment of the pipeline.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>change_directory</code></td>
<td>
<p>Logical, whether to temporarily change
the working directory to the directory of each R script
before running it.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>tar_source()</code> is a convenient way to load R scripts
in <code style="white-space: pre;">⁠_targets.R⁠</code> to make custom functions available to the pipeline.
<code>tar_source()</code> recursively looks for files ending
in <code>.R</code> or <code>.r</code>, and it runs each with
<code>eval(parse(text = readLines(script_file, warn = FALSE)), envir)</code>.
</p>


<h3>Value</h3>

<p><code>NULL</code> (invisibly)
</p>


<h3>Storage access</h3>

<p>Several functions like <code>tar_make()</code>, <code>tar_read()</code>, <code>tar_load()</code>,
<code>tar_meta()</code>, and <code>tar_progress()</code> read or modify
the local data store of the pipeline.
The local data store is in flux while a pipeline is running,
and depending on how distributed computing or cloud computing is set up,
not all targets can even reach it. So please do not call these
functions from inside a target as part of a running
pipeline. The only exception is literate programming
target factories in the <code>tarchetypes</code> package such as <code>tar_render()</code>
and <code>tar_quarto()</code>.
</p>


<h3>See Also</h3>

<p>Other utilities: 
<code>tar_active()</code>,
<code>tar_backoff()</code>,
<code>tar_call()</code>,
<code>tar_cancel()</code>,
<code>tar_definition()</code>,
<code>tar_described_as()</code>,
<code>tar_envir()</code>,
<code>tar_format_get()</code>,
<code>tar_group()</code>,
<code>tar_name()</code>,
<code>tar_path()</code>,
<code>tar_path_script()</code>,
<code>tar_path_script_support()</code>,
<code>tar_path_store()</code>,
<code>tar_path_target()</code>,
<code>tar_store()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (identical(Sys.getenv("TAR_EXAMPLES"), "true")) { # for CRAN
tar_dir({ # tar_dir() runs code from a temp dir for CRAN.
# Running in tar_dir(), these files are written in tempdir().
dir.create("R")
writeLines("f &lt;- function(x) x + 1", file.path("R", "functions.R"))
tar_script({
  tar_source()
  list(tar_target(x, f(1)))
})
tar_make()
tar_read(x) # 2
})
}
</code></pre>


</div>
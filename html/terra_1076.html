<div class="container">

<table style="width: 100%;"><tr>
<td>viewshed</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute a viewshed</h2>

<h3>Description</h3>

<p>Use elevation data to compute the locations that can be seen, or how much higher they would have to be to be seen, from a certain position. The raster data coordinate reference system must planar (not lon/lat), with the elevation values in the same unit as the distance unit of the coordinate reference system. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'SpatRaster'
viewshed(x, loc, observer=1.80, target=0, curvcoef=6/7, output="yes/no", filename="", ...) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>SpatRaster, single layer with elevation values. Values should have the same unit as the map units</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loc</code></td>
<td>
<p>location (x and y coordinates) or a cell number</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observer</code></td>
<td>
<p>numeric. The height above the elevation data of the observer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>numeric. The height above the elevation data of the targets</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>curvcoef</code></td>
<td>
<p>numeric. Coefficient to consider the effect of the curvature of the earth and refraction of the atmosphere. The elevation values are corrected with: <code>elevation = elevation - curvcoeff * (distance)^2 / (earth_diameter)</code>. This means that with the default value of 0.85714, you lose sight of about 1 meter of elevation for each 385 m of planar distance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>character. Can be "yes/no" to get a binary (logical) output showing what areas are visible; "land" to get the height above the current elevation that would be visible; or "sea" the elevation above sea level that would be visible</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>character. Output filename</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Options for writing files as in <code>writeRaster</code></p>
</td>
</tr>
</table>
<h3>References</h3>

<p>The algorithm used is by Wang et al.: https://www.asprs.org/wp-content/uploads/pers/2000journal/january/2000_jan_87-90.pdf.
</p>


<h3>See Also</h3>

<p><code>terrain</code></p>


<h3>Examples</h3>

<pre><code class="language-R">
if (gdal() &gt;= 3.1) {
	f &lt;- system.file("ex/elev.tif", package="terra")
	r &lt;- rast(f)
	x &lt;- project(r, "EPSG:2169")
	p &lt;- cbind(70300, 96982)
	v &lt;- viewshed(x, p, 0, 0, 0.85714)
}

</code></pre>


</div>
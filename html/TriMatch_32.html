<div class="container">

<table style="width: 100%;"><tr>
<td>trimatch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates matched triplets.</h2>

<h3>Description</h3>

<p>Create matched triplets by minimizing the total distance between matched triplets
within a specified caliper.
</p>


<h3>Usage</h3>

<pre><code class="language-R">trimatch(tpsa, caliper = 0.25, nmatch = c(15), match.order, exact,
  method = maximumTreat, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tpsa</code></td>
<td>
<p>the results from <code>trips</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>caliper</code></td>
<td>
<p>a vector of length one or three indicating the caliper to use 
for matching within each step. This is expressed in standardized units such 
that .25 means that matches must be within .25 of one standard deviation 
to be kept, otherwise the match is dropped.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmatch</code></td>
<td>
<p>number of closest matches to retain before moving to next edge. This can
be <code>Inf</code> in which case all matches within the caliper will be retained
through to the next step. For large datasets, evaluating all possible
matches within the caliper could be time consuming.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>match.order</code></td>
<td>
<p>character vector of length three indicating the order in 
which the matching algorithm will processes. The default is to use start
with the group the middle number of subjects, followed by the smallest,
and then the largest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exact</code></td>
<td>
<p>a vector or data frame of representing covariates for exact matching.
That is, matched triplets will first be matched exactly on these covariates
before evaluating distances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>This is a function that specifies which matched triplets will be
retained. If <code>NULL</code>, all matched triplets within the specified
caliper will be returned (equivalent to caliper matching in two group
matching). The default is <code>maximumTreat</code> that
attempts include each treatment at least once. 
Another option is <code>OneToN</code> which mimicks the one-to-n 
matching where treatments are matched to multiple control units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other parameters passed to <code>method</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>trips</code> function will estimate the propensity scores
for three models. This method will then find the best matched triplets based
upon minimizing the summed differences between propensity scores across the
three models. That is, the algorithm works as follows:
</p>

<ul>
<li>
<p> The first subject from model 1 is selected.
</p>
</li>
<li>
<p> The <code>nmatch[1]</code> smallest distances are selected using propensity scores from
model 1.
</p>
</li>
<li>
<p> For each of the matches identified, the subjects propensity score from model
2 is retrieved.
</p>
</li>
<li>
<p> The <code>nmatch[2]</code> smallest distances are selected using propensity score from
model 3.
</p>
</li>
<li>
<p> For each of those matches identified, the subjects propensity score from model
2 is retrieved.
</p>
</li>
<li>
<p> The distances is calculated from the first and last subjects propensity scores
from model 2.
</p>
</li>
<li>
<p> The three distances are summed.
</p>
</li>
<li>
<p> The triplet with the smallest overall distance is selected and returned.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data(turoing)
formu &lt;- ~ Gender + Ethnicity + Military + ESL + EdMother + EdFather + Age +
     Employment + Income + Transfer + GPA
tpsa &lt;- trips(tutoring, tutoring$treat, formu)
tmatch &lt;- trimatch(tpsa, status=FALSE)

## End(Not run)
</code></pre>


</div>
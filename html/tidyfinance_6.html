<div class="container">

<table style="width: 100%;"><tr>
<td>compute_long_short_returns</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute Long-Short Returns</h2>

<h3>Description</h3>

<p>This function calculates long-short returns based on the returns of portfolios. The long-short
return is computed as the difference between the returns of the "top" and "bottom" portfolios.
The direction of the calculation can be adjusted based on whether the return from the "bottom"
portfolio is subtracted from or added to the return from the "top" portfolio.
</p>


<h3>Usage</h3>

<pre><code class="language-R">compute_long_short_returns(
  data,
  direction = "top_minus_bottom",
  data_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing portfolio returns. The data frame must include
columns for the portfolio identifier, date, and return measurements. The portfolio column should
indicate different portfolios, and there should be columns for return measurements prefixed with
"ret_excess".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>direction</code></td>
<td>
<p>A character string specifying the direction of the long-short return calculation.
It can be either "top_minus_bottom" or "bottom_minus_top". Default is "top_minus_bottom". If set
to "bottom_minus_top", the return will be computed as (bottom - top).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_options</code></td>
<td>
<p>A named list of data_options with characters, indicating the column
names required to run this function. The required column names identify dates. Defaults to
<code>date = date</code>, <code>portfolio = portfolio</code> and <code>ret_excess = ret_excess</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame with columns for date, return measurement types (from the "ret_measure"
column), and the computed long-short returns. The data frame is arranged by date and pivoted to
have return measurement types as columns with their corresponding long-short returns.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data &lt;- data.frame(
  permno = 1:100,
  date = rep(seq.Date(from = as.Date("2020-01-01"), by = "month", length.out = 100), each = 10),
  mktcap_lag = runif(100, 100, 1000),
  ret_excess = rnorm(100),
  size = runif(100, 50, 150)
)

portfolio_returns &lt;- compute_portfolio_returns(
  data, "size", "univariate",
  breakpoint_options_main = breakpoint_options(n_portfolios = 5)
)

compute_long_short_returns(portfolio_returns)

</code></pre>


</div>
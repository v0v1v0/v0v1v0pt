<div class="container">

<table style="width: 100%;"><tr>
<td>smooth_curve</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Smooth Curve</h2>

<h3>Description</h3>

<p>Draw smooth curves. The four regression methods include general linear regression, logistic regression, conditional logistic regression and cox proportional hazards regression.
</p>


<h3>Usage</h3>

<pre><code class="language-R">smooth_curve(
  x,
  y,
  data,
  y_time = NULL,
  strata = NULL,
  adj = c(),
  fx = FALSE,
  k = c(),
  split_var = NULL,
  div = c()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A string. The independent variable to be summarized given as a string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A string. The dependent variable to be summarized given as a string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame in which these variables exist.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y_time</code></td>
<td>
<p>A string. The survival time variable to be summarized given as a string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>A string. The paired variable to be summarized given as a string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adj</code></td>
<td>
<p>A vector of strings, default = <code>c()</code>. Moderator variables to be summarized given as a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fx</code></td>
<td>
<p>Bool, default <code>= FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>A vector of integers, default <code>= c()</code>. Degree of freedom, It only works when <code>fx = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split_var</code></td>
<td>
<p>A string, default <code>= NULL</code>. The split variables to be summarized given as a string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>div</code></td>
<td>
<p>A numeric vector, default <code>= c()</code>. It only works when split_var is a continuous variable.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object about smooth curve.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Load Mayo Clinic Primary Biliary Cirrhosis Data
library(survival)
library(tableeasy)
data(pbc)
## Check variables
head(pbc)
##The censored data is not discussed here
pbc_full &lt;- subset(pbc,status!=0)
pbc_full$status &lt;- pbc_full$status-1
## Make categorical variables factors
varsToFactor &lt;- c('status','trt','ascites','hepato','spiders','edema','stage','sex')
pbc_full[varsToFactor] &lt;- lapply(pbc_full[varsToFactor], factor)

## Moderator variables
adj_pbc &lt;- c('age','alk.phos','ast')

## Smooth curve of General linear regression:
gam &lt;- smooth_curve(x='albumin',
                    y='bili',
                    adj=adj_pbc,
                    data=pbc_full)
plot(gam$gam,se=TRUE,rug=TRUE,shift=gam$shift)


## Smooth curve of logistic regression:
gam &lt;- smooth_curve(x = 'albumin',
                    y = 'status',
                    adj = adj_pbc,
                    split_var ='age',
                    div = c(45),
                    data = pbc_full)
plot(gam$gam[[1]],se=FALSE,rug=TRUE,xlim=c(2,4.5),ylab = 'Adjusted ln ORs for death')
oldpar &lt;- par(new=TRUE)
plot(gam$gam[[2]],se=FALSE,rug=TRUE,xlim=c(2,4.5),ylab = 'Adjusted ln ORs for death',lty=2)
on.exit(par(oldpar))

## Smooth curve of conditional logistic regression:
pbc_full &lt;- data.frame(pbc_full,'ytime'=1)
gam &lt;- smooth_curve(x ='albumin',
                    y_time = 'ytime',
                    y = 'status',
                    adj = adj_pbc,
                    strata = 'trt',
                    data = pbc_full)

termplot(gam,term =c(1),col.term ="black",col.se = "black",se=TRUE,rug=FALSE,
           ylab="Log ORs for death")

## Smooth curve of Cox proportional hazards regression:
gam &lt;- smooth_curve(x ='albumin',
                    y_time = 'time',
                    y = 'status',
                    adj = adj_pbc,
                    data = pbc_full)
termplot(gam,term =c(1),col.term ="black",col.se = "black",se=TRUE,rug=FALSE)
</code></pre>


</div>
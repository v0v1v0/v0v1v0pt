<div class="container">

<table style="width: 100%;"><tr>
<td>tablet.data.frame</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a Tablet for Data Frame</h2>

<h3>Description</h3>

<p>Generates a 'tablet': a summary table of
formatted statistics for factors (is.factor()) and
numerics (is.numeric()) in x, with and without grouping
variables (if present, see <code>group_by</code>).
Column names represent finest level of
grouping, distinguished by attribute 'nest' (the values of
higher other groups, if any) along with the 'all' column
for ungrouped statistics. Column attribute 'n' indicates
relevant corresponding observation count.
Input should not have column names beginning with '_tablet'.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'data.frame'
tablet(
 x,
 ...,
 na.rm = FALSE,
 all = 'All',
 fun = list(
  sum ~ sum(x,  na.rm = TRUE),
  pct ~ signif(digits = 3,     sum / n * 100        ),
  ave ~ signif(digits = 3,    mean(x,  na.rm = TRUE)),
  std ~ signif(digits = 3,      sd(x,  na.rm = TRUE)),
  med ~ signif(digits = 3,  median(x,  na.rm = TRUE)),
  min ~ signif(digits = 3,     min(x,  na.rm = TRUE)),
  max ~ signif(digits = 3,     max(x,  na.rm = TRUE))
 ),
 fac = list(
  ` ` ~ sum + ' (' + pct + '%' + ')'
 ),
 num = list(
  `Mean (SD)` ~ ave + ' (' + std + ')',
  `Median (range)` ~ med + ' (' + min + ', ' + max + ')'
  ),
 lab = list(
  lab ~ name + '\n(N = ' + n + ')'
 ),
 na.rm_fac = na.rm,
 na.rm_num = na.rm,
 exclude_fac = NULL,
 exclude_name = NULL,
 all_levels = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data.frame (possibly grouped)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>substitute formulas for elements of fun, fac, num, lab</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>whether to remove NA in general</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>
<p>a column name for ungrouped statistics; can have length zero to suppress ungrouped column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>default aggregate functions expressed as formulas</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fac</code></td>
<td>
<p>a list of formulas to generate widgets for factors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num</code></td>
<td>
<p>a list of formulas to generate widgets for numerics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lab</code></td>
<td>
<p>a list of formulas to generate label attributes for columns (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm_fac</code></td>
<td>
<p>whether to drop NA 'factor' observations; passed to <code>gather</code> as na.rm, interacts with exclude_fac</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm_num</code></td>
<td>
<p>whether to drop NA numeric observations; passed to <code>gather</code> as na.rm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude_fac</code></td>
<td>
<p>which factor levels to exclude; see <code>factor</code> (exclude)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude_name</code></td>
<td>
<p>whether to drop NA values of column name (for completeness); passed to <code>gather</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all_levels</code></td>
<td>
<p>whether to supply records for unobserved levels</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Arguments 'fun', 'fac', 'num', and 'lab' are lists
of two-sided formulas that are evaluated in
an environment where '+' expresses concatenation
(for character elements).
The values of LHS should be unique across all four lists.
'fun' is a list of aggregate statistics that have access to
<code>N</code> (number of original records),
<code>n</code> (number of group members), and
<code>x</code> (the numeric observations, or 1 for each factor value).
Aggregate statistics generated by 'fun' are available
for use in 'fac' and 'num'
which create visualizations thereof ('widgets'). Column-specific
attributes are available to elements of 'lab', including
the special attribute <code>name</code> (the current column name).
For 'lab' only, if the RHS succeeds, it becomes the label
attribute of the corresponding output column. 'lab' is used
here principally to support annotation of *output*
columns; if *input* columns have attributes 'label' or 'title'
(highest priority) those will have been already substituted
for default column names at the appropriate positions in the
output.
</p>
<p>Missingness of observations (and to a lesser extent, levels of
grouping variables) merits special consideration.
Be aware that na.rm_fac and na.rm_num take their defaults
from na.rm.  Furthermore, na.rm_fac may interact with
exclude_fac, which is passed to <code>factor</code> as <code>exclude</code>.
The goal is to support all possible ways of expressing or ignoring
missingness. That said, if aggregate functions are removing
NA, the values of arguments beginning with 'na.rm' or 'exclude'
may not matter.
</p>
<p>Column 1 of output is character.
Its values are typically the names of the original columns
that were factor or numeric but not in groups(x). If the first
of these had a label attribute or (priority) a title attribute
with class 'latex', then column 1 is assigned the
class 'latex' as well. It makes sense therefore to be consistent
across input columns regarding the presence or not of a 'latex'
label or title. By default, <code>as_kable.tablet</code> dispatches
class-specific methods for <code>escape_latex</code>.
</p>
<p>Similarly, row 1 of output is typically character. As of version 0.6.6,
if any of the grouping variables inherits 'latex', then the return value
of tablet.data.frame() has an attribute 'name_class' with value 'latex'.
</p>


<h3>Value</h3>

<p>'tablet'
A tablet is a special case of data.frame with grouped rows and columns.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>*</code></td>
<td>
<p>There is always one level of row groups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>*</code></td>
<td>
<p>There can be any number of column groups, including zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>*</code></td>
<td>
<p>All columns are character (as tested by <code>is.character()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>*</code></td>
<td>
<p>The first column has empty strings that represent
the last non-empty value. It can be class 'latex' or 'character'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>*</code></td>
<td>
<p>Leading element(s) of first column are deliberately blank (one space character)
and correspond to header rows.  See <code>header_rows</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>*</code></td>
<td>
<p>The second column represents group-specific property 
names. It is populated always and only where column 1 is not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>*</code></td>
<td>
<p>All other columns represent group-specific property values; 
elements before the first non-empty group value represent nested headers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>*</code></td>
<td>
<p>Header values may be repeated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>*</code></td>
<td>
<p>Header values may be empty strings, representing the last non-empty value
to the left, or single spaces, which are deliberately blank.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>*</code></td>
<td>
<p>Internally, character NA is equivalent to an empty string.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>as_kable.tablet</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(boot)
library(dplyr)
library(magrittr)
melanoma %&gt;%
  select(-time, -year) %&gt;%
  mutate(sex = factor(sex), ulcer = factor(ulcer)) %&gt;%
  group_by(status) %&gt;%
  tablet
</code></pre>


</div>
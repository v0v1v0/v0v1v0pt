<div class="container">

<table style="width: 100%;"><tr>
<td>seqsplot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot survival curves of the states in sequences</h2>

<h3>Description</h3>

<p>High level plot function for state sequence objects that produces survival curves of states in sequences. Usage is similar to the generic <code>seqplot</code> function of TraMineR, with a special handling of the <code>group</code> argument when <code>per.state=TRUE</code> is included in the <code>...</code> list.
</p>


<h3>Usage</h3>

<pre><code class="language-R">seqsplot(seqdata, group = NULL, main = "auto",
  cpal = NULL, missing.color = NULL,
  ylab = NULL, yaxis = "all",
  xaxis = "all", xtlab = NULL,
  cex.axis = 1, with.legend = "auto", ltext = NULL, cex.legend = 1,
  use.layout = (!is.null(group) | with.legend != FALSE), legend.prop = NA,
  rows = NA, cols = NA, which.states = NULL,
  title, cex.plot, withlegend, axes, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>seqdata</code></td>
<td>
<p>State sequence object created with the <code>seqdef</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>Grouping variable of length equal to the number of sequences. When <code>per.state = FALSE</code> (default), a distinct plot is generated for each level of <code>group</code>. When <code>per.state = TRUE</code>, the curves for each group level are drawn in a same plot for each distinct value of <code>alphabet(seqdata)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>Character string. Title for the graphic. Default is <code>"auto"</code>, i.e., group levels or, when <code>per.state=TRUE</code>, the state labels. If a single string, the string is pasted with the group or state label. Set as <code>NULL</code> to suppress titles. Can also be a vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cpal</code></td>
<td>
<p>Vector. Color palette used for the states or the groups when <code>per.state=TRUE</code> is given along the <code>...</code> list. Default is <code>NULL</code>, in which case the <code>cpal</code> attribute of the <code>seqdata</code> sequence object is used (see <code>seqdef</code>) or the default colors assigned to groups when <code>type="s"</code> and <code>per.state=TRUE</code>. If user specified, a vector of colors of length and order corresponding to <code>alphabet(seqdata)</code> or, if for groups, the number of levels of the group variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing.color</code></td>
<td>
<p>Color for representing missing values inside the sequences. By default, this color is taken from the <code>missing.color</code> attribute of <code>seqdata</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>Character string or vector of strings. Optional label of the y-axis. If a vector, y-axis label of each group (or state) level. If set as <code>NA</code>, no label is drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yaxis</code></td>
<td>
<p>Logical or one of <code>"all"</code> or <code>"left"</code>. If set as <code>TRUE</code> or <code>"all"</code> (default), the y-axis is displayed on all plots. In case of multiple plots (when <code>per.state=TRUE</code> or <code>group</code> is used), if set as <code>"left"</code>, the y-axis is only displayed on plots of the left panel. If <code>FALSE</code> no y-axis is drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xaxis</code></td>
<td>
<p>Logical or one of <code>"all"</code> or <code>"bottom"</code>. If set as <code>TRUE</code> or <code>"all"</code> (default value) the x-axis is drawn on each plot in the graphic. In case of multiple plots (when <code>per.state=TRUE</code> or <code>group</code> is used), if set as <code>"bottom"</code>, the x-axis is drawn only under the plots of the bottom panel. If <code>FALSE</code>, no x-axis is drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xtlab</code></td>
<td>
<p>Vector of length equal to the number of columns of <code>seqdata</code>. Optional labels for the x-axis tick labels. If unspecified, the column names of the <code>seqdata</code> sequence object are used (see <code>seqdef</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.axis</code></td>
<td>
<p>Real. Axis annotation magnification. See <code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>with.legend</code></td>
<td>
<p>Character string or logical. Defines if and where the legend of the state colors is plotted. The default value <code>"auto"</code> sets the position of the legend automatically. Other possible value is <code>"right"</code>. Obsolete value <code>TRUE</code> is equivalent to <code>"auto"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ltext</code></td>
<td>
<p>Vector of character strings of length and order corresponding to  <code>alphabet(seqdata)</code> or, when for groups, to the levels of the group variable. Optional description for the color legend. If unspecified, the <code>label</code> attribute of the <code>seqdata</code> sequence object is used (see <code>seqdef</code>) or, when for groups, the levels of the group variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.legend</code></td>
<td>
<p>Real. Legend magnification. See <code>legend</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.layout</code></td>
<td>
<p>Logical. Should <code>layout</code> be used to arrange plots when using the group option or plotting a legend? When layout is activated, the standard '<code>par(mfrow=....)</code>' for arranging plots does not work. With <code>with.legend=FALSE</code> and <code>group=NULL</code>, layout is automatically deactivated and '<code>par(mfrow=....)</code>' can be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.prop</code></td>
<td>
<p>Real in range [0,1]. Proportion of the graphic area devoted to the legend plot when <code>use.layout=TRUE</code> and <code>with.legend=TRUE</code>. Default value is set according to the place (bottom or right of the graphic area) where the legend is plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rows,cols</code></td>
<td>
<p>Integers. Number of rows and columns of the plot panel when <code>use.layout=TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which.states</code></td>
<td>
<p>Vector of short state names. List of the states for which survival curves should be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>Deprecated. Use <code>main</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.plot</code></td>
<td>
<p>Deprecated. Use <code>cex.axis</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>withlegend</code></td>
<td>
<p>Deprecated. Use <code>with.legend</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axes</code></td>
<td>
<p>Deprecated. Use <code>xaxis</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments to be passed to the function called to produce the appropriate statistics and the associated plot method (see details), or other graphical parameters. For example <code>per.spell</code> argument will typically be used for survival plots. Can also include arguments of <code>legend</code> such as <code>bty="n"</code> to suppress the box surrounding the legend.

</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is a specific version of <code>seqplot</code> for type="s". It implements a dedicated handling of the group variable passed as <code>group</code> argument when <code>per.sate=TRUE</code> is included in the <code>...</code> list.
</p>
<p>Invalid or non observed states are removed the list given as <code>which.states</code> argument. When <code>which.states = NULL</code>, <code>which.states</code> will be defined as the list of states present in the data.
</p>
<p>When <code>per.sate=TRUE</code>, a distinct plot is generated for each state in the <code>which.states</code> list and, when a grouping variable is provided, the survival curves of all groups are plotted in each plot.
</p>
<p>When <code>per.state=FALSE</code>, a distinct plot is generated for each group and the survival curves of all states listed as <code>which.states</code> are plotted in each plot.
</p>


<h3>Author(s)</h3>

<p>Gilbert Ritschard (based on TraMineR seqplot function)</p>


<h3>References</h3>

<p>Gabadinho, A., G. Ritschard, N. S. MÃ¼ller and M. Studer (2011). Analyzing and Visualizing State Sequences in R with TraMineR. <em>Journal of Statistical Software</em> <b>40</b>(4), 1-37.
</p>


<h3>See Also</h3>

<p><code>plot.stslist.surv</code>, <code>seqsurv</code>, <code>seqplot</code>, </p>


<h3>Examples</h3>

<pre><code class="language-R">## ======================================================
## Creating state sequence objects from example data sets
## ======================================================

data(biofam)
biofam.lab &lt;- c("Parent", "Left", "Married", "Left+Marr",
                "Child", "Left+Child", "Left+Marr+Child", "Divorced")
biofam.short &lt;- c("P","L","M","LM","C","LC","LMC","D")

sple &lt;- 1:200  ## only the first 200 sequences
seqstatl(biofam[sple,10:25]) ## state 4 not present
biofam &lt;- biofam[sple,]

biofam.seq &lt;- seqdef(biofam[,10:25], alphabet=0:7, states=biofam.short, labels=biofam.lab)

## defining two birth cohorts
biofam$wwii &lt;- factor(biofam$birthyr &gt; 1945,
  labels=c("Born Before End of Word War II","Born After Word War II"))

## ==============================
## Plots of state survival curves
## ==============================

seqsplot(biofam.seq) ## all states, no group
seqsplot(biofam.seq, group=biofam$wwii, lwd=2) ## all states for each group
seqsplot(biofam.seq, group=biofam$wwii, per.state=TRUE, lwd=2) ## groups for each state

## For a selection of states only

seqsplot(biofam.seq, group=biofam$wwii, which.states= c('LM'), lwd=2)
## changing default color
seqsplot(biofam.seq, group=biofam$wwii, which.states= c('LM'),
  cpal="orange", lwd=2)
seqsplot(biofam.seq, group=biofam$wwii, which.states= c('LM','LMC'),
  cpal=c("orange","brown"), lwd=2)
seqsplot(biofam.seq, group=biofam$wwii, which.states= c('LM','LMC'), per.state=TRUE)
</code></pre>


</div>
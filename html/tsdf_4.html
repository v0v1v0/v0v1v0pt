<div class="container">

<table style="width: 100%;"><tr>
<td>opt.design</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Zhong's 2-/3- stage Phase II design</h2>

<h3>Description</h3>

<p>calculate optimal 2-/3-stage design given by Bob Zhong
</p>


<h3>Usage</h3>

<pre><code class="language-R">opt.design(
  alpha1,
  alpha2,
  beta,
  pc,
  pe,
  stage = 2,
  stop.eff = FALSE,
  frac_n1 = NULL,
  frac_n2 = NULL,
  sf.param = NULL,
  show = FALSE,
  nmax = 100,
  n.choice = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>alpha1</code></td>
<td>
<p>left-side overall type I error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha2</code></td>
<td>
<p>right-side overall type I error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>type II error</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pc</code></td>
<td>
<p>a numeric vector of response rate. should be a vector with length 1 or 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pe</code></td>
<td>
<p>alternative hypothesis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stage</code></td>
<td>
<p>2 or 3. default to 2 (2-stage design).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stop.eff</code></td>
<td>
<p>logical flag. default to <code>FALSE</code>. if <code>stop.eff = TRUE</code>, the trial may stop for efficacy at interim.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frac_n1</code></td>
<td>
<p>proportion of n1. for 2-stage design, default to <code>c(0.3, 0.6)</code>, i.e. the range of <code>n1</code> is <code>0.2*n</code> to <code>0.5*n</code>. for 3-stage design, default to <code>c(0.2, 0.3)</code>, i.e. the range of <code>n1</code> is <code>0.2*n</code> to <code>0.3*n</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frac_n2</code></td>
<td>
<p>proportion of n2. Used for 3-stage design. default to <code>c(0.2, 0.4)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sf.param</code></td>
<td>
<p>a single real value specifying the gamma parameter for which Hwang-Shih-DeCani spending is to be computed; allowable range is [-40, 40]. Increasing this parameter implies that more error is spent early stage and less is available in late stage. For two-stage designs, default to <code>NULL</code>(alpha-spending is not used); for three-stage designs, default to 4.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show</code></td>
<td>
<p>logical. If <code>TRUE</code>, current sample size is shown as total sample size increase.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmax</code></td>
<td>
<p>maximum sample size. default to 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.choice</code></td>
<td>
<p>stop criterion for the search of feasible designs. stop if number of designs is more than <code>n.choice</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>not used argument.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The two-stage design setup is: n1 patients are treated in the first stage. At the end of the first stage, either the trial continues to the second stage or inefficacy is concluded and the trial is stopped (early termination), depending on the number of responses observed at the first stage. If the trial does continue to the second stage, additional n2 patients are treated. Three-stage design is an extension of two-stage design where one stage is added between Stage 1 and 2. The left-side rejection region is response &lt;= r_i for i = 1, 2, or 3 and right-side rejection region is  response &gt; s. Alpha-spending method is added to two-/three-stage designs. <code>opt.design</code> supports Hwang-Shih-DeCani spending function. You can change the definition of <code>HSD</code> function to use a different spending function.
</p>


<h3>Value</h3>

<p>An object of class "opt.design" is a list containing:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>bdry</code></td>
<td>
<p>rejection regions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error</code></td>
<td>
<p>true type 1/2 errors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>sample size at each stage</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>complete</code></td>
<td>
<p>complete list of feasible designs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha1</code></td>
<td>
<p>input; left-side type 1 error</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha2</code></td>
<td>
<p>input; right-side type 1 error</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>input; type 2 error</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pc</code></td>
<td>
<p>input; a vector of response rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pe</code></td>
<td>
<p>input; a vector of alternative response rate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sf</code></td>
<td>
<p>input; the alpha-spending function used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stage</code></td>
<td>
<p>input; two- or three- stage design is used</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Wenchuan Guo &lt;wguo1017@gmail.com&gt;, Jianan Hui &lt;jiananhuistat@gmail.com&gt;
</p>


<h3>References</h3>

<p>Zhong. (2012) Single-arm Phase IIA clinical trials with go/no-go decisions. <em>Contemporary Clinical Trials</em>, <b>33</b>, 1272–1279.
</p>


<h3>Examples</h3>

<pre><code class="language-R"> alpha1 &lt;- 0.15
 alpha2 &lt;- 0.10
 beta &lt;- 0.15
 pc &lt;- 0.25
 pe &lt;- pc + 0.20
 # calculate optimal two-stage design without using alpha-spending
 opt.design(alpha1, alpha2, beta, pc, pe, stage=2)
 ## Not run: 
 # calculate optimal two-stage design with Pocock-like spending function 
 opt.design(alpha1, alpha2, beta, pc, pt, stage = 2, sf.param = 1)
 
 # calculate optimal three-stage design with =Oâ€™Brien-Fleming like spending function
 opt.design(alpha1, alpha2, beta, pc, pt, stage = 3, sf.param = -4)
 
## End(Not run)
</code></pre>


</div>
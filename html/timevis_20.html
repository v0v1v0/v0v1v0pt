<div class="container">

<table style="width: 100%;"><tr>
<td>timevis</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a timeline visualization</h2>

<h3>Description</h3>

<p><code>timevis</code> lets you create rich and fully interactive timeline visualizations.
Timelines can be included in Shiny apps or R markdown documents.
<code>timevis</code> Includes an extensive
API to manipulate a timeline after creation, and supports getting data out of
the visualization into R. Based on the <a href="https://visjs.github.io/vis-timeline/docs/timeline/">'visjs'</a>
Timeline JavaScript library.<br><br>
View a <a href="https://daattali.com/shiny/timevis-demo/">demo Shiny app</a>
or see the full <a href="https://github.com/daattali/timevis#readme">README</a> on
GitHub.<br><br><strong>Important note: This package provides a way to use the
<a href="https://visjs.github.io/vis-timeline/docs/timeline/">visjs Timeline JavaScript library</a> within R.
The visjs Timeline library has too many features that cannot all be documented
here. To see the full details on what the timeline can support, please read the
official documentation of visjs Timeline.</strong>
</p>


<h3>Usage</h3>

<pre><code class="language-R">timevis(
  data,
  groups,
  showZoom = TRUE,
  zoomFactor = 0.5,
  fit = TRUE,
  options,
  width = NULL,
  height = NULL,
  elementId = NULL,
  loadDependencies = TRUE,
  timezone = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A dataframe containing the timeline items. Each item on the
timeline is represented by a row in the dataframe. <code>start</code> and
<code>content</code> are the only two required columns.
See the <strong>Data format</strong> section below for more
details. For a full list of all supported columns, see the Data Format section in the
<a href="https://visjs.github.io/vis-timeline/docs/timeline/#Data_Format">official
visjs Timeline documentation</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p>A dataframe containing the groups data (optional). See the
<strong>Groups</strong> section below for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showZoom</code></td>
<td>
<p>If <code>TRUE</code> (default), then include "Zoom In"/"Zoom Out"
buttons on the widget.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoomFactor</code></td>
<td>
<p>How much to zoom when zooming out. A zoom factor of 0.5
means that when zooming out the timeline will show 50% more content. For
example, if the timeline currently shows 20 days, then after zooming out with
a <code>zoomFactor</code> of 0.5, the timeline will show 30 days, and zooming out
again will show 45 days. Similarly, zooming out from 20 days with a
<code>zoomFactor</code> of 1 will results in showing 40 days.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>If <code>TRUE</code>, then fit all the data on the timeline when the
timeline initializes. Otherwise, the timeline will be set to show the
current date.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>options</code></td>
<td>
<p>A named list containing any extra configuration options to
customize the timeline. All available options can be found in the
<a href="https://visjs.github.io/vis-timeline/docs/timeline/#Configuration_Options">official
Timeline documentation</a>. Note that any options that define a JavaScript
function must be wrapped in a call to <code>htmlwidgets::JS()</code>. See the
examples section below to see example usage.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>Fixed width for timeline (in css units). Ignored when used in a
Shiny app â€“ use the <code>width</code> parameter in
<code>timevisOutput</code>.
It is not recommended to use this parameter because the widget knows how to
adjust its width automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>Fixed height for timeline (in css units). It is recommended to
not use this parameter since the widget knows how to adjust its height
automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>elementId</code></td>
<td>
<p>Use an explicit element ID for the widget (rather than an
automatically generated one). Ignored when used in a Shiny app.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loadDependencies</code></td>
<td>
<p>Whether to load JQuery and bootstrap
dependencies (you should only set to <code>FALSE</code> if you manually include
them)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timezone</code></td>
<td>
<p>By default, the timevis widget displays times in the local
time of the browser rendering it. You can set timevis to display times in
another time zone by providing a number between -15 to 15 to specify the
number of hours offset from UTC. For example, use <code>0</code> to display in UTC,
and use <code>-4</code> to display in a timezone that is 4 hours behind UTC.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A timeline visualization <code>htmlwidgets</code> object
</p>


<h3>Data format</h3>

<p>The <code>data</code> parameter supplies the input dataframe that describes the
items in the timeline. The following is a subset of the variables supported
in the items dataframe. <strong>The full list of supported variables can be found in
the <a href="https://visjs.github.io/vis-timeline/docs/timeline/#Data_Format">official
visjs documentation</a></strong>.
</p>

<ul>
<li>
<p><strong><code>start</code></strong> - (required) The start date of the item, for
example <code>"1988-11-22"</code> or <code>"1988-11-22 16:30:00"</code>. To specify BCE
dates you must use 6 digits (for example <code>"-000600"</code> corresponds to year 600BCE).
To specify dates between year 0 and year 99 CE, you must use 4 digits.
</p>
</li>
<li>
<p><strong><code>content</code></strong> - (required) The contents of the item. This
can be plain text or HTML code.
</p>
</li>
<li>
<p><strong><code>end</code></strong> - The end date of the item. The end date is
optional. If end date is provided, the item is displayed as a range. If
not, the item is displayed as a single point on the timeline.
</p>
</li>
<li>
<p><strong><code>id</code></strong> - An id for the item. Using an id is not required
but highly recommended, and must be unique. An id is needed when removing or
selecting items (using <code>removeItem</code> or
<code>setSelection</code>).
</p>
</li>
<li>
<p><strong><code>type</code></strong> - The type of the item. Can be 'box' (default),
'point', 'range', or 'background'. Types 'box' and 'point' need only a
start date, types 'range' and 'background' need both a start and end date.
</p>
</li>
<li>
<p><strong><code>title</code></strong> - Add a title for the item, displayed when
hovering the mouse over the item. The title can only contain plain text.
</p>
</li>
<li>
<p><strong><code>editable</code></strong> - If <code>TRUE</code>, the item can be
manipulated with the mouse. Overrides the global <code>editable</code>
configuration option if it is set. An editable item can be removed or
have its start/end dates modified by clicking on it.
</p>
</li>
<li>
<p><strong><code>group</code></strong> - The id of a group. When a <code>group</code> is
provided, all items with the same group are placed on one line. A vertical
axis is displayed showing the group names. See more details in the
<strong>Groups</strong> section below.
</p>
</li>
<li>
<p><strong><code>className</code></strong> - A className can be used to give items an
individual CSS style.
</p>
</li>
<li>
<p><strong><code>style</code></strong> - A CSS text string to apply custom styling
for an individual item, for example <code>color: red;</code>.
</p>
</li>
</ul>
<p><code>start</code> and <code>content</code> are the only required variables for each
item, while the rest of the variables are optional. If you include a variable
that is only used for some rows, you can use <code>NA</code> for the rows where
it's not used. The items data of a timeline can either be set by supplying
the <code>data</code> argument to <code>timevis()</code>, or by calling the
<code>setItems</code> function.
</p>


<h3>Groups</h3>

<p>The <code>groups</code> parameter must be provided if the data items have groups
(ie. if any of the items have a <code>group</code> variable). When using groups, all
items with the same group are placed on one line. A vertical axis is
displayed showing the group names. Grouping items can be useful for a wide range
of applications, for example when showing availability of multiple people,
rooms, or other resources next to each other. You can also think of groups as
"adding a Y axis".<br><br>
The following is a subset of the variables supported in
the groups dataframe. <strong>The full list of supported variables can be found in
the <a href="https://visjs.github.io/vis-timeline/docs/timeline/#groups">official
visjs documentation</a></strong>.
</p>

<ul>
<li>
<p><strong><code>id</code></strong> - (required) An id for the group. The group will
display all items having a <code>group</code> variable which matches this id.
</p>
</li>
<li>
<p><strong><code>content</code></strong> - (required) The contents of the group. This
can be plain text or HTML code.
</p>
</li>
<li>
<p><strong><code>title</code></strong> - Add a title for the group, displayed when
hovering the mouse over the group's label. The title can only contain
plain text.
</p>
</li>
<li>
<p><strong><code>nestedGroups</code></strong> - List of group ids nested in the group.
The syntax for defining a dataframe with a list inside a column can be tricky,
see the examples below for sample usage.
</p>
</li>
<li>
<p><strong><code>className</code></strong> - A className can be used to give groups
an individual CSS style.
</p>
</li>
<li>
<p><strong><code>style</code></strong> - A CSS text string to apply custom styling
for an individual group label, for example <code>color: red;</code>.
</p>
</li>
</ul>
<p><code>id</code> and <code>content</code> are the only required variables for each group,
while the rest of the variables are optional. If you include a variable that
is only used for some rows, you can use <code>NA</code> for the rows where it's
not used. The groups data of a timeline can either be set by supplying the
<code>groups</code> argument to <code>timevis()</code>, or by calling the
<code>setGroups</code> function.
</p>


<h3>Getting data out of a timeline in Shiny</h3>

<p>When a timeline widget is created in a Shiny app, there are four pieces of
information that are always accessible as Shiny inputs. These inputs have
special names based on the timeline's id. Suppose that a timeline is created
with an <code>outputId</code> of <strong>"mytime"</strong>, then the following four input
variables will be available:
</p>

<ul>
<li>
<p><strong><code>input$mytime_data</code></strong> - will return a data.frame containing
the data of the items in the timeline. The input is updated every time
an item is modified, added, or removed.
</p>
</li>
<li>
<p><strong><code>input$mytime_ids</code></strong> - will return the IDs (a vector) of
all the items in the timeline. The input is updated every time an item
is added or removed from the timeline.
</p>
</li>
<li>
<p><strong><code>input$mytime_selected</code></strong> - will return the IDs (a vector)
of the selected items in the timeline. The input is updated every time an
item is selected or unselected by the user. Note that this will not get updated if
an item is selected programmatically using
<code>setSelection</code>.
</p>
</li>
<li>
<p><strong><code>input$mytime_window</code></strong> - will return a 2-element vector
containing the minimum and maximum dates currently visible in the timeline.
The input is updated every time the viewable window of dates is updated
(by zooming or moving the window).
</p>
</li>
<li>
<p><strong><code>input$mytime_visible</code></strong> - will return a list of IDs of items currently
visible in the timeline.
</p>
</li>
</ul>
<p>All four inputs will return a value upon initialization of the timeline and
every time the corresponding value is updated.
</p>


<h3>Extending timevis</h3>

<p>If you need to perform any actions on the timeline object that are not
supported by this package's API, you may be able to do so by manipulating the
timeline's JavaScript object directly. The timeline object is available via
<code>document.getElementById("id").widget.timeline</code> (replace <code>id</code> with
the timeline's id).<br><br>
This timeline object is the direct widget that <code>vis.js</code> creates, and you
can see the <a href="https://visjs.github.io/vis-timeline/docs/timeline/">visjs documentation</a> to
see what actions you can perform on that object.
</p>


<h3>Customizing the timevis look and style using CSS</h3>

<p>To change the styling of individual items or group labels, use the
<code>className</code> and <code>style</code> columns in the <code>data</code> or <code>groups</code>
dataframes.<br><br>
When running a Shiny app, you can use CSS files to apply custom styling to
other components of the timevis widget. When using timevis outside of a Shiny
app, you can use CSS in the following way:<br></p>
<pre>
tv &lt;- timevis(
  data.frame(
    content = "Today",
    start = Sys.Date()
  )
)

style &lt;- "
.vis-timeline {
  border-color: #269026;
  background-color: lightgreen;
  font-size: 15px;
  color: green;
}

.vis-item {
  border: 2px solid #5ace5a;
  font-size: 12pt;
  background: #d9ffd9;
  font-family: cursive;
  padding: 5px;
}
"

tv &lt;- tagList(tags$style(style), tv)
htmltools::html_print(tv)
</pre>


<h3>See Also</h3>

<p><a href="https://daattali.com/shiny/timevis-demo/">Demo Shiny app</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# For more examples, see https://daattali.com/shiny/timevis-demo/

#----------------------- Most basic -----------------
timevis()

#----------------------- Minimal data -----------------
timevis(
  data.frame(id = 1:2,
             content = c("one", "two"),
             start = c("2016-01-10", "2016-01-12"))
)

#----------------------- Hide the zoom buttons, allow items to be editable -----------------
timevis(
  data.frame(id = 1:2,
             content = c("one", "two"),
             start = c("2016-01-10", "2016-01-12")),
  showZoom = FALSE,
  options = list(editable = TRUE, height = "200px")
)

#----------------------- You can use %&gt;% pipes to create timevis pipelines -----------------
timevis() %&gt;%
  setItems(data.frame(
    id = 1:2,
    content = c("one", "two"),
    start = c("2016-01-10", "2016-01-12")
  )) %&gt;%
  setOptions(list(editable = TRUE)) %&gt;%
  addItem(list(id = 3, content = "three", start = "2016-01-11")) %&gt;%
  setSelection("3") %&gt;%
  fitWindow(list(animation = FALSE))

#------- Items can be a single point or a range, and can contain HTML -------
timevis(
  data.frame(id = 1:2,
             content = c("one", "two&lt;br&gt;&lt;h3&gt;HTML is supported&lt;/h3&gt;"),
             start = c("2016-01-10", "2016-01-18"),
             end = c("2016-01-14", NA),
             style = c(NA, "color: red;")
  )
)

#----------------------- Alternative look for each item -----------------
timevis(
  data.frame(id = 1:2,
             content = c("one", "two"),
             start = c("2016-01-10", "2016-01-14"),
             end = c(NA, "2016-01-18"),
             type = c("point", "background"))
)

#----------------------- Using a function in the configuration options -----------------
timevis(
  data.frame(id = 1,
             content = "double click anywhere&lt;br&gt;in the timeline&lt;br&gt;to add an item",
             start = "2016-01-01"),
  options = list(
    editable = TRUE,
    onAdd = htmlwidgets::JS('function(item, callback) {
      item.content = "Hello!&lt;br/&gt;" + item.content;
      callback(item);
    }')
  )
)


#----------------------- Using a custom format for hours ------------------
timevis(
  data.frame(
    id = 1:2,
    content = c("one", "two"),
    start = c("2020-01-10", "2020-01-10 04:00:00")
  ),
  options = list(
    format = htmlwidgets::JS("{ minorLabels: { minute: 'h:mma', hour: 'ha' }}")
  )
)

#----------------------- Allowing editable items to "snap" to round hours only -------------
timevis(
  data.frame(
    id = 1:2,
    content = c("one", "two"),
    start = c("2020-01-10", "2020-01-10 04:00:00")
  ),
  options = list(
    editable = TRUE,
    snap = htmlwidgets::JS("function (date, scale, step) {
         var hour = 60 * 60 * 1000;
         return Math.round(date / hour) * hour;
     }")
  )
)

#----------------------- Using groups -----------------
timevis(data = data.frame(
  start = c(Sys.Date(), Sys.Date(), Sys.Date() + 1, Sys.Date() + 2),
  content = c("one", "two", "three", "four"),
  group = c(1, 2, 1, 2)),
  groups = data.frame(id = 1:2, content = c("G1", "G2"))
 )

#----------------------- Using nested groups --------------------
timevis(
  data = data.frame(
    start = c("2022-01-01", "2022-01-02", "2022-01-03", "2022-01-04", "2022-01-05"),
    content = c("item 1", "item 2", "item 3", "item 4", "item 5"),
    group = 1:5
  ),
  groups = data.frame(
    id = 1:5,
    content = c("John", "Lee", "Clean", "Cook", "Shop"),
    nestedGroups = I(list(c(3, 4), 5, NA, NA, NA))
  )
)

## End(Not run)
#----------------------- Getting data out of the timeline into Shiny -----------------
if (interactive()) {
library(shiny)

data &lt;- data.frame(
  id = 1:3,
  start = c("2015-04-04", "2015-04-05 11:00:00", "2015-04-06 15:00:00"),
  end = c("2015-04-08", NA, NA),
  content = c("&lt;h2&gt;Vacation!!!&lt;/h2&gt;", "Acupuncture", "Massage"),
  style = c("color: red;", NA, NA)
)

ui &lt;- fluidPage(
  timevisOutput("appts"),
  div("Selected items:", textOutput("selected", inline = TRUE)),
  div("Visible window:", textOutput("window", inline = TRUE)),
  tableOutput("table")
)

server &lt;- function(input, output) {
  output$appts &lt;- renderTimevis(
    timevis(
      data,
      options = list(editable = TRUE, multiselect = TRUE, align = "center")
    )
  )

  output$selected &lt;- renderText(
    paste(input$appts_selected, collapse = " ")
  )

  output$window &lt;- renderText(
    paste(input$appts_window[1], "to", input$appts_window[2])
  )

  output$table &lt;- renderTable(
    input$appts_data
  )
}
shinyApp(ui, server)
}

</code></pre>


</div>
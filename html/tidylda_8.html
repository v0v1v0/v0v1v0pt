<div class="container">

<table style="width: 100%;"><tr>
<td>create_lexicon</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make a lexicon for looping over in the gibbs sampler</h2>

<h3>Description</h3>

<p>One run of the Gibbs sampler and other magic to initialize some objects.
Works in concert with <code>initialize_topic_counts</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_lexicon(Cd_in, Beta_in, dtm_in, alpha, freeze_topics)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Cd_in</code></td>
<td>
<p>IntegerMatrix denoting counts of topics in documents</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Beta_in</code></td>
<td>
<p>NumericMatrix denoting probability of words in topics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dtm_in</code></td>
<td>
<p>arma::sp_mat document term matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>NumericVector prior for topics over documents</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freeze_topics</code></td>
<td>
<p>bool if making predictions, set to <code>TRUE</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Arguments ending in <code>_in</code> are copied and their copies modified in
some way by this function. In the case of <code>Cd_in</code> and <code>Beta_in</code>,
the only modification is that they are converted from matrices to nested
<code>std::vector</code> for speed, reliability, and thread safety. <code>dtm_in</code>
is transposed for speed when looping over columns.
</p>


<h3>Value</h3>

<p>Returns a list with five entries.
</p>
<p><code>Docs</code> is a list of vectors. Each element is a document, and the contents
are indices for tokens. Used as an iterator for the Gibbs sampler.
</p>
<p><code>Zd</code> is a list of vectors, similar to Docs. However, its contents are topic
assignments of each document/token pair. Used as an iterator for Gibbs
sampling.
</p>
<p><code>Cd</code> is a matrix counting the number of times each topic is sampled per
document.
</p>
<p><code>Cv</code> is a matrix counting the number of times each topic is sampled per token.
</p>
<p><code>Ck</code> is a vector counting the total number of times each topic is sampled overall.
</p>
<p><code>Cd</code>, <code>Cv</code>, and <code>Ck</code> are derivatives of <code>Zd</code>.
</p>


</div>
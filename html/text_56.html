<div class="container">

<table style="width: 100%;"><tr>
<td>textTrainRandomForest</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Train word embeddings to a categorical variable using random forest.</h2>

<h3>Description</h3>

<p>Train word embeddings to a categorical variable using random forest.
</p>


<h3>Usage</h3>

<pre><code class="language-R">textTrainRandomForest(
  x,
  y,
  x_append = NULL,
  append_first = FALSE,
  cv_method = "validation_split",
  outside_folds = 10,
  inside_folds = 3/4,
  strata = "y",
  outside_strata = TRUE,
  outside_breaks = 4,
  inside_strata = TRUE,
  inside_breaks = 4,
  mode_rf = "classification",
  preprocess_step_center = FALSE,
  preprocess_scale_center = FALSE,
  preprocess_PCA = NA,
  extremely_randomised_splitrule = "extratrees",
  mtry = c(1, 10, 20, 40),
  min_n = c(1, 10, 20, 40),
  trees = c(1000),
  parameter_selection_method = "first",
  eval_measure = "bal_accuracy",
  model_description = "Consider writing a description of your model here",
  multi_cores = "multi_cores_sys_default",
  save_output = "all",
  simulate.p.value = FALSE,
  seed = 2020,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Word embeddings from textEmbed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Categorical variable to predict.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_append</code></td>
<td>
<p>(optional) Variables to be appended after the word embeddings (x);
if wanting to preappend them before the word embeddings use the option
first = TRUE.  If not wanting to train with word embeddings, set x_append = NULL (default = null).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>append_first</code></td>
<td>
<p>(boolean) Option to add variables before or after all word embeddings (default = FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv_method</code></td>
<td>
<p>(character) Cross-validation method to use within a pipeline of nested outer and
inner loops of folds (see nested_cv in rsample). Default is using cv_folds in the
outside folds and "validation_split" using rsample::validation_split in the inner loop to
achieve a development and assessment set (note that for validation_split the inside_folds
should be a proportion, e.g., inside_folds = 3/4); whereas "cv_folds" uses rsample::vfold_cv
to achieve n-folds in both the outer and inner loops.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outside_folds</code></td>
<td>
<p>(numeric) Number of folds for the outer folds (default = 10).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inside_folds</code></td>
<td>
<p>(numeric) Number of folds for the inner folds (default = 3/4).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>(string or tibble; default "y") Variable to stratify according; if a string the
variable needs to be in the training set - if you want to stratify according to another variable
you can include it as a tibble (please note you can only add 1 variable to stratify according).
Can set it to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outside_strata</code></td>
<td>
<p>(boolean) Whether to stratify the outside folds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outside_breaks</code></td>
<td>
<p>(numeric) The number of bins wanted to stratify a numeric stratification variable
in the outer cross-validation loop (default = 4).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inside_strata</code></td>
<td>
<p>(boolean) Whether to stratify the outside folds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inside_breaks</code></td>
<td>
<p>The number of bins wanted to stratify a numeric stratification variable
in the inner cross-validation loop (default = 4).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode_rf</code></td>
<td>
<p>Default is "classification" ("regression" is not supported yet).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preprocess_step_center</code></td>
<td>
<p>(boolean) Normalizes dimensions to have a mean of zero; default is set to FALSE
For more info see (step_center in recipes).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preprocess_scale_center</code></td>
<td>
<p>(boolean) Normalizes dimensions to have a standard deviation of one;
default is set to FALSE. For more info see (step_scale in recipes).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preprocess_PCA</code></td>
<td>
<p>Pre-processing threshold for PCA. Can select amount of variance to
retain (e.g., .90 or as a grid c(0.80, 0.90)); or
number of components to select (e.g., 10). (To skip this step, set preprocess_PCA to NA) Default is "min_halving",
which is a function that selects the number of PCA components based on number of participants and feature
(word embedding dimensions) in the data. The formula is:
preprocess_PCA = round(max(min(number_features/2), number_participants/2), min(50, number_features))).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extremely_randomised_splitrule</code></td>
<td>
<p>Default is "extratrees", which thus implement a random forest;
can also select: NULL, "gini" or "hellinger"; if these are selected your mtry settings will
be overridden (see Geurts et al. (2006) Extremely randomized trees for details; and see the ranger r-package
for details on implementations).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mtry</code></td>
<td>
<p>Hyper parameter that may be tuned; default: c(1, 20, 40),</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_n</code></td>
<td>
<p>Hyper parameter that may be tuned; default: c(1, 20, 40)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trees</code></td>
<td>
<p>Number of trees to use (default 1000).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameter_selection_method</code></td>
<td>
<p>If several results are tied for different parameters (i.e., mtry or min_n),
then select the "first" or the "median" order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eval_measure</code></td>
<td>
<p>(character) Measure to evaluate the models in order to select the best
hyperparameters default "roc_auc"; see also "accuracy", "bal_accuracy", "sens", "spec", "precision",
"kappa", "f_measure".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_description</code></td>
<td>
<p>(character) Text to describe your model (optional; good when sharing the model with others).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multi_cores</code></td>
<td>
<p>If TRUE it enables the use of multiple cores if the computer system allows for it (i.e.,
only on unix, not windows). Hence it makes the analyses considerably faster to run. Default is
"multi_cores_sys_default", where it automatically uses TRUE for Mac and Linux and FALSE for Windows.
Note that having it to TRUE does not enable reproducable results at the moment (i.e., cannot set seed).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save_output</code></td>
<td>
<p>(character) Option not to save all output; default "all". See also "only_results" and
"only_results_predictions".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simulate.p.value</code></td>
<td>
<p>(Boolean) From fisher.test: a logical indicating whether to compute p-values
by Monte Carlo simulation, in larger than 2 Ã— 2 tables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>(numeric) Set different seed (default = 2020).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>For example settings in yardstick::accuracy to set event_level (e.g., event_level = "second").</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with roc_curve_data, roc_curve_plot, truth and predictions, preprocessing_recipe,
final_model, model_description chisq and fishers test as well as evaluation measures, e.g., including accuracy,
f_meas and roc_auc (for details on these measures see the yardstick r-package documentation).
</p>


<h3>See Also</h3>

<p>See <code>textEmbedLayerAggregation</code>, <code>textTrainLists</code> and
<code>textTrainRegression</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Examines how well the embeddings from column "harmonywords" in
# Language_based_assessment_data_8 can binarily classify gender.

## Not run: 
trained_model &lt;- textTrainRandomForest(
  x = word_embeddings_4$texts$harmonywords,
  y = as.factor(Language_based_assessment_data_8$gender),
  trees = c(1000, 1500),
  mtry = c(1), # this is short because of testing
  min_n = c(1), # this is short because of testing
  multi_cores = FALSE # This is FALSE due to CRAN testing and Windows machines.
)


# Examine results (t-value, degree of freedom (df), p-value,
# alternative-hypothesis, confidence interval, correlation coefficient).

trained_model$results

## End(Not run)
</code></pre>


</div>
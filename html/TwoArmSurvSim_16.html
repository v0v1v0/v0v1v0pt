<div class="container">

<table style="width: 100%;"><tr>
<td>run_simulation_simsurv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run Clinical Trial Simulations Based on survival data generated by simsurv package</h2>

<h3>Description</h3>

<p>Runs single or mutiple clinical trial (Time to event endpoint) simulations based survival time generated by simsurv package. Trial data summary will be provied for each simulation. Cox model will be fitted afther trial simulation. If stratification factors were provided, stratified cox model results will also be provided. If "N_simulation" is set to 1, one simulation dataset will be generated.
</p>


<h3>Usage</h3>

<pre><code class="language-R">run_simulation_simsurv(samplesize, rand_ratio=c(1,1), blocksize, factors=NULL, 
accrual_interval=NULL,accrual_rate=NULL,  eventtarget=NULL,maxlpfollowup=NULL, 
N_simulation=1,alpha=0.05,simsurv1=NULL, simsurv2=NULL)

  

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>samplesize</code></td>
<td>
<p>Total number of patients in the simulated clinical trial</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rand_ratio</code></td>
<td>
<p>Randomization ratio between control and treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blocksize</code></td>
<td>
<p>The value of this parameter is used to define the size of the randomizaiton blocks. The actual blocksize is number of treatment levels mutipled by this parameter. Please refer to "blockrand" package for detailed usage.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factors</code></td>
<td>
<p>stratification factors. Default is NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accrual_interval</code></td>
<td>
<p>Time windows for accrual</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accrual_rate</code></td>
<td>
<p>accrual rate for each accrual time window</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eventtarget</code></td>
<td>
<p>Number of target events</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxlpfollowup</code></td>
<td>
<p>maximum follow up time for the last enrolled patient</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N_simulation</code></td>
<td>
<p>number of simulations to run</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Two sided alpha for testing power calculation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simsurv1</code></td>
<td>
<p>simsurv command to generate survival time. Design matrix should set to "x". Please refer to examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simsurv2</code></td>
<td>
<p>simsurv command to gendrate dropout time.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>TrilInfo</code></td>
<td>
<p>Summary of the simulated trial data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ModelResult</code></td>
<td>
<p>Cox model results comparing treatment vs control</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>StraModelResult</code></td>
<td>
<p>Stratified Cox model results comparing treatment vs control</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Data</code></td>
<td>
<p>simulated dataset only if "N_simulateion" is set to 1</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">

# Example 1, compare simsurv and TwoArmSurvSim, trtHR=0.7 eventtarget=247, power should be 0.8 

f1&lt;-list(name='Gender', N_level=2, prevalence=c(0.5,0.5), HR=c(1,0.9), strata=TRUE)
factors=list(f1)


samplesize = 400
blocksize = 2
accrual_interval = c(0,5,10)
accrual_rate = c(5,10,20)
eventtarget = 247
N_simulation = 1


# Simsurv

simsurv1 &lt;- "simsurv(lambdas = 0.03, gammas = 1, 
betas = c(trt = log(0.7),Gender.1=log(0.9)),x = x)"
simsurv2 &lt;-NULL

out&lt;-run_simulation_simsurv(samplesize=samplesize,blocksize=blocksize,factors=factors,
accrual_interval=accrual_interval,accrual_rate=accrual_rate, eventtarget=eventtarget,
N_simulation=N_simulation,simsurv1=simsurv1,simsurv2=simsurv2)

# example 2,  Time dependent treatment effect. 
# h(t)=h0(t)*exp(beta0*x+beta1*x*log(t)).  beta0=log(0.7), beta1=0.15

simsurv1 &lt;- "simsurv( lambdas = 0.1, gammas = 1.5,betas = c(trt = log(0.7)),
x = x, tde = c(trt = 0.15),tdefunction = \"log\")"
simsurv2 &lt;-NULL





</code></pre>


</div>
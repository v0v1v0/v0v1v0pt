<div class="container">

<table style="width: 100%;"><tr>
<td>set_denoms_by</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set variables used in pct denominator calculation</h2>

<h3>Description</h3>

<p>This function is used when calculating pct in count or shift layers. The
percentages default to the treatment variable and any column variables but
can be calculated on any variables passed to target_var, treat_var, by, or
cols.
</p>


<h3>Usage</h3>

<pre><code class="language-R">set_denoms_by(e, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>e</code></td>
<td>
<p>A count/shift layer object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Unquoted variable names</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The modified layer object
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(magrittr)

# Default has matrix of treatment group, additional columns,
# and by variables sum to 1
tplyr_table(mtcars, am) %&gt;%
  add_layer(
    group_shift(vars(row=gear, column=carb), by=cyl) %&gt;%
      set_format_strings(f_str("xxx (xx.xx%)", n, pct))
  ) %&gt;%
  build()

tplyr_table(mtcars, am) %&gt;%
  add_layer(
    group_shift(vars(row=gear, column=carb), by=cyl) %&gt;%
      set_format_strings(f_str("xxx (xx.xx%)", n, pct)) %&gt;%
      set_denoms_by(cyl, gear) # Row % sums to 1
  ) %&gt;%
  build()

tplyr_table(mtcars, am) %&gt;%
  add_layer(
    group_shift(vars(row=gear, column=carb), by=cyl) %&gt;%
      set_format_strings(f_str("xxx (xx.xx%)", n, pct)) %&gt;%
      set_denoms_by(cyl, gear, am) # % within treatment group sums to 1
  ) %&gt;%
  build()
</code></pre>


</div>
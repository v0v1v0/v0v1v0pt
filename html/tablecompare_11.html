<div class="container">

<table style="width: 100%;"><tr>
<td>tblcompare</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compare two data frames. Using a key-column common to both tables, see which
rows are common and highlight differing values by column.</h2>

<h3>Description</h3>

<p>Compare two data frames. Using a key-column common to both tables, see which
rows are common and highlight differing values by column.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tblcompare(
  .data_a,
  .data_b,
  by,
  allow_bothNA = TRUE,
  ncol_by_out = 3,
  coerce = TRUE
)

value_diffs(comparison, col)

## S3 method for class 'tbcmp_compare'
value_diffs(comparison, col)

all_value_diffs(comparison)

## S3 method for class 'tbcmp_compare'
all_value_diffs(comparison)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data_a</code></td>
<td>
<p>A data frame or data table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.data_b</code></td>
<td>
<p>A data frame or data table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>tidy-select. Selection of columns to use when matching rows between
<code>.data_a</code> and <code>.data_b</code>. Both data frames must be unique on <code>by</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_bothNA</code></td>
<td>
<p>Logical. If TRUE a missing value in both data frames is
considered as equal</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncol_by_out</code></td>
<td>
<p>Number of by-columns to include in <code>col_diffs</code> and
<code>unmatched_rows</code> output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coerce</code></td>
<td>
<p>Logical. If False only columns with the same class are compared.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comparison</code></td>
<td>
<p>An object of class "tbcmp_compare" (the output of a
<code>tablecompare::tablecompare()</code> call)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>tidy-select. A single column</p>
</td>
</tr>
</table>
<h3>Value</h3>


<dl>
<dt><code>tblcompare()</code></dt>
<dd>
<p>A "tbcmp_compare"-class object, which is a list
of <code>data.table</code>'s  having the following elements:
</p>

<dl>
<dt>tables</dt>
<dd>
<p>A <code>data.table</code> with one row per input table showing the number of rows
and columns in each.
</p>
</dd>
<dt>by</dt>
<dd>
<p>A <code>data.table</code> with one row per <code>by</code> column showing the class
of the column in each of the input tables.
</p>
</dd>
<dt>summ</dt>
<dd>
<p>A <code>data.table</code> with one row per column common to <code>.data_a</code> and
<code>.data_b</code> and columns "n_diffs" showing the number of values which
are different between the two tables, "class_a"/"class_b" the class of the
column in each table, and "value_diffs" a (nested) <code>data.table</code> showing
the rows in each input table where values are unequal, the values in each
table, and one column for each of the first <code>ncol_by_out</code> <code>by</code> columns for
the identified rows in the input tables.
</p>
</dd>
<dt>unmatched_cols</dt>
<dd>
<p>A <code>data.table</code> with one row per column which is in one input table but
not the other and columns "table": which table the column appears in,
"column": the name of the column, and "class": the class of the
column.
</p>
</dd>
<dt>unmatched_rows</dt>
<dd>
<p>A <code>data.table</code> which, for each row present in one input table but not
the other, contains the columns "table": which table the row appears in,
"i" the row number of the input row, and one column for each of the first
<code>ncol_by_out</code> <code>by</code> columns for each row.
</p>
</dd>
</dl>
</dd>
<dt><code>value_diffs()</code></dt>
<dd>
<p>A <code>data.table</code> with one row for each element
of <code>col</code> found to be unequal between the input tables (
<code>.data_a</code> and <code>.data_b</code> from the original <code>tblcompare()</code> call)
The output table has columns "i_a"/"i_b": the row number of the element in the input
tables, "val_a"/"val_b": the value of <code>col</code> in the input tables, and one column for
each of the first <code>ncol_by_out</code> <code>by</code> columns for the identified rows in the
input tables.</p>
</dd>
<dt><code>all_value_diffs()</code></dt>
<dd>
<p>A <code>data.table</code> of the <code>value_diffs()</code>
output for all columns having at least one value difference, combined row-wise
into a single table. To facilitate this combination into a single table, the
"val_a" and "val_b" columns are coerced to character.</p>
</dd>
</dl>
</div>
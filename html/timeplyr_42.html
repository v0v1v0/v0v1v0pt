<div class="container">

<table style="width: 100%;"><tr>
<td>growth</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rolling basic growth</h2>

<h3>Description</h3>

<p>Calculate basic growth calculations on a rolling basis.
<code>growth()</code> calculates the percent change between the totals of two numeric vectors
when they're of equal length, otherwise the percent change between the means.
<code>rolling_growth()</code> does the same calculation on 1 numeric vector, on a rolling basis.
Pairs of windows of length <code>n</code>, lagged by the value specified by <code>lag</code> are compared in
a similar manner.
When <code>lag = n</code> then <code>data.table::frollsum()</code> is used,
otherwise <code>data.table::frollmean()</code> is used.
</p>


<h3>Usage</h3>

<pre><code class="language-R">growth(x, y, na.rm = FALSE, log = FALSE, inf_fill = NULL)

rolling_growth(
  x,
  n = 1,
  lag = n,
  na.rm = FALSE,
  partial = TRUE,
  offset = NULL,
  weights = NULL,
  inf_fill = NULL,
  log = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Numeric vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>numeric vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Should missing values be removed when calculating window? Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log</code></td>
<td>
<p>If <code>TRUE</code> Growth (relative change) in total and mean events will be
calculated on the log-scale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inf_fill</code></td>
<td>
<p>Numeric value to replace <code>Inf</code> values with. Default behaviour is to keep <code>Inf</code> values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Rolling window size, default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag</code></td>
<td>
<p>Lag of basic growth comparison, default is the rolling window size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>partial</code></td>
<td>
<p>Should rates be calculated outwith the window using partial windows?
If <code>TRUE</code> (the default), (n - 1) pairs of equally-sized rolling windows are compared,
their size increasing by 1 up to size n, at which point the rest of the window pairs are
all of size n. If <code>FALSE</code> all window-pairs will be of size n.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>Numeric vector of values to use as offset, e.g. population sizes or exposure times.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Importance weights. These can either be
length 1 or the same length as x.
Currently, no normalisation of weights occurs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed on to <code>frollmean</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>growth</code> returns a <code>numeric(1)</code> and <code>rolling_growth</code>
returns a <code>numeric(length(x))</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(timeplyr)

set.seed(42)
# Growth rate is 6% per day
x &lt;- 10 * (1.06)^(0:25)

# Simple growth from one day to the next
rolling_growth(x, n = 1)

# Growth comparing rolling 3 day cumulative
rolling_growth(x, n = 3)

# Growth comparing rolling 3 day cumulative, lagged by 1 day
rolling_growth(x, n = 3, lag = 1)

# Growth comparing windows of equal size
rolling_growth(x, n = 3, partial = FALSE)

# Seven day moving average growth
roll_mean(rolling_growth(x), window = 7, partial = FALSE)

</code></pre>


</div>
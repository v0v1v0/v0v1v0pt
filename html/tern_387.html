<div class="container">

<table style="width: 100%;"><tr>
<td>count_patients_events_in_cols</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Count patient events in columns</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>
<p>The summarize function <code>summarize_patients_events_in_cols()</code> creates a layout element to summarize patient
event counts in columns.
</p>
<p>This function analyzes the elements (events) supplied via the <code>filters_list</code> parameter and returns a row
with counts of number of patients for each event as well as the total numbers of patients and events.
The <code>id</code> variable is used to indicate unique subject identifiers (defaults to <code>USUBJID</code>).
</p>
<p>If there are multiple occurrences of the same event recorded for a patient, the event is only counted once.
</p>


<h3>Usage</h3>

<pre><code class="language-R">summarize_patients_events_in_cols(
  lyt,
  id = "USUBJID",
  filters_list = list(),
  empty_stats = character(),
  na_str = default_na_str(),
  ...,
  .stats = c("unique", "all", names(filters_list)),
  .labels = c(unique = "Patients (All)", all = "Events (All)",
    labels_or_names(filters_list)),
  col_split = TRUE
)

s_count_patients_and_multiple_events(
  df,
  id,
  filters_list,
  empty_stats = character(),
  labelstr = "",
  custom_label = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>lyt</code></td>
<td>
<p>(<code>PreDataTableLayouts</code>)<br> layout that analyses will be added to.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>(<code>string</code>)<br> subject variable name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filters_list</code></td>
<td>
<p>(named <code>list</code> of <code>character</code>)<br> list where each element in this list describes one
type of event describe by filters, in the same format as <code>s_count_patients_with_event()</code>.
If it has a label, then this will be used for the column title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>empty_stats</code></td>
<td>
<p>(<code>character</code>)<br> optional names of the statistics that should be returned empty such
that corresponding table cells will stay blank.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na_str</code></td>
<td>
<p>(<code>string</code>)<br> string used to replace all <code>NA</code> or empty values in the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments for the lower level functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.stats</code></td>
<td>
<p>(<code>character</code>)<br> statistics to select for the table. Run
<code>get_stats("summarize_patients_events_in_cols")</code> to see available statistics for this function, in addition
to any added using <code>filters_list</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.labels</code></td>
<td>
<p>(named <code>character</code>)<br> labels for the statistics (without indent).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_split</code></td>
<td>
<p>(<code>flag</code>)<br> whether the columns should be split.
Set to <code>FALSE</code> when the required column split has been done already earlier in the layout pipe.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>(<code>data.frame</code>)<br> data set containing all analysis variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labelstr</code></td>
<td>
<p>(<code>string</code>)<br> label of the level of the parent split currently being summarized
(must be present as second argument in Content Row Functions). See <code>rtables::summarize_row_groups()</code>
for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custom_label</code></td>
<td>
<p>(<code>string</code> or <code>NULL</code>)<br> if provided and <code>labelstr</code> is empty then this will
be used as label.</p>
</td>
</tr>
</table>
<h3>Value</h3>


<ul><li> <p><code>summarize_patients_events_in_cols()</code> returns a layout object suitable for passing to further layouting functions,
or to <code>rtables::build_table()</code>. Adding this function to an <code>rtable</code> layout will add formatted content rows
containing the statistics from <code>s_count_patients_and_multiple_events()</code> to the table layout.
</p>
</li></ul>
<ul><li> <p><code>s_count_patients_and_multiple_events()</code> returns a list with the statistics:
</p>

<ul>
<li> <p><code>unique</code>: number of unique patients in <code>df</code>.
</p>
</li>
<li> <p><code>all</code>: number of rows in <code>df</code>.
</p>
</li>
<li>
<p> one element with the same name as in <code>filters_list</code>: number of rows in <code>df</code>,
i.e. events, fulfilling the filter condition.
</p>
</li>
</ul>
</li></ul>
<h3>Functions</h3>


<ul>
<li> <p><code>summarize_patients_events_in_cols()</code>: Layout-creating function which can take statistics function
arguments and additional format arguments. This function is a wrapper for <code>rtables::summarize_row_groups()</code>.
</p>
</li>
<li> <p><code>s_count_patients_and_multiple_events()</code>: Statistics function which counts numbers of patients and multiple
events defined by filters. Used as analysis function <code>afun</code> in <code>summarize_patients_events_in_cols()</code>.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">df &lt;- data.frame(
  USUBJID = rep(c("id1", "id2", "id3", "id4"), c(2, 3, 1, 1)),
  ARM = c("A", "A", "B", "B", "B", "B", "A"),
  AESER = rep("Y", 7),
  AESDTH = c("Y", "Y", "N", "Y", "Y", "N", "N"),
  AEREL = c("Y", "Y", "N", "Y", "Y", "N", "Y"),
  AEDECOD = c("A", "A", "A", "B", "B", "C", "D"),
  AEBODSYS = rep(c("SOC1", "SOC2", "SOC3"), c(3, 3, 1))
)

# `summarize_patients_events_in_cols()`
basic_table() %&gt;%
  summarize_patients_events_in_cols(
    filters_list = list(
      related = formatters::with_label(c(AEREL = "Y"), "Events (Related)"),
      fatal = c(AESDTH = "Y"),
      fatal_related = c(AEREL = "Y", AESDTH = "Y")
    ),
    custom_label = "%s Total number of patients and events"
  ) %&gt;%
  build_table(df)

</code></pre>


</div>
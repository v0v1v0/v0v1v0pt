<div class="container">

<table style="width: 100%;"><tr>
<td>tmap_animation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create animation</h2>

<h3>Description</h3>

<p>Create a gif animation or video from a tmap plot.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tmap_animation(
  tm,
  filename = NULL,
  width = NA,
  height = NA,
  dpi = NA,
  delay = 40,
  fps = NA,
  loop = TRUE,
  outer.margins = NA,
  asp = NULL,
  scale = NA,
  restart.delay = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tm</code></td>
<td>
<p>tmap or a list of tmap objects. If <code>tm</code> is a tmap object, facets should be created, where nrow and ncol in <code>tm_facets</code> have to be set to 1 in order to create one map per frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>filename. If omitted (default), the animation will be shown in the viewer or browser. If specified, it should be a gif file or a video file (i.e. mp4). The package <code>gifski</code> is required to create a gif animation. The package <code>av</code> (which uses the <code>FFmpeg</code> library) is required for video formats. The mp4 format is recommended but many other video formats are supported, such as wmv, avi, and mkv.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width, height</code></td>
<td>
<p>width and height of the animation file (in pixels). Required when <code>tm</code> is a list, and recommended to specify in advance when <code>tm</code> is a <code>tmap</code> object. If not specified in the latter case, it will be determined by the aspect ratio of the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dpi</code></td>
<td>
<p>dots per inch. By default 100, but this can be set with the option <code>output.dpi.animation</code> in <code>tmap_options</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delay</code></td>
<td>
<p>delay time between images (in 1/100th of a second). See also <code>fps</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fps</code></td>
<td>
<p>frames per second, calculated as <code>100 / delay</code>. If <code>fps</code> is specified, the <code>delay</code> will be set to <code>100/fps</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loop</code></td>
<td>
<p>logical that determined whether the animation is looped, or an integer value that determines how many times the animation is looped.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outer.margins</code></td>
<td>
<p>(passed on to <code>tmap_save</code>) overrides the outer.margins argument of <code>tm_layout</code> (unless set to <code>NA</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asp</code></td>
<td>
<p>(passed on to <code>tmap_save</code>) if specified, it overrides the asp argument of <code>tm_layout</code>. Tip: set to <code>0</code> if map frame should be placed on the edges of the image.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>(passed on to <code>tmap_save</code>) overrides the scale argument of <code>tm_layout</code> (unless set to <code>NA</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>restart.delay</code></td>
<td>
<p>not used anymore</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed on to <code>av_encode_video</code></p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>Not only tmap plots are supported, but any series of R plots.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data(NLD_prov)

m1 &lt;- tm_shape(NLD_prov) + 
	      tm_polygons("yellow") +
	  tm_facets(along = "name")

tmap_animation(m1, delay=40)

data(World, metro)

m2 &lt;- tm_shape(World, projection = "+proj=eck4", simplify = 0.5) +
          tm_fill() +
      tm_shape(metro) + 
          tm_bubbles(size = paste0("pop", seq(1970, 2030, by=10)),
          		   col = "purple",
          		   border.col = "black", border.alpha = .5,
          		   scale = 2) +
      tm_facets(free.scales.symbol.size = FALSE, nrow=1,ncol=1) + 
      tm_format("World")

tmap_animation(m2, delay=100, outer.margins = 0)

m3 &lt;- lapply(seq(50, 85, by = 5), function(age) {
	World$at_most &lt;- World$life_exp &lt;= age
	World_sel &lt;- World[which((World$life_exp &lt;= age) &amp; (World$life_exp &gt; (age - 5))), ]
	tm_shape(World) +
		tm_polygons("at_most", palette = c("gray95", "gold"), legend.show = FALSE) +
		tm_shape(World_sel) +
		tm_text("name", size = "AREA", root = 5, remove.overlap = TRUE) +
		tm_layout(main.title = paste0("Life expectency at most ", age), frame = FALSE)
})

tmap_animation(m3, width = 1200, height = 600, delay = 100)

m4 &lt;- tm_shape(World) +
	tm_polygons() +
tm_shape(metro) +
	tm_bubbles(col = "red") +
	tm_text("name", ymod = -1) +
tm_facets(by = "name", free.coords = F, nrow = 1, ncol = 1) +
	tm_layout(panel.show = FALSE, frame = FALSE)

tmap_animation(m4, filename = "World_cities.mp4", 
    width=1200, height = 600, fps = 2, outer.margins = 0)

## End(Not run)
</code></pre>


</div>
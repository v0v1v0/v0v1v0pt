<div class="container">

<table style="width: 100%;"><tr>
<td>download_data_wrds_crsp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download Data from WRDS CRSP</h2>

<h3>Description</h3>

<p>This function downloads and processes stock return data from the CRSP
database for a specified period. Users can choose between monthly and daily
data types. The function also adjusts returns for delisting and calculates
market capitalization and excess returns over the risk-free rate.
</p>


<h3>Usage</h3>

<pre><code class="language-R">download_data_wrds_crsp(
  type,
  start_date = NULL,
  end_date = NULL,
  batch_size = 500,
  version = "v2",
  additional_columns = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A string specifying the type of CRSP data to download:
"crsp_monthly" or "crsp_daily".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date</code></td>
<td>
<p>Optional. A character string or Date object in "YYYY-MM-DD" format
specifying the start date for the data. If not provided, a subset of the dataset is returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date</code></td>
<td>
<p>Optional. A character string or Date object in "YYYY-MM-DD" format
specifying the end date for the data. If not provided, a subset of the dataset is returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch_size</code></td>
<td>
<p>An optional integer specifying the batch size for
processing daily data, with a default of 500.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>An optional character specifying which CRSP version to use.
"v2" (the default) uses the updated second version of CRSP, and "v1"
downloads the legacy version of CRSP.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>additional_columns</code></td>
<td>
<p>Additional columns from the CRSP monthly or
daily data as a character vector.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame containing CRSP stock returns, adjusted for delistings,
along with calculated market capitalization and excess returns over the
risk-free rate. The structure of the returned data frame depends on the
selected data type.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
  crsp_monthly &lt;- download_data_wrds_crsp("wrds_crsp_monthly", "2020-11-01", "2020-12-31")
  crsp_daily &lt;- download_data_wrds_crsp("wrds_crsp_daily", "2020-12-01", "2020-12-31")

  # Add additional columns
  download_data_wrds_crsp("wrds_crsp_monthly", "2020-11-01", "2020-12-31",
                          additional_columns = c("mthvol", "mthvolflg"))

</code></pre>


</div>
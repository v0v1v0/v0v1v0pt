<div class="container">

<table style="width: 100%;"><tr>
<td>tune_theta</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate the penalty parameter for Step 2 of Virtual Twins</h2>

<h3>Description</h3>

<p>Permutes data under the null hypothesis of a constant treatment effect and
calculates the MNPP on each permuted data set. The <code>1 - alpha</code> quantile
of the distribution is taken.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tune_theta(
  data,
  Trt,
  Y,
  zbar,
  step1,
  step2,
  threshold,
  alpha0,
  p_reps,
  parallel,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame containing a response, binary treatment indicators,
and covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Trt</code></td>
<td>
<p>a string specifying the name of the column of <code>data</code>
contains the treatment indicators.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>
<p>a string specifying the name of the column of <code>data</code>
contains the response.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zbar</code></td>
<td>
<p>the estimated marginal treatment effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>step1</code></td>
<td>
<p>character strings specifying the Step 1 model. Supports
either "<code>lasso</code>", "<code>mars</code>", "<code>randomforest</code>", or
"<code>superlearner</code>".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>step2</code></td>
<td>
<p>a character string specifying the Step 2 model. Supports
"<code>lasso</code>", "<code>rtree</code>",  "<code>classtree</code>", or "<code>ctree</code>".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>for "<code>step2 = 'classtree'</code>" only. The value against
which to test if the estimated individual treatment effect from Step 1 is
higher (TRUE) or lower (FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha0</code></td>
<td>
<p>the nominal Type I error rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_reps</code></td>
<td>
<p>the number of permutations to run.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>Should the loop over replications be parallelized? If
<code>FALSE</code>, then no, if <code>TRUE</code>, then yes.
Note that running in parallel requires a <em>parallel backend</em> that must be
registered before performing the computation.
See the <code>foreach</code> documentation for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to the Step 1 model call.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>the estimated penalty parameter
</p>


</div>
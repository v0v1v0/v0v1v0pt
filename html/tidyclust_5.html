<div class="container">

<table style="width: 100%;"><tr>
<td>.convert_form_to_x_fit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Helper functions to convert between formula and matrix interface</h2>

<h3>Description</h3>

<p>Functions to take a formula interface and get the resulting
objects (y, x, weights, etc) back or the other way around. The functions
are intended for developer use. For the most part, this emulates the
internals of <code>lm()</code> (and also see the notes at
https://developer.r-project.org/model-fitting-functions.html).
</p>
<p><code>.convert_form_to_x_fit()</code> and <code>.convert_x_to_form_fit()</code> are for when the
data are created for modeling. <code>.convert_form_to_x_fit()</code> saves both the
data objects as well as the objects needed when new data are predicted
(e.g. <code>terms</code>, etc.).
</p>
<p><code>.convert_form_to_x_new()</code> and <code>.convert_x_to_form_new()</code> are used when new
samples are being predicted and only require the predictors to be
available.
</p>


<h3>Usage</h3>

<pre><code class="language-R">.convert_form_to_x_fit(
  formula,
  data,
  ...,
  na.action = na.omit,
  indicators = "traditional",
  composition = "data.frame",
  remove_intercept = TRUE
)

.convert_x_to_form_fit(x, weights = NULL, remove_intercept = TRUE)

.convert_form_to_x_new(
  object,
  new_data,
  na.action = stats::na.pass,
  composition = "data.frame"
)

.convert_x_to_form_new(object, new_data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>An object of class <code>formula</code> (or one that can be coerced to
that class): a symbolic description of the model to be fitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing all relevant variables (e.g. predictors,
case weights, etc).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>stats::model.frame()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>A function which indicates what should happen when the data
contain NAs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indicators</code></td>
<td>
<p>A string describing whether and how to create
indicator/dummy variables from factor predictors. Possible options are
<code>"none"</code>, <code>"traditional"</code>, and <code>"one_hot"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>composition</code></td>
<td>
<p>A string describing whether the resulting <code>x</code> and <code>y</code>
should be returned as a <code>"matrix"</code> or a <code>"data.frame"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_intercept</code></td>
<td>
<p>A logical indicating whether to remove the intercept
column after <code>model.matrix()</code> is finished.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A matrix, sparse matrix, or data frame of predictors. Only some
models have support for sparse matrix input. See <code>modelenv::get_encoding()</code>
for details. <code>x</code> should have column names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A numeric vector containing the weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class <code>cluster_fit</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_data</code></td>
<td>
<p>A rectangular data object, such as a data frame.</p>
</td>
</tr>
</table>
</div>
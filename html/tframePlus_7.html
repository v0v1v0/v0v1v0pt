<div class="container">

<table style="width: 100%;"><tr>
<td>rollAggregate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rolling Time Series Aggregate</h2>

<h3>Description</h3>

<p>Aggregate time series using a rolling window.</p>


<h3>Usage</h3>

<pre><code class="language-R">    rollAggregate(x, FUN=sum, na.rm=FALSE, aggPeriods=4, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a time series object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>the function to use for aggregating.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Logical indicating if <code>NA</code> should be removed from 
the beginning and end of a series</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggPeriods</code></td>
<td>
<p>the number of observations to use in the rolling window.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to <code>apply</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Functions <code>rollAggregate</code> uses apply with <code>FUN</code> on a rolling 
window set by <code>aggPeriods</code>. 
Partial windows may result in <code>NA</code>,
depending on <code>FUN</code>. <code>NA</code> in the beginning or end are 
dropped if <code>na.rm=TRUE</code>. 
The frequency of the resulting series remains the same as the original, but
the result will be <code>aggPeriods</code> shorter (i.e. have NAs).
The default will be a four period moving sum (which roughly converts weekly
data to something approximating monthly, but at a weekly frequency).
</p>


<h3>Value</h3>

<p>time series</p>


<h3>See Also</h3>

<p><code>as.annually</code>,
<code>as.quarterly</code>,
<code>as.weekly</code>,
<code>apply</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">  rollAggregate(ts(1:20, start = c(1999,1), frequency=1)) 
  rollAggregate(ts(1:20, start = c(1999,1), frequency=12), aggPeriods=3) 
  
  if(require("zoo")) {
    z &lt;- zoo(rnorm(100),  order.by = Sys.Date() + 1:100)
    rollAggregate(as.weekly(z), aggPeriods=4, FUN=mean)
    require("tfplot")
    tfplot(as.weekly(z),rollAggregate(as.weekly(z), aggPeriods=4, 
       FUN=mean, na.rm=TRUE))
    tfplot(z,rollAggregate(z, aggPeriods=28, FUN=mean))
    }
</code></pre>


</div>
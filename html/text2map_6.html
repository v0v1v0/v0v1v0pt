<div class="container">

<table style="width: 100%;"><tr>
<td>CoCA</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Performs Concept Class Analysis (CoCA)</h2>

<h3>Description</h3>

<p>CoCA outputs schematic classes derived from documents' engagement
with multiple bi-polar concepts (in a Likert-style fashion).
The function requires a (1) DTM of a corpus which can be obtained using any
popular text analysis package, or from the <code>dtm_builder()</code> function, and (2)
semantic directions as output from the <code>get_direction()</code>.
<code>CMDist()</code> works under the hood. Code modified from the <code>corclass</code> package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CoCA(
  dtm,
  wv = NULL,
  directions = NULL,
  filter_sig = TRUE,
  filter_value = 0.05,
  zero_action = c("drop", "ownclass")
)

coca(
  dtm,
  wv = NULL,
  directions = NULL,
  filter_sig = TRUE,
  filter_value = 0.05,
  zero_action = c("drop", "ownclass")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dtm</code></td>
<td>
<p>Document-term matrix with words as columns. Works with DTMs
produced by any popular text analysis package, or you can use the
<code>dtm_builder()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wv</code></td>
<td>
<p>Matrix of word embedding vectors (a.k.a embedding model)
with rows as words.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>directions</code></td>
<td>
<p>direction vectors output from get_direction()</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_sig</code></td>
<td>
<p>logical (default = TRUE), sets 'insignificant'
ties to 0 to decrease noise and increase stability</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_value</code></td>
<td>
<p>Minimum significance cutoff.
Absolute row correlations below
this value will be set to 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zero_action</code></td>
<td>
<p>If 'drop', CCA drops rows with
0 variance from the analyses (default).
If 'ownclass', the correlations between 0-variance
rows and all other rows is set 0, and the correlations
between all pairs of 0-var rows are set to 1</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a named list object of class <code>CoCA</code>. List elements include:
</p>

<ul>
<li>
<p> membership: document memberships
</p>
</li>
<li>
<p> modules: schematic classes
</p>
</li>
<li>
<p> cormat: correlation matrix
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Dustin Stoltz and Marshall Taylor
</p>


<h3>References</h3>

<p>Taylor, Marshall A., and Dustin S. Stoltz.
(2020) 'Concept Class Analysis: A Method for Identifying Cultural
Schemas in Texts.' <em>Sociological Science</em> 7:544-569.
<a href="https://doi.org/10.15195/v7.a23">doi:10.15195/v7.a23</a>.<br>
Boutyline, Andrei. 'Improving the measurement of shared cultural
schemas with correlational class analysis: Theory and method.'
Sociological Science 4.15 (2017): 353-393.
<a href="https://doi.org/10.15195/v4.a15">doi:10.15195/v4.a15</a><br></p>


<h3>See Also</h3>

<p>CMDist, get_direction
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#' # load example word embeddings
data(ft_wv_sample)

# load example text
data(jfk_speech)

# minimal preprocessing
jfk_speech$sentence &lt;- tolower(jfk_speech$sentence)
jfk_speech$sentence &lt;- gsub("[[:punct:]]+", " ", jfk_speech$sentence)

# create DTM
dtm &lt;- dtm_builder(jfk_speech, sentence, sentence_id)

# create semantic directions
gen &lt;- data.frame(
  add = c("woman"),
  subtract = c("man")
)

die &lt;- data.frame(
  add = c("alive"),
  subtract = c("die")
)

gen_dir &lt;- get_direction(anchors = gen, wv = ft_wv_sample)
die_dir &lt;- get_direction(anchors = die, wv = ft_wv_sample)

sem_dirs &lt;- rbind(gen_dir, die_dir)

classes &lt;- CoCA(
  dtm = dtm,
  wv = ft_wv_sample,
  directions = sem_dirs,
  filter_sig = TRUE,
  filter_value = 0.05,
  zero_action = "drop"
)

print(classes)
</code></pre>


</div>
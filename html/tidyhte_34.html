<div class="container">

<table style="width: 100%;"><tr>
<td>FX.Predictor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Predictor class for the cross-fit predictor of "partial" CATEs</h2>

<h3>Description</h3>

<p>Predictor class for the cross-fit predictor of "partial" CATEs
</p>
<p>Predictor class for the cross-fit predictor of "partial" CATEs
</p>


<h3>Details</h3>

<p>The class makes it easier to manage the K predictors for retrieving K-fold
cross-validated estimates, as well as to measure how treatment effects change
when only a single covariate is changed from its "natural" levels (in the sense
"natural" used by the direct / indirect effects literature).
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>models</code></dt>
<dd>
<p>A list of the K model fits</p>
</dd>
<dt><code>num_splits</code></dt>
<dd>
<p>The number of folds used in cross-fitting.</p>
</dd>
<dt><code>num_mc_samples</code></dt>
<dd>
<p>The number of samples to retrieve across the covariate space.
If num_mc_samples is larger than the sample size, then the entire dataset will be used.</p>
</dd>
<dt><code>covariates</code></dt>
<dd>
<p>The unquoted names of the covariates used in the second-stage model.</p>
</dd>
<dt><code>model_class</code></dt>
<dd>
<p>The model class (in the sense of <code>Model_cfg</code>). For instance,
a SuperLearner model will have model class "SL".</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-FX.Predictor-new"><code>FX.Predictor$new()</code></a>
</p>
</li>
<li> <p><a href="#method-FX.Predictor-predict"><code>FX.Predictor$predict()</code></a>
</p>
</li>
<li> <p><a href="#method-FX.Predictor-clone"><code>FX.Predictor$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-FX.Predictor-new"></a>



<h4>Method <code>new()</code>
</h4>

<p><code>FX.predictor</code> is a class which simplifies the management of a set of cross-fit
prediction models of treatment effects and provides the ability to get the "partial"
effects of particular covariates.
</p>


<h5>Usage</h5>

<div class="r"><pre>FX.Predictor$new(models, num_splits, num_mc_samples, covariates, model_class)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>models</code></dt>
<dd>
<p>A list of the K model fits.</p>
</dd>
<dt><code>num_splits</code></dt>
<dd>
<p>Integer number of cross-fitting folds.</p>
</dd>
<dt><code>num_mc_samples</code></dt>
<dd>
<p>Integer number of Monte-Carlo samples across the covariate
space. If this is larger than the sample size, then the whole dataset will be used.</p>
</dd>
<dt><code>covariates</code></dt>
<dd>
<p>The unquoted names of the covariates.</p>
</dd>
<dt><code>model_class</code></dt>
<dd>
<p>The model class (in the sense of <code>Model_cfg</code>).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-FX.Predictor-predict"></a>



<h4>Method <code>predict()</code>
</h4>

<p>Predicts the PCATE surface over a particular covariate, returning a tibble with
the predicted HTE for every Monte-Carlo sample.
</p>


<h5>Usage</h5>

<div class="r"><pre>FX.Predictor$predict(data, covariate)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt>
<dd>
<p>The full dataset</p>
</dd>
<dt><code>covariate</code></dt>
<dd>
<p>The unquoted covariate name for which to calculate predicted
treatment effects.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>A tibble with columns:
</p>

<ul>
<li> <p><code>covariate_value</code> - The value of the covariate of interest
</p>
</li>
<li> <p><code>.hte</code> - An estimated HTE
</p>
</li>
<li> <p><code>.id</code> - The identifier for the original row (which had
<code>covariate</code> modified to <code>covariate_value</code>).
</p>
</li>
</ul>
<hr>
<a id="method-FX.Predictor-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>FX.Predictor$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




</div>
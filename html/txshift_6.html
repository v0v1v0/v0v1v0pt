<div class="container">

<table style="width: 100%;"><tr>
<td>est_g_exp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate the Exposure Mechanism via Generalized Propensity Score</h2>

<h3>Description</h3>

<p>Estimate the Exposure Mechanism via Generalized Propensity Score
</p>


<h3>Usage</h3>

<pre><code class="language-R">est_g_exp(
  A,
  W,
  delta = 0,
  samp_weights = rep(1, length(A)),
  fit_type = c("hal", "sl"),
  sl_learners_density = NULL,
  haldensify_args = list(grid_type = "equal_range", lambda_seq = exp(seq(-1, -13,
    length = 300)))
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>A</code></td>
<td>
<p>A <code>numeric</code> vector of observed exposure values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>W</code></td>
<td>
<p>A <code>numeric</code> matrix of observed baseline covariate values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>
<p>A <code>numeric</code> value identifying a shift in the observed
value of the exposure under which observations are to be evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samp_weights</code></td>
<td>
<p>A <code>numeric</code> vector of observation-level sampling
weights, as produced by the internal procedure to estimate the two-phase
sampling mechanism <code>est_samp</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit_type</code></td>
<td>
<p>A <code>character</code> specifying whether to use Super Learner
(from <span class="pkg">sl3</span>) or the Highly Adaptive Lasso (from <span class="pkg">hal9001</span>) to
estimate the conditional exposure density.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sl_learners_density</code></td>
<td>
<p>Object containing a set of instantiated learners
from <span class="pkg">sl3</span>, to be used in fitting an ensemble model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>haldensify_args</code></td>
<td>
<p>A <code>list</code> of argument to be directly passed to
<code>haldensify</code> when <code>fit_type</code> is set to
<code>"hal"</code>. Note that this invokes the Highly Adaptive Lasso instead of
Super Learner and is thus only feasible for relatively small data sets.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Compute the propensity score (exposure mechanism) for the observed
data, including the shift. This gives the propensity score for the observed
data (at the observed A) the counterfactual shifted exposure levels (at
A - delta, A + delta, and A + 2 * delta).
</p>


<h3>Value</h3>

<p>A <code>data.table</code> with four columns, containing estimates of the
generalized propensity score at a downshift (g(A - delta | W)), no shift
(g(A | W)), an upshift (g(A + delta) | W), and an upshift of magnitude two
(g(A + 2 delta) | W).
</p>


</div>
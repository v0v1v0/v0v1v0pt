<div class="container">

<table style="width: 100%;"><tr>
<td>RandomizeDocument</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Randomizing documents.</h2>

<h3>Description</h3>

<p>Function to randomize a Document, as created by <code>StructureDocument</code>.
</p>
<p>It Randomizes each layer according to the prescriptions involved in the internal function <code>GetLayerSampleIndexes</code>. Which, in summary, randomizes each section inside, and then randomizes the orders of the sections.
</p>
<p><strong>Important note:</strong> One must provide to this function the <em>document</em> part of the structure. Since <code>StructureDocument</code> provides as the outer most layer a split between the preamble and the document, one must just supply the document part to this function, (or a subsection of it).
</p>


<h3>Usage</h3>

<pre><code class="language-R">RandomizeDocument(
  Document,
  isSectionReordered.vector,
  isLayerRandomized.vector
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Document</code></td>
<td>
<p>Document to randomize, as generated by <code>StructureDocument</code>. The names of the structure are used to determine how to randomize the document.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isSectionReordered.vector</code></td>
<td>
<p>Logical vector, specifying if the order of sections should be also randomized at a certain depth level.
</p>
<p><strong>Note</strong> that if <code>isLayerRandomized</code> is set to false for a certain layer, <code>isSectionReorder</code> will have no effect. (Probably this isn't the best behaviour)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isLayerRandomized.vector</code></td>
<td>
<p>Logical vector, specifying if you should randomize the order of the items, (denoted by <code>\cmdName</code>) or not at a certain depth level.
</p>
<p>This vector should have the same length as the depth at most, otherwise it will raise an error if you try to "dig deeper than it can". And <em>isSectionReordered.vector</em> should have matching elements for each element of <em>isLayerRandomized.vector</em>
</p>
<p>(Maybe we could change this to a warning instead? To allow for structures with different depths within different branches of the tree)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>It keeps randomizing recursively inner layers of the structure until it runs out of elements on the logical vectors <code>isSectionReordered.vector</code> and <code>isLayerRandomized.vector</code>.
</p>
<p>A "section" denotes the content within a begin-end environment in the document.
Each section is then assumed to be divided in a beginning and end parts, that should be fixed in place, and the parts denoted by the command <code>\cmdName</code> as explained on <code>StructureDocument</code>.
</p>
<p>We will denote those parts as "items."
Analogously to itemize environments in 'LaTeX'.
</p>
<p>The purpose of this function is therefore to randomize the items from the structure, fixing the begin and end parts within a section. And then to reorder each section while keeping the pre- and post- parts fixed, and to do so recursively until we exhaust the <code>isLayerRandomized.vector</code>
</p>
<p><code>isSectionReordered.vector</code> specifies whether to order sections for a certain depth, while <code>isLayerRandomized.vector</code> specifies whether to order the items within a section of that same depth.
</p>
<p>In some cases you may want to reorder the sections, for example, using the examdesign class. Over there, questions use the begin-end question format.
</p>
<p>In others cases you may want to preserve the order of sections while still modifying the order of the items, like when you are using the exam class, or when creating your own list of questions with an <code>\itemize</code> environment.
</p>
<p>For efficiency, if you don't want to randomize to the full depth of your tree, just make those logical vectors of your desired length, rather than making them of length <code class="reqn">n</code> and then setting every layer after the last one you want to randomize to false. That will prevent the program from walking down the whole tree checking everything.
</p>


<h3>Value</h3>

<p>A document structure, as provided by <code>StructureDocument</code>.
</p>
<p>However, the names of the structure will no longer be sequential,
the naming convention in the new structure will refer to the original structure that was inputted into this function. Which is very useful when you want to keep track of where things have moved.
</p>


<h3>See Also</h3>

<p><code>StructureDocument</code>, TODO: Add reference to extracting info functions
</p>


<h3>Examples</h3>

<pre><code class="language-R">
rndDoc &lt;- RandomizeDocument(
    TexExamRandomizer::testdoc$document,
    c(FALSE,TRUE),
    c(TRUE, TRUE)
    )
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>evaluate.trtsel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>evaluate the performance of one or more biomarkers for their ability to guide patient treatment recommendations.</h2>

<h3>Description</h3>

<p>Evaluates the ability of one or more biomarkers for their ability to guide patient treatment recommendations.  
(Bias-corrected) summary measures of marker performance are estimated and confidence intervals are provided.  
This function accepts as input an object of class "trtsel", created using the function "trtsel".
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'trtsel'
evaluate(x, ..., bias.correct = TRUE, bootstraps = 1000,
  alpha = 0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class "trtsel", created by using the function "trtsel."</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bias.correct</code></td>
<td>
<p>logical indicator of whether to bias-correct measures for over-optimism using bootstrap-bias correction. When the same data is used to fit and evaluate the model, performance measures are over-optimistic. Setting this equal to TRUE uses a bootstrap method to bias-correct performance measures. See details for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootstraps</code></td>
<td>
<p>Number of bootstrap replicates for creating confidence intervals for each performance measure. The default value is 1000. Set bootstraps = 0 if no confidence intervals are desired.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>(1-alpha)*100% confidence intervals are calculated. Default value is alpha = 0.05 which yields 95% CI's.  The same alpha is used for the two-sided type-I error for the test of H0: No decrease in event rate under marker-based treatment.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with the following components (see Janes et al. (2013) for a description of the summary measures and estimators): 
</p>
<table>
<tr style="vertical-align: top;">
<td><code>test.Null </code></td>
<td>
<p> List of results of a test of the null hypothesis H0: No decrease in event rate under marker-based treatment. Contains "reject" (logical; was H0 rejected), p.value, z.statistic, and alpha </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimates </code></td>
<td>
<p>data.frame of dimension 1x9 of summary measure estimates. Includes:
p.rec.trt : proportion recommended treatment;
p.rec.notrt : proportion recommended no treatment;
B.neg.emp, B.neg.mod: Average benefit of no treatment among those recommended no trt, empirical and model-based estimates;
B.pos.emp, B.neg.mod: Average benefit of treatment among those recommended trt, empirical and model-based estimates;
Theta.emp, Theta.mod: Decrease in rate of outcomes under marker-based treatment, empirical and model-based estimates; 
Var.Delta: variance in estimated treatment effect; 
TG: Total gain.  
ER.trt0.emp/mod, ER.trt1.emp/mod, ER.mkrbased.emp/mod: Event rates under trt = 0, trt = 1 or for marker-based treatment. 
Marker.Thresh: Marker positivity threshold– defined as the maximum marker value such that estimated treatment effect &lt; "thresh" (=treatment effect used to define the treatment rule, this is set when creating the trtsel object). If all observations are marker negative (or all are positive), Marker.Thresh has value NA</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.intervals</code></td>
<td>
<p> data.frame of dimension 2x9 with bootstrap-based confidence intervals for each summary measures. If bootstraps = 0 or boot = FALSE, this component is NULL. </p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>The evaluate function used this way both fit and evaluates a risk model using the same data, which is known to bias performance measure estimates to be overly optimistic. To correct for this bias, the evaluate function by default sets bias.correct=TRUE. This implements bootstrap bias correction via the “refined bootstrap" method described in Efron and Tibshirani 1994. In short, we sample BB bootstrap datasets. For each, obtain a new treatment selection rule based on the re-fit model and calculate the difference in estimated performance of this rule using the bootstrap vs. original data. The average of these differences estimates the bias. We shift naive performance estimates and confidence intervals down by the estimated bias.
</p>


<h3>See Also</h3>

<p><code>trtsel</code> for creating trtsel objects, <code>plot.trtsel</code> for plotting risk curves and more, <code>calibrate.trtsel</code> for assessing model calibration, and <code>compare.trtsel</code> to compare two trtsel object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(tsdata)

###########################
## Create trtsel objects 
###########################

trtsel.Y1 &lt;- trtsel(event ~ Y1*trt, 
                   treatment.name = "trt", 
                   data = tsdata, 
                   study.design = "RCT",
                   family = binomial(link = "logit"), 
                   default.trt = "trt all")
trtsel.Y1

#################################
## Evaluate marker performance
#################################

# Marker Y1
estimates.Y1 &lt;- evaluate(trtsel.Y1, bootstraps = 50)
estimates.Y1

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>register_tinytest_extension</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Register or unregister extension functions</h2>

<h3>Description</h3>

<p>Functions to use in <code>.onLoad</code> and <code>.onUnload</code> by packages that
extend <span class="pkg">tinytest</span>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">register_tinytest_extension(pkg, functions)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkg</code></td>
<td>
<p><code>[character]</code> scalar. Name of the package providing extensions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>functions</code></td>
<td>
<p><code>[character]</code> vector. Name of the functions in the package that must be added.</p>
</td>
</tr>
</table>
<h3>The tinytest API</h3>

<p>Packages can extend <span class="pkg">tinytest</span> with expectation functions <em>if and only
if</em> the following requirements are satisfied.
</p>

<ol>
<li>
<p>The extending functions return a <code>tinytest</code> object.  This 
can be created by calling <code>tinytest()</code> with the arguments (defaults,
if any, are in brackets):
</p>

<ul>
<li>
<p><code>result</code>: A <code>logical</code> scalar: <code>TRUE</code> or <code>FALSE</code> (not
<code>NA</code>) 
</p>
</li>
<li>
<p><code>call</code>: The <code>call</code> to the expectation function. Usually the 
result of <code>sys.call(sys.parent(1))</code> 
</p>
</li>
<li>
<p><code>diff</code> (<code>NA_character_</code>): A <code>character</code> scalar, with a long description of the 
difference. Sentences may be separated by <code>"\n"</code>.
</p>
</li>
<li>
<p><code>short</code> (<code>NA_character_</code>): Either <code>"data"</code>, if the difference is in the 
data. <code>"attr"</code> when attributes differ or <code>"xcpt"</code> when 
an expectation about an exception is not met. If there are 
differences in data and in attributes, the attributes take 
precedence.
</p>
</li>
<li>
<p><code>info</code> (<code>NA_character_</code>): A user-defined message.
</p>
</li>
</ul>
<p>Observe that this requires the extending package to add <span class="pkg">tinytest</span> to 
the <code>Imports</code> field in the package's <code>DESCRIPTION</code> file (this 
also holds for the following requirement). 

</p>
</li>
<li>
<p>Functions are registered in <code>.onLoad()</code> using 
<code>register_tinytest_extension()</code>. Functions that are already 
registered, including <span class="pkg">tinytest</span> functions will be overwritten.
</p>
</li>
</ol>
<p>It is <em>recommended</em> to:
</p>

<ol>
<li>
<p>Follow the syntax conventions of <span class="pkg">tinytest</span> so expectation 
functions start with <code>expect_</code>.
</p>
</li>
<li>
<p>Explain to users of the extension package how to use the extension 
(see <code>using</code>).
</p>
</li>
<li>
<p>include an <code>info</code> argument to <code>expect_</code> functions that 
is passed to <code>tinytest()</code>.
</p>
</li>
</ol>
<h3>Minimal example packages</h3>


<ul>
<li>
<p>Extending <span class="pkg">tinytest</span>:
<a href="https://github.com/markvanderloo/tinytest.extension">tinytest.extension</a>.
</p>
</li>
<li>
<p>Using a <span class="pkg">tinytest</span> extension:
<a href="https://github.com/markvanderloo/uses.tinytest.extension">using.tinytest.extension</a>.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Other extensions: 
<code>tinytest()</code>,
<code>using()</code>
</p>


</div>
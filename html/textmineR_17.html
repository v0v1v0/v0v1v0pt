<div class="container">

<table style="width: 100%;"><tr>
<td>FitCtmModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit a Correlated Topic Model</h2>

<h3>Description</h3>

<p>A wrapper for the CTM function based on 
Blei's original code that returns a nicely-formatted topic model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">FitCtmModel(
  dtm,
  k,
  calc_coherence = TRUE,
  calc_r2 = FALSE,
  return_all = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dtm</code></td>
<td>
<p>A document term matrix of class <code>dgCMatrix</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>Number of topics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calc_coherence</code></td>
<td>
<p>Do you want to calculate probabilistic coherence of topics
after the model is trained? Defaults to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calc_r2</code></td>
<td>
<p>Do you want to calculate R-squared after the model is trained?
Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_all</code></td>
<td>
<p>Logical. Do you want the raw results of the underlying 
function returned along with the formatted results? Defaults to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments to pass to CTM or TmParallelApply.
See note below.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a list with a minimum of two objects, <code>phi</code> and 
<code>theta</code>. The rows of <code>phi</code> index topics and the columns index tokens.
The rows of <code>theta</code> index documents and the columns index topics.
</p>


<h3>Note</h3>

<p>When passing additional arguments to CTM, you must unlist the 
elements in the <code>control</code> argument and pass them one by one. See examples for
how to dot this correctly.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load a pre-formatted dtm 
data(nih_sample_dtm) 

# Fit a CTM model on a sample of documents
model &lt;- FitCtmModel(dtm = nih_sample_dtm[ sample(1:nrow(nih_sample_dtm) , 10) , ], 
                     k = 3, return_all = FALSE)
                     
# the correct way to pass control arguments to CTM
## Not run: 
topics_CTM &lt;- FitCtmModel(
    dtm = nih_sample_dtm[ sample(1:nrow(nih_sample_dtm) , 10) , ],
    k = 10,
    calc_coherence = TRUE,
    calc_r2 = TRUE,
    return_all = TRUE,
    estimate.beta = TRUE,
    verbose = 0,
    prefix = tempfile(),
    save = 0,
    keep = 0,
    seed = as.integer(Sys.time()),
    nstart = 1L,
    best = TRUE,
    var = list(iter.max = 500, tol = 10^-6),
    em = list(iter.max = 1000, tol = 10^-4),
    initialize = "random",
    cg = list(iter.max = 500, tol = 10^-5)
)

## End(Not run)
</code></pre>


</div>
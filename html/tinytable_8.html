<div class="container">

<table style="width: 100%;"><tr>
<td>format_tt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Format columns of a data frame</h2>

<h3>Description</h3>

<p>This function formats the columns of a data frame based on the column type (logical, date, numeric).
It allows various formatting options like significant digits, decimal points, and scientific notation.
It also includes custom formatting for date and boolean values.
If this function is applied several times to the same cell, the last transformation is retained and the previous calls are ignored, except for the <code>escape</code> argument which can be applied to previously transformed data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">format_tt(
  x,
  i = NULL,
  j = NULL,
  digits = get_option("tinytable_format_digits", default = NULL),
  num_fmt = get_option("tinytable_format_num_fmt", default = "significant"),
  num_zero = get_option("tinytable_format_num_zero", default = FALSE),
  num_suffix = get_option("tinytable_format_num_suffix", default = FALSE),
  num_mark_big = get_option("tinytable_format_num_mark_big", default = ""),
  num_mark_dec = get_option("tinytable_format_num_mark_dec", default =
    getOption("OutDec", default = ".")),
  date = get_option("tinytable_format_date", default = "%Y-%m-%d"),
  bool = get_option("tinytable_format_bool", default = function(column)
    tools::toTitleCase(tolower(column))),
  math = get_option("tinytable_format_math", default = FALSE),
  other = get_option("tinytable_format_other", default = as.character),
  replace = get_option("tinytable_format_replace", default = TRUE),
  escape = get_option("tinytable_format_escape", default = FALSE),
  markdown = get_option("tinytable_format_markdown", default = FALSE),
  quarto = get_option("tinytable_format_quarto", default = FALSE),
  fn = get_option("tinytable_format_fn", default = NULL),
  sprintf = get_option("tinytable_format_sprintf", default = NULL),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A data frame or a vector to be formatted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>
<p>Row indices where the formatting should be applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>j</code></td>
<td>
<p>Column indices where the styling should be applied. Can be:
</p>

<ul>
<li>
<p> Integer vectors indicating column positions.
</p>
</li>
<li>
<p> Character vector indicating column names.
</p>
</li>
<li>
<p> A single string specifying a Perl-style regular expression used to match column names.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Number of significant digits or decimal places.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_fmt</code></td>
<td>
<p>The format for numeric values; one of 'significant', 'significant_cell', 'decimal', or 'scientific'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_zero</code></td>
<td>
<p>Logical; if TRUE, trailing zeros are kept in "decimal" format (but not in "significant" format).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_suffix</code></td>
<td>
<p>Logical; if TRUE display short numbers with <code>digits</code> significant digits and K (thousands), M (millions), B (billions), or T (trillions) suffixes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_mark_big</code></td>
<td>
<p>Character to use as a thousands separator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_mark_dec</code></td>
<td>
<p>Decimal mark character. Default is the global option 'OutDec'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date</code></td>
<td>
<p>A string passed to the <code>format()</code> function, such as "%Y-%m-%d". See the "Details" section in <code>?strptime</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bool</code></td>
<td>
<p>A function to format logical columns. Defaults to title case.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>math</code></td>
<td>
<p>Logical. If TRUE, wrap cell values in math mode <code style="white-space: pre;">⁠$..$⁠</code>. This is useful for LaTeX output or with HTML MathJax <code>options(tinytable_html_mathjax=TRUE)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>other</code></td>
<td>
<p>A function to format columns of other types. Defaults to <code>as.character()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace</code></td>
<td>
<p>Logical, String or Named list of vectors
</p>

<ul>
<li>
<p> TRUE: Replace <code>NA</code> by an empty string.
</p>
</li>
<li>
<p> FALSE: Print <code>NA</code> as the string "NA".
</p>
</li>
<li>
<p> String: Replace <code>NA</code> entries by the user-supplied string.
</p>
</li>
<li>
<p> Named list: Replace matching elements of the vectors in the list by theirs names. Example:
</p>

<ul><li> <p><code>list("-" = c(NA, NaN), "Tiny" = -Inf, "Massive" = Inf)</code>
</p>
</li></ul>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>escape</code></td>
<td>
<p>Logical or "latex" or "html". If TRUE, escape special characters to display them as text in the format of the output of a <code>tt()</code> table.
</p>

<ul><li>
<p> If <code>i</code> and <code>j</code> are both <code>NULL</code>, escape all cells, column names, caption, notes, and spanning labels created by <code>group_tt()</code>.
</p>
</li></ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>markdown</code></td>
<td>
<p>Logical; if TRUE, render markdown syntax in cells. Ex: <code style="white-space: pre;">⁠_italicized text_⁠</code> is properly italicized in HTML and LaTeX.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quarto</code></td>
<td>
<p>Logical. Enable Quarto data processing and wrap cell content in a <code>data-qmd</code> span (HTML) or <code style="white-space: pre;">⁠\QuartoMarkdownBase64{}⁠</code> macro (LaTeX). See warnings in the Global Options section below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fn</code></td>
<td>
<p>Function for custom formatting. Accepts a vector and returns a character vector of the same length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sprintf</code></td>
<td>
<p>String passed to the <code>?sprintf</code> function to format numbers or interpolate strings with a user-defined pattern (similar to the <code>glue</code> package, but using Base R).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments are ignored.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame with formatted columns.
</p>


<h3>Global options</h3>



<h4>Quarto</h4>



<h5>Figure environment</h5>


<ul><li> <p><code>options("tinytable_quarto_figure" = FALSE)</code>: Typst only. Normally, it is best to allow Quarto to define the figure environment, so the default behavior is to not include one.
</p>
</li></ul>
<h5>Data Processing</h5>

<p>The <code>format_tt(quarto=TRUE)</code> argument activates Quarto data processing for specific cells. This funcationality comes with  a few warnings:
</p>

<ol>
<li>
<p> Currently, Quarto provides a <code style="white-space: pre;">⁠\QuartoMarkdownBase64{}⁠</code> LaTeX macro, but it does not appear to do anything with it. References and markdown codes may not be processed as expected in LaTeX.
</p>
</li>
<li>
<p> Quarto data processing can enter in conflict with <code>tinytable</code> styling or formatting options. See below for how to disable it.
</p>
</li>
</ol>
<p><code>options(tinytable_quarto_disable_processing = TRUE)</code>
</p>
<p>Disable Quarto processing of cell content. Setting this global option to <code>FALSE</code> may lead to conflicts with some <code>tinytable</code> features, but it also allows use of markdown and Quarto-specific code in table cells, such as cross-references.
</p>
<div class="sourceCode r"><pre>x &lt;- data.frame(Math = "x^2^", Citation = "@Lovelace1842")
fn &lt;- function(z) sprintf("&lt;span data-qmd='%s'&gt;&lt;/span&gt;", z)
tt(x) |&gt; format_tt(i = 1, fn = fn)
</pre></div>
<p>See this link for more details: https://quarto.org/docs/authoring/tables.html#disabling-quarto-table-processing
</p>




<h4>HTML</h4>


<ul>
<li> <p><code>options(tinytable_html_mathjax = TRUE)</code>: insert MathJax scripts in the HTML document. Warning: This may conflict with other elements of the page if MathJax is otherwise loaded.
</p>
</li>
<li> <p><code>options(tinytable_html_portable = TRUE)</code>: <code>plot_tt()</code> inserts base 64 encoded images directly in the HTML file rather than use external links.
</p>
</li>
</ul>
<h4>PDF</h4>


<ul>
<li> <p><code>options(tinytable_pdf_clean = TRUE)</code> deletes temporary and log files.
</p>
</li>
<li> <p><code>options(tinytable_pdf_engine = "xelatex")</code>: "xelatex", "pdflatex", "lualatex"
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">dat &lt;- data.frame(
  a = rnorm(3, mean = 10000),
  b = rnorm(3, 10000))
tab &lt;- tt(dat)
format_tt(tab,
 digits = 2,
 num_mark_dec = ",",
 num_mark_big = " ")
 
k &lt;- tt(data.frame(x = c(0.000123456789, 12.4356789)))
format_tt(k, digits = 2, num_fmt = "significant_cell")
 
dat &lt;- data.frame(
   a = c("Burger", "Halloumi", "Tofu", "Beans"),
   b = c(1.43202, 201.399, 0.146188, 0.0031),
   c = c(98938272783457, 7288839482, 29111727, 93945))
tt(dat) |&gt;
 format_tt(j = "a", sprintf = "Food: %s") |&gt;
 format_tt(j = 2, digits = 1, num_fmt = "decimal", num_zero = TRUE) |&gt;
 format_tt(j = "c", digits = 2, num_suffix = TRUE)
 
y &lt;- tt(data.frame(x = c(123456789.678, 12435.6789)))
format_tt(y, digits=3, num_mark_big=" ")

x &lt;- tt(data.frame(Text = c("_italicized text_", "__bold text__")))
format_tt(x, markdown=TRUE)

tab &lt;- data.frame(a = c(NA, 1, 2), b = c(3, NA, 5))
tt(tab) |&gt; format_tt(replace = "-")

dat &lt;- data.frame(
   "LaTeX" = c("Dollars $", "Percent %", "Underscore _"),
   "HTML" = c("&lt;br&gt;", "&lt;sup&gt;4&lt;/sup&gt;", "&lt;emph&gt;blah&lt;/emph&gt;")
)
tt(dat) |&gt; format_tt(escape = TRUE)   

</code></pre>


</div>
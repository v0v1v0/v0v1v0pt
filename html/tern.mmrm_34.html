<div class="container">

<table style="width: 100%;"><tr>
<td>tabulate_mmrm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Tabulation of <code>MMRM</code> Results</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>
<p>These functions can be used to produce tables from a fitted <code>MMRM</code> produced with
<code>fit_mmrm()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'tern_mmrm'
as.rtable(x, type = c("fixed", "cov", "diagnostic"), ...)

h_mmrm_fixed(x, format = "xx.xxxx")

h_mmrm_cov(x, format = "xx.xxxx")

h_mmrm_diagnostic(x, format = "xx.xxxx")

## S3 method for class 'tern_mmrm'
tidy(x, ...)

s_mmrm_lsmeans(df, .in_ref_col, show_relative = c("reduction", "increase"))

a_mmrm_lsmeans(df, .in_ref_col, show_relative = c("reduction", "increase"))

s_mmrm_lsmeans_single(df)

a_mmrm_lsmeans_single(df)

summarize_lsmeans(
  lyt,
  arms = TRUE,
  ...,
  table_names = "lsmeans_summary",
  .stats = NULL,
  .formats = NULL,
  .indent_mods = NULL,
  .labels = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>(<code>tern_mmrm</code>)<br> the original result from <code>fit_mmrm()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>(<code>string</code>)<br> type of table which should be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional argument <code>format</code> for controlling the numeric format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>(<code>string</code>)<br> format for the numbers in the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>(<code style="white-space: pre;">⁠data frame⁠</code>)<br> data set containing all analysis variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.in_ref_col</code></td>
<td>
<p>(<code>logical</code>)<br><code>TRUE</code> when working with the reference level, <code>FALSE</code> otherwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_relative</code></td>
<td>
<p>should the "reduction" (<code>control - treatment</code>, default) or the "increase"
(<code>treatment - control</code>) be shown for the relative change from baseline?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lyt</code></td>
<td>
<p>(<code>layout</code>)<br> input layout where analyses will be added to.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arms</code></td>
<td>
<p>(<code>flag</code>)<br>  should treatment variable be considered when using
<code>summarize_lsmeans</code> layout generating function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table_names</code></td>
<td>
<p>(<code>character</code>)<br> this can be customized in case that the same <code>vars</code> are analyzed multiple times,
to avoid warnings from <code>rtables</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.stats</code></td>
<td>
<p>(<code>character</code>)<br> statistics to select for the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.formats</code></td>
<td>
<p>(named <code>character</code> or <code>list</code>)<br> formats for the statistics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.indent_mods</code></td>
<td>
<p>(named <code>integer</code>)<br> indent modifiers for the labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.labels</code></td>
<td>
<p>(named <code>character</code>)<br> labels for the statistics (without indent).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>as.rtable.tern_mmrm()</code> returns the fixed effects, covariance estimate or
diagnostic statistics tables.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>as.rtable(tern_mmrm)</code>: Produce simple <code>MMRM</code> tables via the generic <code>as.rtable()</code>.
</p>
</li>
<li> <p><code>h_mmrm_fixed()</code>: Helper function to produce fixed effects table.
</p>
</li>
<li> <p><code>h_mmrm_cov()</code>: Helper function to produce a covariance matrix table.
</p>
</li>
<li> <p><code>h_mmrm_diagnostic()</code>: Helper function to produce a diagnostic statistics table.
</p>
</li>
<li> <p><code>tidy(tern_mmrm)</code>: Helper method (for <code>broom::tidy()</code>) to prepare a <code>data.frame</code> from an
<code>tern_mmrm</code> object containing the least-squares means and contrasts.
</p>
</li>
<li> <p><code>s_mmrm_lsmeans()</code>: Statistics function which is extracting estimates from a tidied least-squares means
data frame.
</p>
</li>
<li> <p><code>a_mmrm_lsmeans()</code>: Formatted Analysis function which can be further customized by calling
<code>rtables::make_afun()</code> on it. It is used as <code>afun</code> in <code>rtables::analyze()</code>.
</p>
</li>
<li> <p><code>s_mmrm_lsmeans_single()</code>: Statistics function which is extracting estimates from a tidied least-squares means
data frame when <code>ARM</code> is not considered in the model.
</p>
</li>
<li> <p><code>a_mmrm_lsmeans_single()</code>: Formatted Analysis function (when <code>ARM</code> is not considered in the model)
which can be further customized by calling
<code>rtables::make_afun()</code> on it. It is used as <code>afun</code> in <code>rtables::analyze()</code>.
</p>
</li>
<li> <p><code>summarize_lsmeans()</code>: Analyze function for tabulating least-squares means estimates from tidied <code>mmrm</code> results.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">result &lt;- fit_mmrm(
  vars = list(
    response = "FEV1",
    covariates = c("RACE", "SEX"),
    id = "USUBJID",
    arm = "ARMCD",
    visit = "AVISIT"
  ),
  data = mmrm_test_data,
  cor_struct = "unstructured",
  weights_emmeans = "equal"
)
as.rtable(result, type = "cov", format = "xx.x")

result_no_arm &lt;- fit_mmrm(
  vars = list(
    response = "FEV1",
    covariates = c("RACE", "SEX"),
    id = "USUBJID",
    visit = "AVISIT"
  ),
  data = mmrm_test_data,
  cor_struct = "unstructured",
  weights_emmeans = "equal"
)
as.rtable(result_no_arm, type = "cov", format = "xx.x")
df &lt;- broom::tidy(result)
df_no_arm &lt;- broom::tidy(result_no_arm)
s_mmrm_lsmeans(df[8, ], .in_ref_col = FALSE)
s_mmrm_lsmeans_single(df_no_arm[4, ])
library(dplyr)

dat_adsl &lt;- mmrm_test_data %&gt;%
  select(USUBJID, ARMCD) %&gt;%
  unique()
basic_table() %&gt;%
  split_cols_by("ARMCD", ref_group = result$ref_level) %&gt;%
  add_colcounts() %&gt;%
  split_rows_by("AVISIT") %&gt;%
  summarize_lsmeans(
    .stats = c("n", "adj_mean_se", "adj_mean_ci", "diff_mean_se", "diff_mean_ci"),
    .labels = c(adj_mean_se = "Adj. LS Mean (Std. Error)"),
    .formats = c(adj_mean_se = sprintf_format("%.1f (%.2f)"))
  ) %&gt;%
  build_table(
    df = broom::tidy(result),
    alt_counts_df = dat_adsl
  )

basic_table() %&gt;%
  split_rows_by("AVISIT") %&gt;%
  summarize_lsmeans(arms = FALSE) %&gt;%
  build_table(
    df = broom::tidy(result_no_arm),
    alt_counts_df = dat_adsl
  )
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>control_step</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Control function for subgroup treatment effect pattern (STEP) calculations</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>
<p>This is an auxiliary function for controlling arguments for STEP calculations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">control_step(
  biomarker = NULL,
  use_percentile = TRUE,
  bandwidth,
  degree = 0L,
  num_points = 39L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>biomarker</code></td>
<td>
<p>(<code>numeric</code> or <code>NULL</code>)<br> optional provision of the numeric biomarker variable, which
could be used to infer <code>bandwidth</code>, see below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_percentile</code></td>
<td>
<p>(<code>flag</code>)<br> if <code>TRUE</code>, the running windows are created according to
quantiles rather than actual values, i.e. the bandwidth refers to the percentage of data
covered in each window. Suggest <code>TRUE</code> if the biomarker variable is not uniformly
distributed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bandwidth</code></td>
<td>
<p>(<code>numeric(1)</code> or <code>NULL</code>)<br> indicating the bandwidth of each window.
Depending on the argument <code>use_percentile</code>, it can be either the length of actual-value
windows on the real biomarker scale, or percentage windows.
If <code>use_percentile = TRUE</code>, it should be a number between 0 and 1.
If <code>NULL</code>, treat the bandwidth to be infinity, which means only one global model will be fitted.
By default, <code>0.25</code> is used for percentage windows and one quarter of the range of the <code>biomarker</code>
variable for actual-value windows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>degree</code></td>
<td>
<p>(<code>integer(1)</code>)<br> the degree of polynomial function of the biomarker as an interaction term
with the treatment arm fitted at each window. If 0 (default), then the biomarker variable
is not included in the model fitted in each biomarker window.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_points</code></td>
<td>
<p>(<code>integer(1)</code>)<br> the number of points at which the hazard ratios are estimated. The
smallest number is 2.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of components with the same names as the arguments, except <code>biomarker</code> which is
just used to calculate the <code>bandwidth</code> in case that actual biomarker windows are requested.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Provide biomarker values and request actual values to be used,
# so that bandwidth is chosen from range.
control_step(biomarker = 1:10, use_percentile = FALSE)

# Use a global model with quadratic biomarker interaction term.
control_step(bandwidth = NULL, degree = 2)

# Reduce number of points to be used.
control_step(num_points = 10)

</code></pre>


</div>
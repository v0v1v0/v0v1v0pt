<div class="container">

<table style="width: 100%;"><tr>
<td>step_log_interval</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Log Interval Transformation for Constrained Interval Forecasting</h2>

<h3>Description</h3>

<p><code>step_log_interval</code> creates a <em>specification</em> of a recipe
step that will transform data using a Log-Inerval
transformation. This function provides a <code>recipes</code> interface
for the <code>log_interval_vec()</code> transformation function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">step_log_interval(
  recipe,
  ...,
  limit_lower = "auto",
  limit_upper = "auto",
  offset = 0,
  role = NA,
  trained = FALSE,
  limit_lower_trained = NULL,
  limit_upper_trained = NULL,
  skip = FALSE,
  id = rand_id("log_interval")
)

## S3 method for class 'step_log_interval'
tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>recipe</code></td>
<td>
<p>A <code>recipe</code> object. The step will be added to the sequence of operations for this recipe.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>One or more selector functions to choose which
variables are affected by the step. See <code>selections()</code>
for more details. For the <code>tidy</code> method, these are not
currently used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit_lower</code></td>
<td>
<p>A lower limit. Must be less than the minimum value.
If set to "auto", selects zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit_upper</code></td>
<td>
<p>An upper limit. Must be greater than the maximum value.
If set to "auto",  selects a value that is 10% greater than the maximum value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>An offset to include in the log transformation.
Useful when the data contains values less than or equal to zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>role</code></td>
<td>
<p>Not used by this step since no new variables are
created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trained</code></td>
<td>
<p>A logical to indicate if the quantities for preprocessing have been estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit_lower_trained</code></td>
<td>
<p>A numeric vector of transformation values. This
is <code>NULL</code> until computed by <code>prep()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit_upper_trained</code></td>
<td>
<p>A numeric vector of transformation values. This
is <code>NULL</code> until computed by <code>prep()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip</code></td>
<td>
<p>A logical. Should the step be skipped when the recipe
is baked by <code>bake.recipe()</code>? While all operations are baked when <code>prep.recipe()</code> is run,
some operations may not be able to be conducted on new data (e.g. processing the outcome variable(s)).
Care should be taken when using <code>skip = TRUE</code> as it may affect the computations for subsequent operations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>A character string that is unique to this step to identify it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>step_log_interval</code> object.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>step_log_interval()</code> function is designed specifically to handle time series
using methods implemented in the Forecast R Package.
</p>
<p><strong>Positive Data</strong>
</p>
<p>If data includes values of zero, use <code>offset</code> to adjust the series to make the values positive.
</p>
<p><strong>Implementation</strong>
</p>
<p>Refer to the <code>log_interval_vec()</code> function for the transformation implementation details.
</p>


<h3>Value</h3>

<p>An updated version of <code>recipe</code> with the new step
added to the sequence of existing steps (if any). For the
<code>tidy</code> method, a tibble with columns <code>terms</code> (the
selectors or variables selected) and <code>value</code> (the
lambda estimate).
</p>


<h3>See Also</h3>

<p>Time Series Analysis:
</p>

<ul>
<li>
<p> Engineered Features: <code>step_timeseries_signature()</code>, <code>step_holiday_signature()</code>, <code>step_fourier()</code>
</p>
</li>
<li>
<p> Diffs &amp; Lags <code>step_diff()</code>, <code>recipes::step_lag()</code>
</p>
</li>
<li>
<p> Smoothing: <code>step_slidify()</code>, <code>step_smooth()</code>
</p>
</li>
<li>
<p> Variance Reduction: <code>step_log_interval()</code>
</p>
</li>
<li>
<p> Imputation: <code>step_ts_impute()</code>, <code>step_ts_clean()</code>
</p>
</li>
<li>
<p> Padding: <code>step_ts_pad()</code>
</p>
</li>
</ul>
<p>Transformations to reduce variance:
</p>

<ul>
<li> <p><code>recipes::step_log()</code> - Log transformation
</p>
</li>
<li> <p><code>recipes::step_sqrt()</code> - Square-Root Power Transformation
</p>
</li>
</ul>
<p>Recipe Setup and Application:
</p>

<ul>
<li> <p><code>recipes::recipe()</code>
</p>
</li>
<li> <p><code>recipes::prep()</code>
</p>
</li>
<li> <p><code>recipes::bake()</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)
library(recipes)

FANG_wide &lt;- FANG %&gt;%
    select(symbol, date, adjusted) %&gt;%
    tidyr::pivot_wider(names_from = symbol, values_from = adjusted)

recipe_log_interval &lt;- recipe(~ ., data = FANG_wide) %&gt;%
    step_log_interval(FB, AMZN, NFLX, GOOG, offset = 1) %&gt;%
    prep()

recipe_log_interval %&gt;%
    bake(FANG_wide) %&gt;%
    tidyr::pivot_longer(-date) %&gt;%
    plot_time_series(date, value, name, .smooth = FALSE, .interactive = FALSE)

recipe_log_interval %&gt;% tidy(1)

</code></pre>


</div>
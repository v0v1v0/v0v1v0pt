<div class="container">

<table style="width: 100%;"><tr>
<td>protect_math</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Protect math elements from commonmark's character escape</h2>

<h3>Description</h3>

<p>Protect math elements from commonmark's character escape
</p>


<h3>Usage</h3>

<pre><code class="language-R">protect_math(body, ns = md_ns())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>body</code></td>
<td>
<p>an XML object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ns</code></td>
<td>
<p>an XML namespace object (defaults: <code>md_ns()</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Commonmark does not know what LaTeX is and will LaTeX equations as
normal text. This means that content surrounded by underscores are
interpreted as <code style="white-space: pre;">⁠&lt;emph&gt;⁠</code> elements and all backslashes are escaped by default.
This function protects inline and block math elements that use <code>$</code> and <code style="white-space: pre;">⁠$$⁠</code>
for delimiters, respectively.
</p>


<h3>Value</h3>

<p>a copy of the modified XML object
</p>


<h3>Note</h3>

<p>this function is also a method in the yarn object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">m &lt;- tinkr::to_xml(system.file("extdata", "math-example.md", package = "tinkr"))
txt &lt;- textConnection(tinkr::to_md(m))
cat(tail(readLines(txt)), sep = "\n") # broken math
close(txt)
m$body &lt;- protect_math(m$body)
txt &lt;- textConnection(tinkr::to_md(m))
cat(tail(readLines(txt)), sep = "\n") # fixed math
close(txt)
</code></pre>


</div>
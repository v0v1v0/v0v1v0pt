<div class="container">

<table style="width: 100%;"><tr>
<td>get_tongfen_ca_census</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Togfen data from several Canadian censuses</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing"><img src="../help/figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
</p>
<p>Get data from several Candian censuses on a common geography. Requires sf and cancensus package to be available
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_tongfen_ca_census(
  regions,
  meta,
  level = "CT",
  method = "statcan",
  base_geo = NULL,
  na.rm = FALSE,
  tolerance = 50,
  area_mismatch_cutoff = 0.1,
  quiet = FALSE,
  refresh = FALSE,
  crs = NULL,
  data_transform = function(d) d
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>regions</code></td>
<td>
<p>census region list, should be inclusive list of GeoUIDs across censuses</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meta</code></td>
<td>
<p>metadata for the census veraiables to aggregate, for example as returned
by <code>meta_for_ca_census_vectors</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>aggregation level to return data on (default is "CT")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>tongfen method, options are "statcan" (the default), "estimate", "identifier".
* "statcan" method builds up the common geography using Statistics Canada correspondence files, at this point
this method only works for "DB", "DA" and "CT" levels.
* "estimate" uses 'estimate_tongfen_correspondence' to build up the common geography from scratch based on geographies.
* "identifier" assumes regions with identical geographic identifier are identical, and builds up the the correspondence for regions with unmatched geographic identifiers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_geo</code></td>
<td>
<p>base census year to build up common geography from, 'NULL' (the default) to not return
any geographi data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>logical, determines how NA values should be treated when aggregating variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tolerance</code></td>
<td>
<p>tolerance for 'estimate_tongen_correspondence' in metres, default value is 50 metres,
only used when method is 'estimate' or 'identifier'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>area_mismatch_cutoff</code></td>
<td>
<p>discard areas returned by 'estimate_tongfen_correspondence' with area mismatch (log ratio) greater than cutoff,
only used when method is 'estimate' or 'identifier'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>suppress download progress output, default is 'FALSE'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refresh</code></td>
<td>
<p>optional character, refresh data cache for this call, (default 'FALSE')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crs</code></td>
<td>
<p>optional CRS to transform data to, and use for spatial intersections if method is
'identifier' or 'estimate'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_transform</code></td>
<td>
<p>optional transform function to be applied to census data after being returned from cancensus</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>dataframe with variables on common geography
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Get rent data for census years 2001 through 2016
## Not run: 
rent_variables &lt;- c(rent_2001="v_CA01_1667",rent_2016="v_CA16_4901",
                    rent_2011="v_CA11N_2292",rent_2006="v_CA06_2050")
meta &lt;- meta_for_ca_census_vectors(rent_variables)

regions=list(CMA="59933")
rent_data &lt;- get_tongfen_ca_census(regions=regions, meta=meta, quiet=TRUE,
                                   method="estimate", level="CT", base_geo = "CA16")


## End(Not run)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>t1read</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read and augment data with extended metadata attributes</h2>

<h3>Description</h3>

<p>Read and augment data with extended metadata attributes
</p>


<h3>Usage</h3>

<pre><code class="language-R">t1read(data, metadata = NULL, read.fun = read.csv, ..., escape.html = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Either a file name (<code>character</code>) or a <code>data.frame</code>. If
a file name it will be read using the function <code>read.fun</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadata</code></td>
<td>
<p>Either a file name (<code>character</code>) or a <code>list</code>. If a
file name it will be read using the function <code>read_yaml</code>
(so it should be a file the contains valid YAML text), and a <code>list</code> results.
See Details regarding the <code>list</code> contents.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>read.fun</code></td>
<td>
<p>A function to read files. It should accept a file name as
its first argument and return a <code>data.frame</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further optional arguments, passed to <code>read.fun</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>escape.html</code></td>
<td>
<p>Logical. Should strings (labels, units) be converted to
valid HTML by escaping special symbols?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>metadata</code> list may contain the following 3 named elements
(other elements are ignored):
</p>

<ul>
<li> <p><code>labels</code>: a named list, with names corresponding to columns in <code>data</code>
and values the associated label attribute.
</p>
</li>
<li> <p><code>units</code>: a named list, with names corresponding to columns in <code>data</code>
and values the associated units attribute.
</p>
</li>
<li> <p><code>categoricals</code>: a named list, with names corresponding to columns in
<code>data</code> and values are themselves lists, used to convert the column to
a <code>factor</code>: the list names are the levels, and the values are the
associated labels. The names can also be omitted if the goal is just to
specify the order of the factor levels.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A <code>data.frame</code> (as returned by <code>read.fun</code>).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Simulate some data
set.seed(123)
data &lt;- expand.grid(sex=0:1, cohort=1:3)[rep(1:6, times=c(7, 9, 21, 22, 11, 14)),]
data$age &lt;- runif(nrow(data), 18, 80)
data$agecat &lt;- 1*(data$age &gt;= 65)
data$wgt &lt;- rnorm(nrow(data), 75, 15)

metadata &lt;- list(
  labels=list(
    cohort = "Cohort",
    sex = "Sex",
    age = "Age",
    agecat  = "Age category",
    wgt = "Weight"),
  units=list(
    age = "years",
    wgt = "kg"),
  categoricals=list(
    cohort = list(
      `1` = "Cohort A",
      `2` = "Cohort B",
      `3` = "Cohort C"),
    sex = list(
      `0` = "Female",
      `1` = "Male"),
    agecat = list(
      `0` = "&lt; 65",
      `1` = "\U{2265} 65")))

 data &lt;- t1read(data, metadata)
 table1(~ sex + age + agecat + wgt | cohort, data=data)

</code></pre>


</div>
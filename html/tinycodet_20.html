<div class="container">

<table style="width: 100%;"><tr>
<td>str_search</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>'stringi' Pattern Search Operators</h2>

<h3>Description</h3>

<p>The <code>x %s{}% p</code> operator
checks for every string in character vector <code>x</code> if
the pattern defined in <code>p</code> is present. <br>
When supplying a list on the right hand side (see s_pattern),
one can optionally include the list element <code>at = "start"</code> or <code>at = "end"</code>:
</p>

<ul>
<li>
<p> Supplying  <code>at = "start"</code>
will check if the pattern appears at the start of a string
(like stri_startswith).
</p>
</li>
<li>
<p> Supplying  <code>at = "end"</code>
will check if the pattern appears at the end of a string
(like stri_endswith). <br></p>
</li>
</ul>
<p>The <code>x %s!{}% p</code> operator is the same as <code>x %s{}% p</code>,
except it checks for <b>absence</b> of the pattern,
rather than presence. <br><br>
For string (in)equality operators,
see %s==% from the 'stringi' package. <br><br><code>strfind()&lt;-</code>
locates, extracts, or replaces found patterns. <br>
It complements the other string-related operators,
and uses the same s_pattern API. <br>
It functions as follows:
</p>

<ul>
<li> <p><code>strfind()</code> finds all pattern matches,
and returns the extractions of the findings in a list,
just like stri_extract_all.
</p>
</li>
<li> <p><code>strfind(..., i = "all" )</code>,
finds all pattern matches
like stri_locate_all.
</p>
</li>
<li> <p><code>strfind(..., i = i)</code>, where <code>i</code> is an integer vector,
locates the <code class="reqn">i^{th}</code> occurrence of a pattern,
and reports the locations in a matrix,
just like stri_locate_ith.
</p>
</li>
<li> <p><code>strfind() &lt;- value</code> finds pattern matches in variable <code>x</code>,
replaces the pattern matches with the character vector specified in <code>value</code>,
and assigns the transformed character vector back to <code>x</code>. <br>
This is somewhat similar to stri_replace,
though the replacement is done in-place. <br><br></p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">x %s{}% p

x %s!{}% p

strfind(x, p, ..., i, rt)

strfind(x, p, ..., i, rt) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a string or character vector. <br>
For <code style="white-space: pre;">⁠strfind()&lt;-⁠</code>,
<code>x</code> must obviously be the variable containing the character vector/string,
since <code style="white-space: pre;">⁠strfind()&lt;-⁠</code> performs assignment in-place. <br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>either a list with 'stringi' arguments (see s_pattern),
or else a character vector with regular expressions. <br>
See also the Details section. <br><a href="https://stringi.gagolewski.com/rapi/about_search_regex.html"><img src="../help/figures/aboutsearch-regex-darkred.svg" alt="[REGEX]"></a> <br><a href="https://stringi.gagolewski.com/rapi/about_search_fixed.html"><img src="../help/figures/aboutsearch-fixed-darkgreen.svg" alt="[FIXED]"></a> <br><a href="https://stringi.gagolewski.com/rapi/about_search_coll.html"><img src="../help/figures/aboutsearch-coll-pink.svg" alt="[COLL]"></a> <br><a href="https://stringi.gagolewski.com/rapi/about_search_charclass.html"><img src="../help/figures/aboutsearch-charclass-lightyellow.svg" alt="[CHARCLASS]"></a> <br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>
<p>either one of the following can be given for <code>i</code>:
</p>

<ul>
<li>
<p> if <code>i</code> is not given or <code>NULL</code>,
<code>strfind()</code> extracts all found pattern occurrences.
</p>
</li>
<li>
<p> if <code>i</code> is the string "all",
<code>strfind()</code> locates all found pattern occurrences.
</p>
</li>
<li>
<p> if <code>i</code> is an integer,
<code>strfind()</code> locates the <code class="reqn">i^{th}</code> pattern occurrences. <br>
See the <code>i</code> argument in stri_locate_ith for details.
</p>
</li>
</ul>
<p>For <code>strfind() &lt;- value</code>, <code>i</code> must not be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rt</code></td>
<td>
<p>use <code>rt</code> to specify the Replacement Type that <code style="white-space: pre;">⁠strfind()&lt;-⁠</code> should perform. <br>
Either one of the following can be given for <code>rt</code>:
</p>

<ul>
<li>
<p> if <code>rt</code> is not given, <code>NULL</code> or <code>"vec"</code>,
<code style="white-space: pre;">⁠strfind()&lt;-⁠</code> performs regular, vectorized replacement of <b>all</b> occurrences.
</p>
</li>
<li>
<p> if <code>rt = "dict"</code>,
<code style="white-space: pre;">⁠strfind()&lt;-⁠</code> performs dictionary replacement of <b>all</b> occurrences. <br></p>
</li>
<li>
<p> if <code>rt = "first"</code>,
<code style="white-space: pre;">⁠strfind()&lt;-⁠</code> replaces only the first occurrences.
</p>
</li>
<li>
<p> if <code>rt = "last"</code>,
<code style="white-space: pre;">⁠strfind()&lt;-⁠</code> replaces only the last occurrences.
</p>
</li>
</ul>
<p>Note: <code>rt = "first"</code> and <code>rt = "last"</code> only exist for convenience;
for more specific locational replacement,
use stri_locate_ith or <code>strfind(..., i)</code> with numeric <code>i</code>
(see the Examples section). <br>
For <code>strfind()</code>, <code>rt</code> must not be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>a character vector giving the replacement values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><b>Right-hand Side List for the <code>%s{}%</code> and <code>%s!{}%</code> Operators</b> <br>
When supplying a list to the right-hand side of the
<code>%s{}%</code> and <code>%s!{}%</code> operators,
one can add the argument <code>at</code>. <br>
If <code>at = "start"</code>,
the operators will check if the pattern is present/absent at the start of the string. <br>
If <code>at = "end"</code>,
the operators will check if the pattern is present/absent at the end of the string. <br>
Unlike stri_startswith or stri_endswith,
<code>regex</code> <b>is</b> supported by the <code>%s{}%</code> and <code>%s!{}%</code> operators. <br>
See examples below. <br><br></p>
<p><b>Vectorized Replacement vs Dictionary Replacement</b> <br></p>

<ul>
<li>
<p> Vectorized replacement: <br><code>x</code>, <code>p</code>, and <code>value</code> are of the same length
(or recycled to become the same length). <br><b>All</b> occurrences of pattern <code>p[j]</code> in <code>x[j]</code> is replaced with <code>value[j]</code>,
for every <code>j</code>.
</p>
</li>
<li>
<p> Dictionary replacement: <br><code>p</code> and <code>value</code> are of the same length,
and their length is independent of the length of <code>x</code>. <br>
For every single string in <code>x</code>,
all occurrences of pattern <code>p[1]</code> are replaced with <code>value[1]</code>, <br>
all occurrences of pattern <code>p[2]</code> are replaced with <code>value[2]</code>,
etc. <br></p>
</li>
</ul>
<p>Notice that for single replacement, i.e. <code>rt = "first"</code> or <code>rt = "last"</code>,
it makes no sense to distinguish between vectorized or dictionary replacement,
since then only a single occurrence is being replaced per string. <br>
See examples below. <br><br></p>


<h3>Value</h3>

<p>For the <code>x %s{}% p</code> and <code>x %s!{}% p</code> operators: <br>
Return logical vectors. <br><br>
For <code>strfind()</code>: <br>
Returns a list with extractions of all found patterns. <br><br>
For <code>strfind(..., i = "all")</code>: <br>
Returns a list with all found pattern locations. <br><br>
For <code>strfind(..., i = i)</code> with integer vector <code>i</code>: <br>
Returns an integer matrix with two columns,
giving the start and end positions of the <code class="reqn">i^{th}</code> matches,
two NAs if no matches are found, and also two <code>NA</code>s if str is <code>NA</code>. <br><br>
For <code>strfind() &lt;- value</code>: <br>
Returns nothing,
but performs in-place replacement
(using R's default in-place semantics)
of the found patterns in variable <code>x</code>. <br><br></p>


<h3>Note</h3>

<p><code style="white-space: pre;">⁠strfind()&lt;-⁠</code> performs in-place replacement. <br>
Therefore, the character vector or string to perform replacement on,
must already exist as a variable. <br>
So take for example the following code:
</p>
<div class="sourceCode r"><pre>strfind("hello", p = "e") &lt;- "a" # this obviously does not work

y &lt;- "hello"
strfind(y, p = "e") &lt;- "a" # this works fine

</pre></div>
<p>In the above code, the first <code style="white-space: pre;">⁠strfind()&lt;-⁠</code> call does not work,
because the string needs to exist as a variable. <br><br></p>


<h3>See Also</h3>

<p>tinycodet_strings
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# example of %s{}% and %s!{}% ====

x &lt;- c(paste0(letters[1:13], collapse = ""),
       paste0(letters[14:26], collapse = ""))
print(x)
x %s{}% "a"
x %s!{}% "a"
which(x %s{}% "a")
which(x %s!{}% "a")
x[x %s{}% "a"]
x[x %s!{}% "a"]
x[x %s{}% "a"] &lt;- 1
x[x %s!{}% "a"] &lt;- 1
print(x)

x &lt;- c(paste0(letters[1:13], collapse = ""),
       paste0(letters[14:26], collapse = ""))
x %s{}% "1"
x %s!{}% "1"
which(x %s{}% "1")
which(x %s!{}% "1")
x[x %s{}% "1"]
x[x %s!{}% "1"]
x[x %s{}% "1"] &lt;- "a"
x[x %s!{}% "1"] &lt;- "a"
print(x)

#############################################################################


# Example of %s{}% and %s!{}% with "at" argument ====

x &lt;- c(paste0(letters, collapse = ""),
       paste0(rev(letters), collapse = ""), NA)
p &lt;- s_fixed("abc", at = "start")
x %s{}% p
stringi::stri_startswith(x, fixed = "abc") # same as above

p &lt;- s_fixed("xyz", at = "end")
x %s{}% p
stringi::stri_endswith(x, fixed = "xyz") # same as above

p &lt;- s_fixed("cba", at = "end")
x %s{}% p
stringi::stri_endswith(x, fixed = "cba") # same as above

p &lt;- s_fixed("zyx", at = "start")
x %s{}% p
stringi::stri_startswith(x, fixed = "zyx") # same as above



#############################################################################


# Example of transforming ith occurrence ====

# new character vector:
x &lt;- c(paste0(letters[1:13], collapse = ""),
       paste0(letters[14:26], collapse = ""))
print(x)

# report ith (second and second-last) vowel locations:
p &lt;- s_regex( # vowels
  rep("A|E|I|O|U", 2),
  case_insensitive = TRUE
)
loc &lt;- strfind(x, p, i = c(2, -2))
print(loc)

# extract ith vowels:
extr &lt;- stringi::stri_sub(x, from = loc)
print(extr)

# replace ith vowels with numbers:
repl &lt;- chartr("aeiou", "12345", extr) # transformation
stringi::stri_sub(x, loc) &lt;- repl
print(x)


#############################################################################


# Example of strfind for regular vectorized replacement ====

x &lt;- rep('The quick brown fox jumped over the lazy dog.', 3)
print(x)
p &lt;- c('quick', 'brown', 'fox')
rp &lt;- c('SLOW',  'BLACK', 'BEAR')
x %s{}% p
strfind(x, p)
strfind(x, p) &lt;- rp
print(x)

#############################################################################


# Example of strfind for dictionary replacement ====

x &lt;- rep('The quick brown fox jumped over the lazy dog.', 3)
print(x)
p &lt;- c('quick', 'brown', 'fox')
rp &lt;- c('SLOW',  'BLACK', 'BEAR')
# thus dictionary is:
# quick =&gt; SLOW; brown =&gt; BLACK; fox =&gt; BEAR
strfind(x, p, rt = "dict") &lt;- rp
print(x)


#############################################################################


# Example of strfind for first and last replacement ====

x &lt;- rep('The quick brown fox jumped over the lazy dog.', 3)
print(x)
p &lt;- s_fixed("the", case_insensitive = TRUE)
rp &lt;- "One"
strfind(x, p, rt = "first") &lt;- rp
print(x)

x &lt;- rep('The quick brown fox jumped over the lazy dog.', 3)
print(x)
p &lt;- s_fixed("the", case_insensitive = TRUE)
rp &lt;- "Some Other"
strfind(x, p, rt = "last") &lt;- rp
print(x)




</code></pre>


</div>
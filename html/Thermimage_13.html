<div class="container">

<table style="width: 100%;"><tr>
<td>ffmpegcall</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
A simplified wrapper function calling ffmpeg 
</h2>

<h3>Description</h3>

<p>A simplified wrapper function calling ffmpeg to convert numbered files extracted from FLIR thermal image videos via exiftool into radiometric png files or radiometric avi files.  Mostly for internal use.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ffmpegcall(filenameroot, filenamesuffix="%05d", filenameext="jpegls", 
incompresstype="jpegls", fr=30, res.in="640x480", res.out=res.in, 
outputcompresstype="png", outputfilenameroot=NULL, outputfiletype="avi", 
outputfolder="output",...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>filenameroot</code></td>
<td>

<p>The base root of the files to be converted, without the indexing.  If numbered files are: "Frame00001.fff", "Frame00002.fff", etc., then filenameroot = "Frame".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filenamesuffix</code></td>
<td>

<p>The suffix defining the indexing numbers associated with filename.  If numbered files are: "Frame00001.fff", "Frame00002.fff", etc., then filenamesuffix = "%05d"
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filenameext</code></td>
<td>

<p>File extension for input files.  Typically "jpegls" or "fff"", depending on the video or image filetype (SEQ files are extracted into .fff files; CSQ files are extracted into .jpegls files).  Default = "jpegls".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incompresstype</code></td>
<td>

<p>Input file compression type.  Typically "tiff" (non compressed data in SEQ videos files) or "jpegls" (corresponds to jpegls, a lossless jpeg format (see Details and References).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fr</code></td>
<td>

<p>Frame rate of input video data, frames per sec.  Default = 30.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res.in</code></td>
<td>

<p>Input file image resolution in text format, "wxh".  Default = "640x480"
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res.out</code></td>
<td>

<p>Desired output file image resolution in text format, "wxh". Decrease to make smaller file, but maintain same aspect ratio.  Default = "640x480".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputcompresstype</code></td>
<td>

<p>Desired output file image compression format.  Possible values are "tiff", "png" or "jpegls" (or any modifier from ffmpeg -vcodec).  Default = "png".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputfilenameroot</code></td>
<td>

<p>The base root of the output file(s) to be exported, without the indexing.  If NULL, then the input filenameroot will be used and a numeric index attached.  Default is NULL.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputfiletype</code></td>
<td>

<p>Desired output file type, "avi" or "png".  If "png", multiple files will be exported.  If "avi", a single video file will be exported.  Default = "avi"
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputfolder</code></td>
<td>

<p>Desired output subfolder name, placed inside the folder where the input files are stored.  Default = "output".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Other values to pass to command line functions.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Calls ffmpeg in shell to convert a series of image files, named filenameroot%05d.filenameext, extracted from a thermal image file using the command line tool, exiftool.  The subsequent converted file is a 16 bit grayscale avi or series of images corresponding to each of the input files.
</p>
<p>For example, a typical shell call to ffmpeg might look like:
</p>
<p>ffmpeg -f image2 -vcodec fff -i frame%05d.fff -f image2 -vcodec png frame%05d.png -y
</p>
<p>which converts a series of fff files (frameNNNNN.fff) into a series of png files (frameNNNNN.png).
</p>
<p>Likewise, the following:
</p>
<p>ffmpeg -r 30 -f image2 -vcodec jpegls -s 1024x768 -i frame%05d.jpegls -vcodec png -s 1024x768 frame.avi -y
</p>
<p>converts a series of jpegls files (frameNNNNN.jpegls) into an avi file (frame.avi) with png style compression
</p>
<p>Jpeg-ls is a lossless jpg format (JPG-LS) that is used for certain flir image types (e.g., CSQ, Ultramax FLIR jpg).  The easiest means to convert the extracted, compressed data type is with ffmpeg, which contains the codecs for extraction. 
</p>
<p>For example, once ffmpeg is installed, try in shell: 
</p>
<p>ffmpeg -codecs | grep jpegls
</p>


<h3>Value</h3>

<p>No output generated in R.  Shell call to ffmpeg to convert files.  ffmpeg must be installed on the system.
</p>


<h3>Author(s)</h3>

<p>Glenn J. Tattersall
</p>


<h3>References</h3>

<p>1. https://www.ffmpeg.org/
</p>
<p>2. https://www.eevblog.com/forum/thermal-imaging/csq-file-format/
</p>
<p>3. http://www.digitalpreservation.gov/formats/fdd/fdd000151.shtml 
</p>


<h3>See Also</h3>

<p><code>convertflirVID</code>, 
<code>convertflirJPG</code> 
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Examples 
# See https://github.com/gtatters/FLIRJPGConvert/blob/master/Examples.R

# See https://github.com/gtatters/Thermimage/blob/master/README.md
</code></pre>


</div>
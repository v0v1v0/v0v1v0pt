<div class="container">

<table style="width: 100%;"><tr>
<td>imagebary15B</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Barycenter of Images according to Benamou et al. (2015)</h2>

<h3>Description</h3>

<p>Using entropic regularization for Wasserstein barycenter computation, <code>imagebary15B</code>
finds a <em>barycentric</em> image <code class="reqn">X^*</code> given multiple images <code class="reqn">X_1,X_2,\ldots,X_N</code>.
Please note the followings; (1) we only take a matrix as an image so please
make it grayscale if not, (2) all images should be of same size - no resizing is performed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">imagebary15B(images, p = 2, weights = NULL, lambda = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>images</code></td>
<td>
<p>a length-<code class="reqn">N</code> list of same-size image matrices of size <code class="reqn">(m\times n)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>an exponent for the order of the distance (default: 2).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>a weight of each image; if <code>NULL</code> (default), uniform weight is set. Otherwise,
it should be a length-<code class="reqn">N</code> vector of nonnegative weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>a regularization parameter; if <code>NULL</code> (default), a paper's suggestion
would be taken, or it should be a nonnegative real number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra parameters including </p>

<dl>
<dt>abstol</dt>
<dd>
<p>stopping criterion for iterations (default: 1e-8).</p>
</dd>
<dt>init.image</dt>
<dd>
<p>an initial weight image (default: uniform weight).</p>
</dd>
<dt>maxiter</dt>
<dd>
<p>maximum number of iterations (default: 496).</p>
</dd>
<dt>nthread</dt>
<dd>
<p>number of threads for OpenMP run (default: 1).</p>
</dd>
<dt>print.progress</dt>
<dd>
<p>a logical to show current iteration (default: <code>TRUE</code>).</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an <code class="reqn">(m\times n)</code> matrix of the barycentric image.
</p>


<h3>References</h3>

<p>Benamou J, Carlier G, Cuturi M, Nenna L, Peyré G (2015).
“Iterative Bregman Projections for Regularized Transportation Problems.”
<em>SIAM Journal on Scientific Computing</em>, <b>37</b>(2), A1111–A1138.
ISSN 1064-8275, 1095-7197.
</p>


<h3>See Also</h3>

<p><code>bary15B</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#----------------------------------------------------------------------
#                       MNIST Data with Digit 3
#
# EXAMPLE 1 : Very Small  Example for CRAN; just showing how to use it!
# EXAMPLE 2 : Medium-size Example for Evolution of Output
#----------------------------------------------------------------------
# EXAMPLE 1
data(digit3)
datsmall = digit3[1:2]
outsmall = imagebary15B(datsmall, maxiter=3)

## Not run: 
# EXAMPLE 2 : Barycenter of 100 Images
# RANDOMLY SELECT THE IMAGES
data(digit3)
dat2 = digit3[sample(1:2000, 100)]  # select 100 images

# RUN SEQUENTIALLY
run05 = imagebary15B(dat2, maxiter=5)                    # first 5 iterations
run10 = imagebary15B(dat2, maxiter=5,  init.image=run05) # run 5 more
run50 = imagebary15B(dat2, maxiter=40, init.image=run10) # run 40 more

# VISUALIZE
opar &lt;- par(no.readonly=TRUE)
par(mfrow=c(2,3), pty="s")
image(dat2[[sample(100,1)]], axes=FALSE, main="a random image")
image(dat2[[sample(100,1)]], axes=FALSE, main="a random image")
image(dat2[[sample(100,1)]], axes=FALSE, main="a random image")
image(run05, axes=FALSE, main="barycenter after 05 iter")
image(run10, axes=FALSE, main="barycenter after 10 iter")
image(run50, axes=FALSE, main="barycenter after 50 iter")
par(opar)

## End(Not run)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>h_cox_regression</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Helper functions for Cox proportional hazards regression</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>
<p>Helper functions used in <code>fit_coxreg_univar()</code> and <code>fit_coxreg_multivar()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">h_coxreg_univar_formulas(variables, interaction = FALSE)

h_coxreg_multivar_formula(variables)

h_coxreg_univar_extract(effect, covar, data, mod, control = control_coxreg())

h_coxreg_multivar_extract(var, data, mod, control = control_coxreg())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>(named <code>list</code> of <code>string</code>)<br> list of additional analysis variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interaction</code></td>
<td>
<p>(<code>flag</code>)<br> if <code>TRUE</code>, the model includes the interaction between the studied
treatment and candidate covariate. Note that for univariate models without treatment arm, and
multivariate models, no interaction can be used so that this needs to be <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effect</code></td>
<td>
<p>(<code>string</code>)<br> the treatment variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covar</code></td>
<td>
<p>(<code>string</code>)<br> the name of the covariate in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>(<code>data.frame</code>)<br> the dataset containing the variables to summarize.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mod</code></td>
<td>
<p>(<code>coxph</code>)<br> Cox regression model fitted by <code>survival::coxph()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>(<code>list</code>)<br> a list of controls as returned by <code>control_coxreg()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>(<code>string</code>)<br> single variable name that is passed by <code>rtables</code> when requested
by a statistics function.</p>
</td>
</tr>
</table>
<h3>Value</h3>


<ul><li> <p><code>h_coxreg_univar_formulas()</code> returns a <code>character</code> vector coercible into formulas (e.g <code>stats::as.formula()</code>).
</p>
</li></ul>
<ul><li> <p><code>h_coxreg_multivar_formula()</code> returns a <code>string</code> coercible into a formula (e.g <code>stats::as.formula()</code>).
</p>
</li></ul>
<ul><li> <p><code>h_coxreg_univar_extract()</code> returns a <code>data.frame</code> with variables <code>effect</code>, <code>term</code>, <code>term_label</code>, <code>level</code>,
<code>n</code>, <code>hr</code>, <code>lcl</code>, <code>ucl</code>, and <code>pval</code>.
</p>
</li></ul>
<ul><li> <p><code>h_coxreg_multivar_extract()</code> returns a <code>data.frame</code> with variables <code>pval</code>, <code>hr</code>, <code>lcl</code>, <code>ucl</code>, <code>level</code>,
<code>n</code>, <code>term</code>, and <code>term_label</code>.
</p>
</li></ul>
<h3>Functions</h3>


<ul>
<li> <p><code>h_coxreg_univar_formulas()</code>: Helper for Cox regression formula. Creates a list of formulas. It is used
internally by <code>fit_coxreg_univar()</code> for the comparison of univariate Cox regression models.
</p>
</li>
<li> <p><code>h_coxreg_multivar_formula()</code>: Helper for multivariate Cox regression formula. Creates a formulas
string. It is used internally by <code>fit_coxreg_multivar()</code> for the comparison of multivariate Cox
regression models. Interactions will not be included in multivariate Cox regression model.
</p>
</li>
<li> <p><code>h_coxreg_univar_extract()</code>: Utility function to help tabulate the result of
a univariate Cox regression model.
</p>
</li>
<li> <p><code>h_coxreg_multivar_extract()</code>: Tabulation of multivariate Cox regressions. Utility function to help
tabulate the result of a multivariate Cox regression model for a treatment/covariate variable.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>cox_regression
</p>


<h3>Examples</h3>

<pre><code class="language-R"># `h_coxreg_univar_formulas`

## Simple formulas.
h_coxreg_univar_formulas(
  variables = list(
    time = "time", event = "status", arm = "armcd", covariates = c("X", "y")
  )
)

## Addition of an optional strata.
h_coxreg_univar_formulas(
  variables = list(
    time = "time", event = "status", arm = "armcd", covariates = c("X", "y"),
    strata = "SITE"
  )
)

## Inclusion of the interaction term.
h_coxreg_univar_formulas(
  variables = list(
    time = "time", event = "status", arm = "armcd", covariates = c("X", "y"),
    strata = "SITE"
  ),
  interaction = TRUE
)

## Only covariates fitted in separate models.
h_coxreg_univar_formulas(
  variables = list(
    time = "time", event = "status", covariates = c("X", "y")
  )
)

# `h_coxreg_multivar_formula`

h_coxreg_multivar_formula(
  variables = list(
    time = "AVAL", event = "event", arm = "ARMCD", covariates = c("RACE", "AGE")
  )
)

# Addition of an optional strata.
h_coxreg_multivar_formula(
  variables = list(
    time = "AVAL", event = "event", arm = "ARMCD", covariates = c("RACE", "AGE"),
    strata = "SITE"
  )
)

# Example without treatment arm.
h_coxreg_multivar_formula(
  variables = list(
    time = "AVAL", event = "event", covariates = c("RACE", "AGE"),
    strata = "SITE"
  )
)

library(survival)

dta_simple &lt;- data.frame(
  time = c(5, 5, 10, 10, 5, 5, 10, 10),
  status = c(0, 0, 1, 0, 0, 1, 1, 1),
  armcd = factor(LETTERS[c(1, 1, 1, 1, 2, 2, 2, 2)], levels = c("A", "B")),
  var1 = c(45, 55, 65, 75, 55, 65, 85, 75),
  var2 = c("F", "M", "F", "M", "F", "M", "F", "U")
)
mod &lt;- coxph(Surv(time, status) ~ armcd + var1, data = dta_simple)
result &lt;- h_coxreg_univar_extract(
  effect = "armcd", covar = "armcd", mod = mod, data = dta_simple
)
result

mod &lt;- coxph(Surv(time, status) ~ armcd + var1, data = dta_simple)
result &lt;- h_coxreg_multivar_extract(
  var = "var1", mod = mod, data = dta_simple
)
result

</code></pre>


</div>
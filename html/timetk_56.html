<div class="container">

<table style="width: 100%;"><tr>
<td>plot_time_series_regression</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Visualize a Time Series Linear Regression Formula</h2>

<h3>Description</h3>

<p>A wrapper for <code>stats::lm()</code> that overlays a
linear regression fitted model over a time series, which can help
show the effect of feature engineering
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_time_series_regression(
  .data,
  .date_var,
  .formula,
  .show_summary = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>A <code>tibble</code> or <code>data.frame</code> with a time-based column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.date_var</code></td>
<td>
<p>A column containing either date or date-time values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.formula</code></td>
<td>
<p>A linear regression formula. The left-hand side of the formula is used
as the y-axis value. The right-hand side of the formula is used to develop the linear regression model.
See <code>stats::lm()</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.show_summary</code></td>
<td>
<p>If <code>TRUE</code>, prints the <code>summary.lm()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>plot_time_series()</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>plot_time_series_regression()</code> is a scalable function that works with both <em>ungrouped</em> and <em>grouped</em>
<code>data.frame</code> objects (and <code>tibbles</code>!).
</p>
<p><strong>Time Series Formula</strong>
</p>
<p>The <code>.formula</code> uses <code>stats::lm()</code> to apply a linear regression, which is used to visualize
the effect of feature engineering on a time series.
</p>

<ul>
<li>
<p> The left-hand side of the formula is used as the y-axis value.
</p>
</li>
<li>
<p> The right-hand side of the formula is used to develop the linear regression model.
</p>
</li>
</ul>
<p><strong>Interactive by Default</strong>
</p>
<p><code>plot_time_series_regression()</code> is built for exploration using:
</p>

<ul>
<li> <p><strong>Interactive Plots:</strong> <code>plotly</code> (default) - Great for exploring!
</p>
</li>
<li> <p><strong>Static Plots:</strong> <code>ggplot2</code> (set <code>.interactive = FALSE</code>) - Great for PDF Reports
</p>
</li>
</ul>
<p>By default, an interactive <code>plotly</code> visualization is returned.
</p>
<p><strong>Scalable with Facets &amp; Dplyr Groups</strong>
</p>
<p><code>plot_time_series_regression()</code> returns multiple time series plots using <code>ggplot2</code> facets:
</p>

<ul>
<li> <p><code>group_by()</code> - If groups are detected, multiple facets are returned
</p>
</li>
<li> <p><code>plot_time_series_regression(.facet_vars)</code> - You can manually supply facets as well.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A static <code>ggplot2</code> plot or an interactive <code>plotly</code> plot
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)
library(lubridate)

# ---- SINGLE SERIES ----
m4_monthly %&gt;%
    filter(id == "M750") %&gt;%
    plot_time_series_regression(
        .date_var     = date,
        .formula      = log(value) ~ as.numeric(date) + month(date, label = TRUE),
        .show_summary = TRUE,
        .facet_ncol   = 2,
        .interactive  = FALSE
    )


# ---- GROUPED SERIES ----
m4_monthly %&gt;%
    group_by(id) %&gt;%
    plot_time_series_regression(
        .date_var    = date,
        .formula     = log(value) ~ as.numeric(date) + month(date, label = TRUE),
        .facet_ncol  = 2,
        .interactive = FALSE
    )


</code></pre>


</div>
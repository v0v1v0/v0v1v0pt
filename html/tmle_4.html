<div class="container">

<table style="width: 100%;"><tr>
<td>estimateG</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate Treatment or Missingness Mechanism</h2>

<h3>Description</h3>

<p>An internal function called by the <code>tmle</code> function to obtain an estimate of conditional treatment assignment probabiliites <code class="reqn">P(A=1|W)</code>, and conditional probabilites for missingness, <code class="reqn">P(Delta=1|A,W)</code>.  The estimate can be  based on user-supplied values, a user-supplied regression formula, or a data-adaptive super learner fit.  If the <code>SuperLearner</code> package is not available, and there are no user-specifications, estimation is carried out using main terms regression with <code>glm</code>.  These main terms-based estimates may yield poor results.
</p>


<h3>Usage</h3>

<pre><code class="language-R">estimateG(d, g1W, gform, SL.library, id, V, verbose, message, 
	outcome="A", newdata=d, discreteSL, obsWeights)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>dataframe with binary dependent variable in the first column, predictors in remaining columns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g1W</code></td>
<td>
<p>vector of values for <code class="reqn">P(A=1|W)</code>, <code class="reqn">P(Z=1|A,W)</code>, or <code class="reqn">P(Delta=1|Z,A,W)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gform</code></td>
<td>
<p>regression formula of the form <code>A~W1</code>, (dependent variable is one of <code class="reqn">A,Z,D</code>) if specified this overrides the call to <code>SuperLearner</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SL.library</code></td>
<td>
<p>vector of prediction algorithms used by <code>SuperLearner</code>, default value is (‘SL.glm’, ‘tmle.SL.dbarts.k.5’, ‘SL.gam’)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>subject identifier</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>V</code></td>
<td>
<p>Number of cross validation folds for Super Learning</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>status messages printed if set to TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>message</code></td>
<td>
<p>text specifies whether treatment or missingness mechanism is being estimated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p><code>A, D, Z</code> to indicate which quantity is being estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>optional dataset to be used for prediction after fitting on <code>d</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>discreteSL</code></td>
<td>
<p>If true, returns discrete SL estimates, otherwise ensemble estimates. Ignored when SL is not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obsWeights</code></td>
<td>
<p>sampling weights</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>g1W</code></td>
<td>
<p>a vector containing values for <code class="reqn">P(A=1|W)</code>, matrix for <code class="reqn">P(Z=1|A,W)</code>, evaluated at A=0, A=1, or matrix <code class="reqn">P(Delta=1|Z,A,W))</code> evaluated at (0,0), (0,1), (1,0), (1,1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coef</code></td>
<td>
<p>coefficients for each term in the working model used for estimation if <code>glm</code> was used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>estimation procedure</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Susan Gruber</p>


<h3>See Also</h3>

<p><code>tmle</code>,
<code>estimateQ</code>,
<code>calcParameters</code>,
<code>tmleMSM</code>,
<code>calcSigma</code>
</p>


</div>
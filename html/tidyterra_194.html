<div class="container">

<table style="width: 100%;"><tr>
<td>scale_coltab</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Discrete scales based in the color table of a <code>SpatRaster</code>
</h2>

<h3>Description</h3>

<p>Some categorical <code>SpatRaster</code> objects may have an associated color table.
This function extract those values. These functions generates scales and
vector of colors based on the color table <code>terra::coltab()</code> associated to a
<code>SpatRaster</code>.
</p>
<p>You can also get a vector of colors named with the corresponding
factor with <code>get_coltab_pal()</code>.
</p>
<p>Additional parameters <code>...</code> would be passed on to
<code>ggplot2::discrete_scale()</code>.
</p>
<p><strong>Note that</strong> <a href="https://CRAN.R-project.org/package=tidyterra"><span class="pkg">tidyterra</span></a> just documents a selection of these
additional parameters, check <code>ggplot2::discrete_scale()</code> to see the full
range of parameters accepted.
</p>


<h3>Usage</h3>

<pre><code class="language-R">scale_fill_coltab(
  data,
  ...,
  alpha = 1,
  na.translate = FALSE,
  na.value = "transparent",
  drop = TRUE
)

scale_colour_coltab(
  data,
  ...,
  alpha = 1,
  na.translate = FALSE,
  na.value = "transparent",
  drop = TRUE
)

get_coltab_pal(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data, x</code></td>
<td>
<p>A <code>SpatRaster</code> with one or several color tables.
See <code>terra::has.colors()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Arguments passed on to <code>ggplot2::discrete_scale</code>
</p>

<dl>
<dt><code>breaks</code></dt>
<dd>
<p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no breaks
</p>
</li>
<li> <p><code>waiver()</code> for the default breaks (the scale limits)
</p>
</li>
<li>
<p> A character vector of breaks
</p>
</li>
<li>
<p> A function that takes the limits as input and returns breaks
as output. Also accepts rlang lambda function
notation.
</p>
</li>
</ul>
</dd>
<dt><code>labels</code></dt>
<dd>
<p>One of:
</p>

<ul>
<li> <p><code>NULL</code> for no labels
</p>
</li>
<li> <p><code>waiver()</code> for the default labels computed by the
transformation object
</p>
</li>
<li>
<p> A character vector giving labels (must be same length as <code>breaks</code>)
</p>
</li>
<li>
<p> An expression vector (must be the same length as breaks). See ?plotmath for details.
</p>
</li>
<li>
<p> A function that takes the breaks as input and returns labels
as output. Also accepts rlang lambda function
notation.
</p>
</li>
</ul>
</dd>
<dt><code>limits</code></dt>
<dd>
<p>One of:
</p>

<ul>
<li> <p><code>NULL</code> to use the default scale values
</p>
</li>
<li>
<p> A character vector that defines possible values of the scale and their
order
</p>
</li>
<li>
<p> A function that accepts the existing (automatic) values and returns
new ones. Also accepts rlang lambda function
notation.
</p>
</li>
</ul>
</dd>
<dt><code>expand</code></dt>
<dd>
<p>For position scales, a vector of range expansion constants used to add some
padding around the data to ensure that they are placed some distance
away from the axes. Use the convenience function <code>expansion()</code>
to generate the values for the <code>expand</code> argument. The defaults are to
expand the scale by 5% on each side for continuous variables, and by
0.6 units on each side for discrete variables.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The alpha transparency, a number in [0,1], see argument alpha in
<code>hsv</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.translate</code></td>
<td>
<p>Should <code>NA</code> values be removed from the legend? Default
is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.value</code></td>
<td>
<p>Missing values will be replaced with this value. By default,
<a href="https://CRAN.R-project.org/package=tidyterra"><span class="pkg">tidyterra</span></a> uses <code>na.value = "transparent"</code> so cells with <code>NA</code> are
not filled. See also
<a href="https://github.com/dieghernan/tidyterra/issues/120">#120</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>Should unused factor levels be omitted from the scale? The
default (<code>TRUE</code>) removes unused factors.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The corresponding <a href="https://CRAN.R-project.org/package=ggplot2"><span class="pkg">ggplot2</span></a> layer with the values applied to the
<code>fill/colour</code> aesthetics.
</p>


<h3>See Also</h3>

<p><code>terra::coltab()</code>, <code>ggplot2::discrete_scale()</code>,
<code>ggplot2::scale_fill_manual()</code>,
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(terra)
# Geological Eras
# Spanish Geological Survey (IGME)

r &lt;- rast(system.file("extdata/cyl_era.tif", package = "tidyterra"))

plot(r)

# Get coltab
coltab_pal &lt;- get_coltab_pal(r)

coltab_pal


# With ggplot2 + tidyterra
library(ggplot2)

gg &lt;- ggplot() +
  geom_spatraster(data = r)


# Default plot
gg

# With coltabs
gg +
  scale_fill_coltab(data = r)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>join_keys</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Manage relationships between datasets using <code>join_keys</code>
</h2>

<h3>Description</h3>

<p>Facilitates the creation and retrieval of relationships between datasets.
<code>join_keys</code> class extends <code>list</code> and contains keys connecting pairs of datasets.
Each element of the list contains keys for specific dataset.
Each dataset can have a relationship with itself (primary key) and with other datasets.
</p>
<p>Note that <code>join_keys</code> list is symmetrical and assumes a default direction, that is:
when keys are set between <code>ds1</code> and <code>ds2</code>, it defines <code>ds1</code> as the parent
in a parent-child relationship and the mapping is automatically mirrored between
<code>ds2</code> and <code>ds1</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## Constructor, getter and setter
join_keys(...)

## Default S3 method:
join_keys(...)

## S3 method for class 'join_keys'
join_keys(...)

## S3 method for class 'teal_data'
join_keys(...)

## S3 method for class 'join_keys'
x[i, j]

## S3 replacement method for class 'join_keys'
x[i, j, directed = TRUE] &lt;- value

## S3 method for class 'join_keys'
c(...)

## S3 method for class 'join_key_set'
c(...)

join_keys(x) &lt;- value

## S3 replacement method for class 'join_keys'
join_keys(x) &lt;- value

## S3 replacement method for class 'teal_data'
join_keys(x) &lt;- value

## S3 method for class 'join_keys'
format(x, ...)

## S3 method for class 'join_keys'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>optional,
</p>

<ul>
<li>
<p> either <code>teal_data</code> or <code>join_keys</code> object to extract <code>join_keys</code>
</p>
</li>
<li>
<p> or any number of <code>join_key_set</code> objects to create <code>join_keys</code>
</p>
</li>
<li>
<p> or nothing to create an empty <code>join_keys</code>
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>(<code>join_keys</code>) empty object to set the new relationship pairs.
<code>x</code> is typically an object of <code>join_keys</code> class. When called with the <code>join_keys(x)</code>
or <code>join_keys(x) &lt;- value</code> then it can also take a supported class (<code>teal_data</code>, <code>join_keys</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i, j</code></td>
<td>
<p>indices specifying elements to extract or replace. Index should be a
a character vector, but it can also take numeric, logical, <code>NULL</code> or missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>directed</code></td>
<td>
<p>(<code>logical(1)</code>) Flag that indicates whether it should create
a parent-child relationship between the datasets.
</p>

<ul>
<li> <p><code>TRUE</code> (default) <code>dataset_1</code> is the parent of <code>dataset_2</code>;
</p>
</li>
<li> <p><code>FALSE</code> when the relationship is undirected.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>For <code style="white-space: pre;">⁠x[i, j, directed = TRUE)] &lt;- value⁠</code> (named/unnamed <code>character</code>)
Column mapping between datasets.
</p>
<p>For <code>join_keys(x) &lt;- value</code>: (<code>join_key_set</code> or list of <code>join_key_set</code>) relationship
pairs to add to <code>join_keys</code> list.
</p>
<p>[i, j, directed = TRUE)]: R:i,%20j,%20directed%20=%20TRUE)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>join_keys</code> object.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>join_keys()</code>: Returns an empty <code>join_keys</code> object when called without arguments.
</p>
</li>
<li> <p><code>join_keys(join_keys)</code>: Returns itself.
</p>
</li>
<li> <p><code>join_keys(teal_data)</code>: Returns the <code>join_keys</code> object contained in <code>teal_data</code> object.
</p>
</li>
<li> <p><code>join_keys(...)</code>: Creates a new object with one or more <code>join_key_set</code> parameters.
</p>
</li>
</ul>
<h3>Functions</h3>


<ul>
<li> <p><code>x[datanames]</code>: Returns a subset of the <code>join_keys</code> object for
given <code>datanames</code>, including parent <code>datanames</code> and symmetric mirror keys between
<code>datanames</code> in the result.
</p>
</li>
<li> <p><code>x[i, j]</code>: Returns join keys between datasets <code>i</code> and <code>j</code>,
including implicit keys inferred from their relationship with a parent.
</p>
</li>
</ul>
<ul>
<li> <p><code>x[i, j] &lt;- value</code>: Assignment of a key to pair <code style="white-space: pre;">⁠(i, j)⁠</code>.
</p>
</li>
<li> <p><code>x[i] &lt;- value</code>: This (without <code>j</code> parameter) <strong>is not</strong> a supported
operation for <code>join_keys</code>.
</p>
</li>
<li> <p><code>join_keys(x)[i, j] &lt;- value</code>: Assignment to <code>join_keys</code> object stored in <code>x</code>,
such as a <code>teal_data</code> object or <code>join_keys</code> object itself.
</p>
</li>
</ul>
<ul><li> <p><code>join_keys(x) &lt;- value</code>: Assignment of the <code>join_keys</code> in object with <code>value</code>.
<code>value</code> needs to be an object of class <code>join_keys</code> or <code>join_key_set</code>.
</p>
</li></ul>
<h3>See Also</h3>

<p><code>join_key()</code> for creating <code>join_keys_set</code>,
<code>parents()</code> for parent operations,
<code>teal_data()</code> for <code>teal_data</code> constructor <em>and</em>
default_cdisc_join_keys for default CDISC keys.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Creating a new join keys ----

jk &lt;- join_keys(
  join_key("ds1", "ds1", "pk1"),
  join_key("ds2", "ds2", "pk2"),
  join_key("ds3", "ds3", "pk3"),
  join_key("ds1", "ds2", c(pk1 = "pk2")),
  join_key("ds1", "ds3", c(pk1 = "pk3"))
)

jk

# Getter for join_keys ---

jk["ds1", "ds2"]

# Subsetting join_keys ----

jk["ds1"]
jk[1:2]
jk[c("ds1", "ds2")]

# Setting a new primary key ---

jk["ds4", "ds4"] &lt;- "pk4"
jk["ds5", "ds5"] &lt;- "pk5"

# Setting a single relationship pair ---

jk["ds1", "ds4"] &lt;- c("pk1" = "pk4")

# Removing a key ---

jk["ds5", "ds5"] &lt;- NULL
# Merging multiple `join_keys` objects ---

jk_merged &lt;- c(
  jk,
  join_keys(
    join_key("ds4", keys = c("pk4", "pk4_2")),
    join_key("ds3", "ds4", c(pk3 = "pk4_2"))
  )
)
# note: merge can be performed with both join_keys and join_key_set

jk_merged &lt;- c(
  jk_merged,
  join_key("ds5", keys = "pk5"),
  join_key("ds1", "ds5", c(pk1 = "pk5"))
)
# Assigning keys via join_keys(x)[i, j] &lt;- value ----

obj &lt;- join_keys()
# or
obj &lt;- teal_data()

join_keys(obj)["ds1", "ds1"] &lt;- "pk1"
join_keys(obj)["ds2", "ds2"] &lt;- "pk2"
join_keys(obj)["ds3", "ds3"] &lt;- "pk3"
join_keys(obj)["ds1", "ds2"] &lt;- c(pk1 = "pk2")
join_keys(obj)["ds1", "ds3"] &lt;- c(pk1 = "pk3")

identical(jk, join_keys(obj))
# Setter for join_keys within teal_data ----

td &lt;- teal_data()
join_keys(td) &lt;- jk

join_keys(td)["ds1", "ds2"] &lt;- "new_key"
join_keys(td) &lt;- c(join_keys(td), join_keys(join_key("ds3", "ds2", "key3")))
join_keys(td)
</code></pre>


</div>
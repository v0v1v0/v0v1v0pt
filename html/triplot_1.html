<div class="container">

<table style="width: 100%;"><tr>
<td>aspect_importance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates importance of variable groups (called aspects) for a selected
observation</h2>

<h3>Description</h3>

<p>Predict aspects function takes a sample from a given dataset and modifies
it. Modification is made by replacing part of its aspects by values from the
observation. Then function is calculating the difference between the
prediction made on modified sample and the original sample. Finally, it
measures the impact of aspects on the change of prediction by using the
linear model or lasso.
</p>


<h3>Usage</h3>

<pre><code class="language-R">aspect_importance(x, ...)

## S3 method for class 'explainer'
aspect_importance(
  x,
  new_observation,
  variable_groups,
  N = 1000,
  n_var = 0,
  sample_method = "default",
  f = 2,
  ...
)

## Default S3 method:
aspect_importance(
  x,
  data,
  predict_function = predict,
  label = class(x)[1],
  new_observation,
  variable_groups,
  N = 100,
  n_var = 0,
  sample_method = "default",
  f = 2,
  ...
)

lime(x, ...)

predict_aspects(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an explainer created with the <code>DALEX::explain()</code> function
or a model to be explained.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_observation</code></td>
<td>
<p>selected observation with columns that corresponds to
variables used in the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable_groups</code></td>
<td>
<p>list containing grouping of features into aspects</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>number of observations to be sampled (with replacement) from data
NOTE: Small <code>N</code> may cause unstable results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_var</code></td>
<td>
<p>maximum number of non-zero coefficients after lasso fitting,
if zero than linear regression is used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_method</code></td>
<td>
<p>sampling method in <code>get_sample</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>frequency in <code>get_sample</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>dataset, it will be extracted from <code>x</code> if it's an explainer
NOTE: It is best when target variable is not present in the <code>data</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predict_function</code></td>
<td>
<p>predict function, it will be extracted from <code>x</code>
if it's an explainer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>name of the model. By default it's extracted from the 'class'
attribute of the model.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of the class <code>aspect_importance</code>. Contains data frame
that describes aspects' importance.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("DALEX")

model_titanic_glm &lt;- glm(survived == 1 ~
                         class+gender+age+sibsp+parch+fare+embarked,
                         data = titanic_imputed,
                         family = "binomial")

explain_titanic_glm &lt;- explain(model_titanic_glm,
                               data = titanic_imputed[,-8],
                               y = titanic_imputed$survived == 1,
                               verbose = FALSE)

aspects &lt;- list(wealth = c("class", "fare"),
                family = c("sibsp", "parch"),
                personal = c("gender", "age"),
                embarked = "embarked")

predict_aspects(explain_titanic_glm,
                  new_observation = titanic_imputed[1,],
                  variable_groups = aspects)


library("randomForest")
library("DALEX")
model_titanic_rf &lt;-
 randomForest(factor(survived) ~ class + gender + age + sibsp +
                parch + fare + embarked,
              data = titanic_imputed)

explain_titanic_rf &lt;- explain(model_titanic_rf,
                              data = titanic_imputed[,-8],
                              y = titanic_imputed$survived == 1,
                              verbose = FALSE)

predict_aspects(explain_titanic_rf,
                  new_observation = titanic_imputed[1,],
                  variable_groups = aspects)



</code></pre>


</div>
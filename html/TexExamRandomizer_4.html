<div class="container">

<table style="width: 100%;"><tr>
<td>CompileDocument</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compile Document</h2>

<h3>Description</h3>

<p>Function that takes a set of lines, <code>x</code>, that represent a file or a document. And divides it in subsequent layers, structures as a list, as described on the detail section.
</p>
<p>It assumes <code>x</code> is representing a 'LaTeX' file that can be compiled as it is before we make any modifications.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CompileDocument(x, layersNames, layersCmd)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A character vector, each element represents one line of the latex document</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layersNames</code></td>
<td>
<p>A character vector, with each element representating the environment name to be searched as <code>cmdName</code> as describe in <code>FindBegin</code> and <code>FindEnd</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layersCmd</code></td>
<td>
<p>A character vector, with the same length as <code>layersNames</code>. with each element representing the environment command to be serached as <code>cmdName</code> as described in <code>FindCommand</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Both <code>layersNames</code> and <code>layersCmd</code> must have the same length, since for each index, <code>i</code>, <code>layersNames[i]</code> and <code>layersCmd[i]</code> refer to one layer of the tree structure of the document. Consequent layers must be found inside previous layers.
</p>
<p>If it finds the structure of the document to not be completed, it will throw an error.
</p>


<h3>Value</h3>

<p>It returns a list, with each element having a name. Recreating the tree structure identified by  <code>layersNames</code> and <code>layersCmd</code> in the text file <code>x</code>.
</p>
<p>It first divides the document into two lists:
</p>

<dl>
<dt>preamble</dt>
<dd>
<p>Contains a character vector identifying everything before the \begin{document}</p>
</dd>
<dt>document</dt>
<dd>
<p>Contains the tree structure identifying the document</p>
</dd>
</dl>
<p>Now, the naming convention for each layer of the document is as follows. We will use the convention <code>&lt;layerName&gt;</code>,  <code>&lt;layerCmd&gt;</code>.
</p>
<p>Note the convention first, everything that it finds prior to the first environment, it throws it into a character vector that it calls <code>prior_to_&lt;layesName&gt;</code>.
After the first environment <code>&lt;layerName&gt;</code> ends, it assumes that everything from that <code>\end{&lt;layerName&gt;}</code> onwards corresponding to the next environment, and it will throw it to the prior part of that one.
<code>post_to_&lt;layerName&gt;</code>
</p>

<dl>
<dt><code>prior_to_layersName</code></dt>
<dd>
<p>Includes everything up to the first <code>\begin{&lt;layerName&gt;</code> without including that line</p>
</dd>
<dt><code>1_&lt;layerName&gt;_begin_&lt;layerName&gt;</code></dt>
<dd>
<p>Includes the <code>\begin{layerName}</code> for the 1st section, and everything until it finds the first <code>\&lt;layerCmd&gt;</code></p>
</dd>
<dt><code>1_&lt;layerName&gt;_1_&lt;layerCmd&gt;</code></dt>
<dd>
<p>Includes everything from the 1<code class="reqn">^{st}</code> <code>\&lt;layerCmd&gt;</code> until the second <code>\&lt;layerCmd&gt;</code>, without including the line in which the second command is found
</p>
</dd>
<dt><code>1_&lt;layerName&gt;_2_&lt;layerCmd&gt;</code></dt>
<dd>
<p>Same thing... and it keeps going until the last  <code>\&lt;layerCmd&gt;</code> is found
</p>
</dd>
<dt><code>1_&lt;layerName&gt;_end_&lt;layerName&gt;</code></dt>
<dd>
<p>It includes the <code>\end{&lt;layerName&gt;}</code> for the 1st section.
</p>
</dd>
<dt>...</dt>
<dd>
<p>It then repeats the same structure for the next environment, changing the naming convention to start with 2_&lt;...&gt; and so on until it does the last environemt</p>
</dd>
<dt><code>post_to_&lt;layerName&gt;</code></dt>
<dd>
<p>After the last layer ends with <code>\end{layerName}</code>, it throws the rest of the lines into this last character vector</p>
</dd>
</dl>
<p>This structure is applied recursively to each <code>i_&lt;layerName&gt;_j_&lt;layerCmd&gt;</code> of the previous layer to find the structure for the next layer.
The result is a tree of lists, with names that identify the whole structure, and the ending node of each branch is always a character vector
</p>
<p><strong>IMPORTANT NOTE:</strong> Note that this function only rearranges the lines of the document, it can't split a document between a line. So if you want to make sure something always stays together, put them both in the same line. This is intentional, to force a more clear structure on the document that will be parsed
</p>
<p>In Summary, the sketch of the tree structure would be:
</p>

<ul>
<li>
<p> preamble
</p>
</li>
<li>
<p> Document
</p>

<ul>
<li>
<p> prior_to_LayerName[1]
</p>
</li>
<li>
<p> 1_layerName[1]_begin_layerName[1]
</p>
</li>
<li>
<p> 1_layerName[1]_1_layerCmd[1]
</p>

<ul>
<li>
<p> prior_to_LayerName[2]
</p>
</li>
<li>
<p> 1_layerName[2]_begin_layerName[2]
</p>
</li>
<li>
<p> 1_layerName[2]_1_layerCmd[2]
</p>

<ul><li>
<p> Continues...
</p>
</li></ul>
</li>
<li>
<p> 1_layerName[2]_2_layerCmd[2]
</p>

<ul><li>
<p> Continues...
</p>
</li></ul>
</li>
<li>
<p> ...
</p>
</li>
<li>
<p>  post_to_layerName[2]
</p>
</li>
</ul>
</li>
<li>
<p> 2_layerName[1]_begin_layerName[1]
</p>
</li>
<li>
<p> 2_layerName[1]_1_layerCmd[1]
</p>

<ul><li>
<p> ...
</p>
</li></ul>
</li>
<li>
<p> ...
</p>
</li>
<li>
<p> n_layerName[1]_end_layerName[1]
</p>
</li>
<li>
<p>  post_to_layerName[1]
</p>
</li>
</ul>
</li>
</ul>
<p>If a  <code>\&lt;layerCmd&gt;</code> is not found inside an environment, everything inside that environment is thrown into the begin_layerName part and instead of the numbered environments, an empty character list is added in the middle, with name <code>empty_&lt;layerCmd&gt;</code> section.
</p>


<h3>See Also</h3>

<p>FindStructure for more information on the details of how the layers are found.
</p>
<p>Other Structuring Document: 
<code>DivideFile()</code>,
<code>FindStructure</code>,
<code>IsWellSectioned()</code>,
<code>StructureDocument()</code>
</p>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>CatalogNode</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A class for Catalogs (which may contain catalogs references or datasets)</h2>

<h3>Description</h3>

<p>A catalog representation that sublcasses from ThreddsNode
</p>


<h3>Super class</h3>

<p><code>thredds::ThreddsNode</code> -&gt; <code>CatalogNode</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-CatalogNode-list_services"><code>CatalogNode$list_services()</code></a>
</p>
</li>
<li> <p><a href="#method-CatalogNode-list_catalogs"><code>CatalogNode$list_catalogs()</code></a>
</p>
</li>
<li> <p><a href="#method-CatalogNode-list_datasets"><code>CatalogNode$list_datasets()</code></a>
</p>
</li>
<li> <p><a href="#method-CatalogNode-get_catalogs"><code>CatalogNode$get_catalogs()</code></a>
</p>
</li>
<li> <p><a href="#method-CatalogNode-get_datasets"><code>CatalogNode$get_datasets()</code></a>
</p>
</li>
<li> <p><a href="#method-CatalogNode-get_dataset_names"><code>CatalogNode$get_dataset_names()</code></a>
</p>
</li>
<li> <p><a href="#method-CatalogNode-get_catalog_names"><code>CatalogNode$get_catalog_names()</code></a>
</p>
</li>
<li> <p><a href="#method-CatalogNode-parse_catalog_node"><code>CatalogNode$parse_catalog_node()</code></a>
</p>
</li>
<li> <p><a href="#method-CatalogNode-parse_dataset_node"><code>CatalogNode$parse_dataset_node()</code></a>
</p>
</li>
<li> <p><a href="#method-CatalogNode-print"><code>CatalogNode$print()</code></a>
</p>
</li>
<li> <p><a href="#method-CatalogNode-clone"><code>CatalogNode$clone()</code></a>
</p>
</li>
</ul>
<details open><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="thredds" data-topic="ThreddsNode" data-id="GET"><a href="../../thredds/html/ThreddsNode.html#method-ThreddsNode-GET"><code>thredds::ThreddsNode$GET()</code></a></span></li>
<li><span class="pkg-link" data-pkg="thredds" data-topic="ThreddsNode" data-id="browse"><a href="../../thredds/html/ThreddsNode.html#method-ThreddsNode-browse"><code>thredds::ThreddsNode$browse()</code></a></span></li>
<li><span class="pkg-link" data-pkg="thredds" data-topic="ThreddsNode" data-id="children_names"><a href="../../thredds/html/ThreddsNode.html#method-ThreddsNode-children_names"><code>thredds::ThreddsNode$children_names()</code></a></span></li>
<li><span class="pkg-link" data-pkg="thredds" data-topic="ThreddsNode" data-id="initialize"><a href="../../thredds/html/ThreddsNode.html#method-ThreddsNode-initialize"><code>thredds::ThreddsNode$initialize()</code></a></span></li>
</ul></details><hr>
<a id="method-CatalogNode-list_services"></a>



<h4>Method <code>list_services()</code>
</h4>

<p>list available services
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$list_services(
  xpath = build_xpath("service", prefix = self$prefix),
  form = "list"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>xpath</code></dt>
<dd>
<p>character, the xpath specifications</p>
</dd>
<dt><code>form</code></dt>
<dd>
<p>character, either "list" or "table"</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>list of zero or more character vectors
</p>


<hr>
<a id="method-CatalogNode-list_catalogs"></a>



<h4>Method <code>list_catalogs()</code>
</h4>

<p>list available catalogRefs
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$list_catalogs(
  xpath = build_xpath(c("dataset", "catalogRef"), prefix = self$prefix),
  form = "list"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>xpath</code></dt>
<dd>
<p>character, the xpath descriptor</p>
</dd>
<dt><code>form</code></dt>
<dd>
<p>character, either "list" or "table"</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>a list with zero or more character vectors
</p>


<hr>
<a id="method-CatalogNode-list_datasets"></a>



<h4>Method <code>list_datasets()</code>
</h4>

<p>list available datasets
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$list_datasets(
  xpath = build_xpath(c("dataset", "dataset"), prefix = self$prefix),
  form = "list"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>xpath</code></dt>
<dd>
<p>character, the xpath descriptor</p>
</dd>
<dt><code>form</code></dt>
<dd>
<p>character, either "list" or "table"</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>a list with zero or more character vectors
</p>


<hr>
<a id="method-CatalogNode-get_catalogs"></a>



<h4>Method <code>get_catalogs()</code>
</h4>

<p>Retrieve a list one or more of child catalogs
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$get_catalogs(
  index,
  xpath = build_xpath(c("dataset", "catalogRef"), prefix = self$prefix)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>index</code></dt>
<dd>
<p>integer index (1,...,nChild), indices or name(s)</p>
</dd>
<dt><code>xpath</code></dt>
<dd>
<p>character xpath representation</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>a list of Catalog class objects, possibly NULL
</p>


<hr>
<a id="method-CatalogNode-get_datasets"></a>



<h4>Method <code>get_datasets()</code>
</h4>

<p>Retrieve list one or more dataset children
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$get_datasets(
  index,
  xpath = build_xpath(c("dataset", "dataset"), prefix = self$prefix)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>index</code></dt>
<dd>
<p>the integer index (1,...,nChild), indices or name(s)</p>
</dd>
<dt><code>xpath</code></dt>
<dd>
<p>character xpath representation</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>a list of Dataset objects or NULL
</p>


<hr>
<a id="method-CatalogNode-get_dataset_names"></a>



<h4>Method <code>get_dataset_names()</code>
</h4>

<p>Retrieve list zero or more dataset child names.  If unnnamed, then
we substitute "title", "ID", "urlPath", or "href" in that order of availability.
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$get_dataset_names(
  xpath = build_xpath(c("dataset", "dataset"), prefix = self$prefix)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>xpath</code></dt>
<dd>
<p>character xpath representation</p>
</dd>
<dt><code>index</code></dt>
<dd>
<p>the integer index (1,...,nChild), indices or name(s)</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>character vector of zero or more names
</p>


<hr>
<a id="method-CatalogNode-get_catalog_names"></a>



<h4>Method <code>get_catalog_names()</code>
</h4>

<p>Retrieve list zero or more catalog child names.  If unnnamed, then
we substitute "title", "ID", "urlPath" or href" in that order of availability.
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$get_catalog_names(
  xpath = build_xpath(c("dataset", "catalogRef"), prefix = self$prefix)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>xpath</code></dt>
<dd>
<p>character xpath representation</p>
</dd>
<dt><code>index</code></dt>
<dd>
<p>the integer index (1,...,nChild), indices or name(s)</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>character vector of zero or more names
</p>


<hr>
<a id="method-CatalogNode-parse_catalog_node"></a>



<h4>Method <code>parse_catalog_node()</code>
</h4>

<p>Parse a catalog node
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$parse_catalog_node(x)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt>
<dd>
<p>xml_node</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Catalog class object
</p>


<hr>
<a id="method-CatalogNode-parse_dataset_node"></a>



<h4>Method <code>parse_dataset_node()</code>
</h4>

<p>Parse a dataset node
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$parse_dataset_node(x)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt>
<dd>
<p>xml_node</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Dataset class object
</p>


<hr>
<a id="method-CatalogNode-print"></a>



<h4>Method <code>print()</code>
</h4>

<p>print method
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$print(prefix = "")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>prefix</code></dt>
<dd>
<p>character, to be printed before each line of output (like spaces)</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>other arguments for superclass</p>
</dd>
</dl>
</div>


<hr>
<a id="method-CatalogNode-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>CatalogNode$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R"> 
  library(thredds)
  top_uri &lt;- 'https://oceandata.sci.gsfc.nasa.gov/opendap/catalog.xml'
  Top &lt;- thredds::CatalogNode$new(top_uri)
  
  #to browse catalogue
  #Top$browse()
  
  #go down in 'MODISA' catalog
  L3 &lt;- Top$get_catalogs("MODISA")[["MODISA"]]$get_catalogs()[[1]]
  
  #see what's available for 2009
  catalog2009 &lt;- L3$get_catalogs("2009")[[1]]
  
  #get catalog for 2009-01-20 
  doy &lt;- format(as.Date("2009-01-20"), "%m%d")
  catalog20 &lt;- catalog2009$get_catalogs(doy)[[doy]]
  
  #get dataset node
  chl &lt;- catalog20$get_datasets("AQUA_MODIS.20090120.L3m.DAY.CHL.chlor_a.4km.nc")[[1]]
  
  #retrieve the relative URL, and add it to the base URL for the service.
  #Somewhat awkwardly, the relative URL comes prepended with a path separator, so we 
  #use straight up `paste0` to append to the base_uri.
  #if(require("ncdf4")){
  #  base_uri &lt;- "https://oceandata.sci.gsfc.nasa.gov:443/opendap"
  #  uri &lt;- paste0(base_uri, chl[["AQUA_MODIS.20090120.L3m.DAY.CHL.chlor_a.4km.nc"]]$url)
  #  NC &lt;- ncdf4::nc_open(uri)
  #}
 

</code></pre>


</div>
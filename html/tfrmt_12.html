<div class="container">

<table style="width: 100%;"><tr>
<td>col_plan</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Define the Column Plan &amp; Span Structures</h2>

<h3>Description</h3>

<p>Using &lt;<code>tidy-select</code>&gt; expressions and a series
span_structures, define the order of the columns. The selection follows "last
selected" principals, meaning columns are moved to the <em>last</em> selection as
opposed to preserving the first location.
</p>


<h3>Usage</h3>

<pre><code class="language-R">col_plan(..., .drop = FALSE)

span_structure(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>For a col_plan and span_structure,
&lt;<code>tidy-select</code>&gt; arguments, unquoted expressions
separated by commas, and span_structures. span_structures must have the
arguments named to match the name the column in the input data has to identify the correct columns. See the examples</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.drop</code></td>
<td>
<p>Boolean. Should un-listed columns be dropped from the data.
Defaults to FALSE.</p>
</td>
</tr>
</table>
<h3>Details</h3>



<h4>Column Selection</h4>

<p>When col_plan gets applied and is used to create the output table, the
underlying logic sorts out which column specifically is being selected. If a column
is selected twice, the <em>last</em> instance in which the column is selected will be
the location it gets rendered.
</p>
<p>Avoid beginning the <code>col_plan()</code> column selection with a deselection (i.e.
<code>col_plan(-col1)</code>, <code>col_plan(-starts_with("value")))</code>. This will
result in the table preserving all columns not "de-selected" in the
statement, and the order of the columns not changed. It is preferred when
creating the <code>col_plan()</code> to identify all the columns planned on
preserving in the order they are wished to appear, or if
&lt;<code>tidy-select</code>&gt; arguments - such as
<code>everything</code>- are used, identify the de-selection after
the positive-selection.
</p>
<p>Alternatively, once the gt table is produced, use the
<code>cols_hide</code> function to remove un-wanted columns.
</p>



<h3>Value</h3>

<p>col_plan object
</p>
<p>span_structure object
</p>


<h3>Images</h3>

<p>Here are some example outputs:
</p>

<img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/main/images/tfrmt-span_structure-cropped.jpg" alt="Example of a dataset being turned into a table with spanning columns" style="width:100%;"><h3>See Also</h3>

<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/col_plan.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(dplyr)

## select col_1 as the first column, remove col_last, then create spanning
## structures that have multiple levels
##
## examples also assume the tfrmt has the column argument set to c(c1, c2, c3)
##
spanning_col_plan_ex &lt;- col_plan(
 col_1,
 -col_last,
 span_structure(
   c1 = "Top Label Level 1",
   c2 = "Second Label Level 1.1",
   c3 = c(col_3, col_4)
 ),
 span_structure(
   c1 = "Top Label Level 1",
   c2 = "Second Label Level 1.2",
   c3 = starts_with("B")
   ),
 span_structure(
   c1 = "Top Label Level 1",
   c3 = col_5
 ),
 span_structure(
   c2 = "Top Label Level 2",
   c3 = c(col_6, col_7)
 )
)

## select my_col_1 as the first column, then
## rename col_2 to new_col_1 and put as the
## second column, then select the rest of the columns
renaming_col_plan_ex &lt;- col_plan(
   my_col_1,
   new_col_1 = col_2,
   everything()
 )

renaming_col_plan_ex2 &lt;- col_plan(
   my_col_1,
   new_col_1 = col_2,
   span_structure(
    c1 = c(`My Favorite span name` = "Top Label Level 1"),
    c3 = c(`the results column` = col_5)
   )
 )

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>identifyImageFileNames</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Working with MRI images stored in various formats</h2>

<h3>Description</h3>

<p>Functions for reading, writing, locating, copying and removing MRI images
stored in NIfTI, Analyze, MGH and MRtrix formats.
</p>


<h3>Usage</h3>

<pre><code class="language-R">identifyImageFileNames(fileName, fileType = NULL, errorIfMissing = TRUE,
  auxiliaries = c("dirs", "lut", "tags"), ...)

imageFileExists(fileName, fileType = NULL)

removeImageFiles(fileName, ...)

symlinkImageFiles(from, to, overwrite = FALSE, relative = TRUE, ...)

copyImageFiles(from, to, overwrite = FALSE, deleteOriginals = FALSE, ...)

readImageFile(fileName, fileType = NULL, metadataOnly = FALSE,
  volumes = NULL, sparse = FALSE, mask = NULL, reorder = TRUE, ...)

writeImageFile(image, fileName = NULL, fileType = NA, overwrite = TRUE,
  datatype = "fit", writeTags = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fileName, from, to</code></td>
<td>
<p>File names, with or without appropriate extension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fileType</code></td>
<td>
<p>A character vector of length one, giving the file type
required or expected. If this option is missing, the file type used for
writing images will be taken from the <code>tractorFileType</code> option. See
Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>errorIfMissing</code></td>
<td>
<p>Logical value: raise an error if no suitable files
were found?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auxiliaries</code></td>
<td>
<p>A character vector of auxiliary file suffixes to search
for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>For <code>identifyImageFileNames</code>, additional arguments to
<code>resolvePath</code>. Elsewhere, additional arguments to
<code>identifyImageFileNames</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>Logical value: overwrite an existing image file? For
<code>writeImageFile</code>, an error will be raised if there is an existing
file and this is set to FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>relative</code></td>
<td>
<p>Logical value: if <code>TRUE</code>, the path stored in the
symlink will be relative (e.g. <code>"../some_dir/some_image.nii"</code>) rather
than absolute (e.g. <code>"/path/to/some_dir/some_image.nii"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deleteOriginals</code></td>
<td>
<p>Logical value: if <code>TRUE</code>, <code>copyImageFiles</code>
performs a move rather than a copy.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadataOnly</code></td>
<td>
<p>Logical value: if <code>TRUE</code>, only metadata are read
into the object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>volumes</code></td>
<td>
<p>An optional integer vector specifying a subset of volumes to
read (generally to save memory). If given, only the requested volumes in
the 4D file will be read.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sparse</code></td>
<td>
<p>Logical value: should the image data be stored in a
<code>SparseArray</code> object?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mask</code></td>
<td>
<p>An optional <code>MriImage</code> object representing a
mask, outside of which the image to be read should be considered to be
zero. This can be used to save memory when only a small part of a large
image is of interest. Ignored if <code>sparse</code> is not <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reorder</code></td>
<td>
<p>Logical value: should the image data be reordered to LAS?
This is recommended in most circumstances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>image</code></td>
<td>
<p>An <code>MriImage</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datatype</code></td>
<td>
<p>A datatype string, such as <code>"uint8"</code> or <code>"float"</code>,
specifying the pixel datatype to use when storing the data. If specified,
this must be a type supported by the requested (or default) file format.
The default, <code>"fit"</code>, results in a datatype being chosen that is wide
enough to fit the range of the data elements. An error will arise if
there's no such type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>writeTags</code></td>
<td>
<p>Logical value: should tags be written in YAML format to an
auxiliary file?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>NIfTI and Analyze are related formats for storing magnetic resonance images.
NIfTI is a more recent extension of Analyze, and contains more specific
information about, for example, the orientation of the image. Its use is
therefore recommended where possible. MGH format is used by the popular
image processing package FreeSurfer, and MRtrix format by the software of
the same name. These formats use a number of different file extensions, but
the details are abstracted away from the user by these functions.
</p>
<p>TractoR does not allow for files with the same basic name using multiple
Analyze/NIfTI/MGH/MRtrix formats in a single directory (e.g.
<code>"foo.nii"</code> AND <code>"foo.img"</code>), and these functions will produce an
error if multiple compatible files exist.
</p>
<p>Suitable values for <code>fileType</code> (and the <code>tractorFileType</code> option,
which is used as a default for writing) are <code>"NIFTI"</code>,
<code>"NIFTI_PAIR"</code> (the two-file NIfTI format), <code>"MGH"</code>, and
corresponding gzipped versions of these with <code>"_GZ"</code> appended. File
types <code>"ANALYZE"</code> and <code>"MRTRIX"</code>, and <code>"_GZ"</code> variants, are
additionally available for reading only. <code>"NIFTI_GZ"</code> is the default
value for the <code>tractorFileType</code> option, but that can be changed using a
call to <code>options</code>, or by setting the <code>TRACTOR_FILETYPE</code>
environment variable before loading the <code>tractor.base</code> package.
</p>
<p>Since multiple files may be involved, copying, moving or symlinking images
is not trivial. <code>copyImageFiles</code> and <code>symlinkImageFiles</code> are
wrappers around the standard functions <code>file.copy</code> and
<code>file.symlink</code> which handle this complexity.
</p>


<h3>Value</h3>

<p><code>readImageFile</code> returns an <code>MriImage</code>
object. <code>imageFileExists</code> returns <code>TRUE</code> if an existing file
with the specified name exists (all file extensions are checked), and
<code>FALSE</code> otherwise. <code>removeImageFiles</code> returns the result of
<code>unlink</code> applied to all relevant files. <code>writeImageFile</code>
and <code>identifyImageFileNames</code> return a list with the following elements,
describing the identified or written files:
</p>

<dl>
<dt>fileStem</dt>
<dd>
<p>The file name without extension.</p>
</dd>
<dt>headerFile</dt>
<dd>
<p>The full header file name.</p>
</dd>
<dt>imageFile</dt>
<dd>
<p>The full image file name.</p>
</dd>
<dt>format</dt>
<dd>
<p>The format of the files (<code>"Nifti"</code>, <code>"Analyze"</code>
or <code>"Mgh"</code>). Not returned by <code>writeImageFile</code>.</p>
</dd>
</dl>
<p><code>copyImageFiles</code> and <code>symlinkImageFiles</code> are called for their
side effects.
</p>


<h3>Author(s)</h3>

<p>Jon Clayden
</p>


<h3>References</h3>

<p>Please cite the following reference when using TractoR in your
work:
</p>
<p>J.D. Clayden, S. Mu√±oz Maniega, A.J. Storkey, M.D. King, M.E. Bastin &amp; C.A.
Clark (2011). TractoR: Magnetic resonance imaging and tractography with R.
Journal of Statistical Software 44(8):1-18. <a href="https://doi.org/10.18637/jss.v044.i08">doi:10.18637/jss.v044.i08</a>.
</p>


<h3>See Also</h3>

<p>The NIfTI-1 standard (<a href="http://nifti.nimh.nih.gov/nifti-1">http://nifti.nimh.nih.gov/nifti-1</a>) and
<code>MriImage</code>.
</p>


</div>
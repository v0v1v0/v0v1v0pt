<div class="container">

<table style="width: 100%;"><tr>
<td>imagebary14C</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Barycenter of Images according to Cuturi &amp; Doucet (2014)</h2>

<h3>Description</h3>

<p>Using entropic regularization for Wasserstein barycenter computation, <code>imagebary14C</code>
finds a <em>barycentric</em> image <code class="reqn">X^*</code> given multiple images <code class="reqn">X_1,X_2,\ldots,X_N</code>.
Please note the followings; (1) we only take a matrix as an image so please
make it grayscale if not, (2) all images should be of same size - no resizing is performed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">imagebary14C(images, p = 2, weights = NULL, lambda = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>images</code></td>
<td>
<p>a length-<code class="reqn">N</code> list of same-size image matrices of size <code class="reqn">(m\times n)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>an exponent for the order of the distance (default: 2).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>a weight of each image; if <code>NULL</code> (default), uniform weight is set. Otherwise,
it should be a length-<code class="reqn">N</code> vector of nonnegative weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>a regularization parameter; if <code>NULL</code> (default), a paper's suggestion
would be taken, or it should be a nonnegative real number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra parameters including </p>

<dl>
<dt>abstol</dt>
<dd>
<p>stopping criterion for iterations (default: 1e-8).</p>
</dd>
<dt>init.image</dt>
<dd>
<p>an initial weight image (default: uniform weight).</p>
</dd>
<dt>maxiter</dt>
<dd>
<p>maximum number of iterations (default: 496).</p>
</dd>
<dt>nthread</dt>
<dd>
<p>number of threads for OpenMP run (default: 1).</p>
</dd>
<dt>print.progress</dt>
<dd>
<p>a logical to show current iteration (default: <code>TRUE</code>).</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an <code class="reqn">(m\times n)</code> matrix of the barycentric image.
</p>


<h3>References</h3>

<p>Cuturi M, Doucet A (2014).
“Fast computation of wasserstein barycenters.”
In Xing EP, Jebara T (eds.), <em>Proceedings of the 31st international conference on international conference on machine learning - volume 32</em>, volume 32 of <em>Proceedings of machine learning research</em>, 685–693.
</p>


<h3>See Also</h3>

<p><code>bary14C</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#----------------------------------------------------------------------
#                       MNIST Data with Digit 3
#
# EXAMPLE 1 : Very Small  Example for CRAN; just showing how to use it!
# EXAMPLE 2 : Medium-size Example for Evolution of Output
#----------------------------------------------------------------------
# EXAMPLE 1
data(digit3)
datsmall = digit3[1:2]
outsmall = imagebary14C(datsmall, maxiter=3)

# EXAMPLE 2 : Barycenter of 100 Images
# RANDOMLY SELECT THE IMAGES
data(digit3)
dat2 = digit3[sample(1:2000, 100)]  # select 100 images

# RUN SEQUENTIALLY
run10 = imagebary14C(dat2, maxiter=10)                   # first 10 iterations
run20 = imagebary14C(dat2, maxiter=10, init.image=run10) # run 40 more
run50 = imagebary14C(dat2, maxiter=30, init.image=run20) # run 50 more

# VISUALIZE
opar &lt;- par(no.readonly=TRUE)
par(mfrow=c(2,3), pty="s")
image(dat2[[sample(100,1)]], axes=FALSE, main="a random image")
image(dat2[[sample(100,1)]], axes=FALSE, main="a random image")
image(dat2[[sample(100,1)]], axes=FALSE, main="a random image")
image(run10, axes=FALSE, main="barycenter after 10 iter")
image(run20, axes=FALSE, main="barycenter after 20 iter")
image(run50, axes=FALSE, main="barycenter after 50 iter")
par(opar)

## End(Not run)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>expect_snapshot_plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Test if the new plot matches a target (snapshot) plot</h2>

<h3>Description</h3>

<p>This expectation can be used with <code>tinytest</code> to check if the new plot matches
a target plot.
</p>
<p>When the expectation is checked for the first time, the expectation fails and
a reference plot is saved to the <code style="white-space: pre;">⁠inst/tinytest/_tinysnapshot⁠</code> folder.
</p>
<p>When the expectation fails, the reference plot, the new plot, and a diff are
saved to the <code>inst/tinytest/label</code> folder. Call the <code>review()</code> function to compare.
</p>
<p>To update a snapshot, delete the reference file from the <code style="white-space: pre;">⁠_tinysnapshot⁠</code>
folder and run the test suite again.
</p>
<p>See the package README file or website for detailed examples.
</p>


<h3>Usage</h3>

<pre><code class="language-R">expect_snapshot_plot(
  current,
  label,
  width = getOption("tinysnapshot_width", default = NULL),
  height = getOption("tinysnapshot_height", default = NULL),
  tol = getOption("tinysnapshot_tol", default = 0),
  metric = getOption("tinysnapshot_metric", default = "AE"),
  fuzz = getOption("tinysnapshot_fuzz", default = 0),
  device = getOption("tinysnapshot_device", default = "svg"),
  device_args = getOption("tinysnapshot_device_args", default = list()),
  os = getOption("tinysnapshot_os", default = Sys.info()["sysname"])
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>current</code></td>
<td>
<p>an object of class <code>ggplot</code> or a function which returns a base R plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>a string to identify the snapshot (alpha-numeric, hyphens, or underscores). Each plot in the test suite must have a unique label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>of the snapshot. PNG default: 480 pixels. SVG default: 7 inches.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>of the snapshot. PNG default: 480 pixels. SVG default: 7 inches.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>distance estimates larger than this threshold will trigger a test failure. Scale depends on the <code>metric</code> argument. With the default <code>metric="AE"</code> (absolute error), the <code>tolerance</code> corresponds roughly to the number of pixels of difference between the plot and the reference image.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>string with a metric from <code>magick::metric_types()</code> such as <code>"AE"</code> or <code>"phash"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fuzz</code></td>
<td>
<p>relative color distance between 0 and 100 to be considered similar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>device</code></td>
<td>
<p>"svg", "png", "ragg" or "svglite"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>device_args</code></td>
<td>
<p>list of arguments to pass to the device call (e.g., <code>user_fonts</code> for <code>svglite</code> device).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>os</code></td>
<td>
<p>character vector of operating systems on which the test should be run (e.g., "Windows", "Linux", "Darwin"). Tests are skipped when no element of the vector matches the output of: <code>Sys.info()["sysname"]</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>tinytest</code> object. A <code>tinytest</code> object is a <code>logical</code> with attributes holding information about the test that was run
</p>


</div>
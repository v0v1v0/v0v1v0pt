<div class="container">

<table style="width: 100%;"><tr>
<td>DataframeFilteredDataset</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The <code>DataframeFilteredDataset</code> <code>R6</code> class</h2>

<h3>Description</h3>

<p>The <code>DataframeFilteredDataset</code> <code>R6</code> class
</p>
<p>The <code>DataframeFilteredDataset</code> <code>R6</code> class
</p>


<h3>Super class</h3>

<p><code>teal.slice::FilteredDataset</code> -&gt; <code>DataframeFilteredDataset</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataframeFilteredDataset-new"><code>DataframeFilteredDataset$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-get_call"><code>DataframeFilteredDataset$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-set_filter_state"><code>DataframeFilteredDataset$set_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-remove_filter_state"><code>DataframeFilteredDataset$remove_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-ui_add"><code>DataframeFilteredDataset$ui_add()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-get_filter_overview"><code>DataframeFilteredDataset$get_filter_overview()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-clone"><code>DataframeFilteredDataset$clone()</code></a>
</p>
</li>
</ul>
<details><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="clear_filter_states"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-clear_filter_states"><code>teal.slice::FilteredDataset$clear_filter_states()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="format"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-format"><code>teal.slice::FilteredDataset$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataname"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataname"><code>teal.slice::FilteredDataset$get_dataname()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataset"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataset"><code>teal.slice::FilteredDataset$get_dataset()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataset_label"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataset_label"><code>teal.slice::FilteredDataset$get_dataset_label()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_filter_count"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_filter_count"><code>teal.slice::FilteredDataset$get_filter_count()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_filter_state"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_filter_state"><code>teal.slice::FilteredDataset$get_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_keys"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_keys"><code>teal.slice::FilteredDataset$get_keys()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="print"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-print"><code>teal.slice::FilteredDataset$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="srv_active"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-srv_active"><code>teal.slice::FilteredDataset$srv_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="srv_add"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-srv_add"><code>teal.slice::FilteredDataset$srv_add()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="ui_active"><a href="../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-ui_active"><code>teal.slice::FilteredDataset$ui_active()</code></a></span></li>
</ul></details><hr>
<a id="method-DataframeFilteredDataset-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Initializes this <code>DataframeFilteredDataset</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$new(
  dataset,
  dataname,
  keys = character(0),
  parent_name = character(0),
  parent = NULL,
  join_keys = character(0),
  label = character(0)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataset</code></dt>
<dd>
<p>(<code>data.frame</code>)
single <code>data.frame</code> for which filters are rendered.</p>
</dd>
<dt><code>dataname</code></dt>
<dd>
<p>(<code>character(1)</code>)
syntactically valid name given to the dataset.</p>
</dd>
<dt><code>keys</code></dt>
<dd>
<p>(<code>character</code>) optional
vector of primary key column names.</p>
</dd>
<dt><code>parent_name</code></dt>
<dd>
<p>(<code>character(1)</code>)
name of the parent dataset.</p>
</dd>
<dt><code>parent</code></dt>
<dd>
<p>(<code>reactive</code>)
that returns a filtered <code>data.frame</code> from other <code>FilteredDataset</code> named <code>parent_name</code>.
Passing <code>parent</code> results in a <code>reactive</code> link that causes re-filtering of this <code>dataset</code>
based on the changes in <code>parent</code>.</p>
</dd>
<dt><code>join_keys</code></dt>
<dd>
<p>(<code>character</code>)
vector of names of columns in this dataset to join with <code>parent</code> dataset.
If column names in the parent do not match these, they should be given as the names of this vector.</p>
</dd>
<dt><code>label</code></dt>
<dd>
<p>(<code>character(1)</code>)
label to describe the dataset.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Object of class <code>DataframeFilteredDataset</code>, invisibly.
</p>


<hr>
<a id="method-DataframeFilteredDataset-get_call"></a>



<h4>Method <code>get_call()</code>
</h4>

<p>Gets the subset expression.
</p>
<p>This function returns subset expressions equivalent to selected items
within each of <code>filter_states</code>. Configuration of the expressions is constant and
depends on <code>filter_states</code> type and order which are set during initialization.
This class contains single <code>FilterStates</code> which contains single <code>state_list</code>
and all <code>FilterState</code> objects apply to one argument (<code>...</code>) in a <code>dplyr::filter</code> call.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$get_call(sid = "")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>sid</code></dt>
<dd>
<p>(<code>character</code>)
when specified, the method returns code containing conditions calls of
<code>FilterState</code> objects with <code>sid</code> different to that of this <code>sid</code> argument.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Either a <code>list</code> of length 1 containing a filter <code>call</code>, or <code>NULL</code>.
</p>


<hr>
<a id="method-DataframeFilteredDataset-set_filter_state"></a>



<h4>Method <code>set_filter_state()</code>
</h4>

<p>Set filter state.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$set_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt>
<dd>
<p>(<code>teal_slices</code>)</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-DataframeFilteredDataset-remove_filter_state"></a>



<h4>Method <code>remove_filter_state()</code>
</h4>

<p>Remove one or more <code>FilterState</code> form a <code>FilteredDataset</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$remove_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt>
<dd>
<p>(<code>teal_slices</code>)
specifying <code>FilterState</code> objects to remove;
<code>teal_slice</code>s may contain only <code>dataname</code> and <code>varname</code>, other elements are ignored</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-DataframeFilteredDataset-ui_add"></a>



<h4>Method <code>ui_add()</code>
</h4>

<p>UI module to add filter variable for this dataset.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$ui_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>shiny.tag</code>
</p>


<hr>
<a id="method-DataframeFilteredDataset-get_filter_overview"></a>



<h4>Method <code>get_filter_overview()</code>
</h4>

<p>Creates row for filter overview in the form of <br><code>dataname -- observations (remaining/total)</code> - data.frame
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$get_filter_overview()</pre></div>



<h5>Returns</h5>

<p>A <code>data.frame</code>.
</p>


<hr>
<a id="method-DataframeFilteredDataset-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R"># use non-exported function from teal.slice
DataframeFilteredDataset &lt;- getFromNamespace("DataframeFilteredDataset", "teal.slice")

library(shiny)

ds &lt;- DataframeFilteredDataset$new(iris, "iris")
ds$set_filter_state(
  teal_slices(
    teal_slice(dataname = "iris", varname = "Species", selected = "virginica"),
    teal_slice(dataname = "iris", varname = "Petal.Length", selected = c(2.0, 5))
  )
)
isolate(ds$get_filter_state())
isolate(ds$get_call())

## set_filter_state
dataset &lt;- DataframeFilteredDataset$new(iris, "iris")
fs &lt;- teal_slices(
  teal_slice(dataname = "iris", varname = "Species", selected = "virginica"),
  teal_slice(dataname = "iris", varname = "Petal.Length", selected = c(2.0, 5))
)
dataset$set_filter_state(state = fs)
isolate(dataset$get_filter_state())

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>openmp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Control number of OpenMP threads used by a TMB model.</h2>

<h3>Description</h3>

<p>Control number of OpenMP threads used by a TMB model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">openmp(n = NULL, max = FALSE, autopar = NULL, DLL = getUserDLL())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Requested number of threads, or <code>NULL</code> to just read the current value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max</code></td>
<td>
<p>Logical; Set n to OpenMP runtime value 'omp_get_max_threads()'?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>autopar</code></td>
<td>
<p>Logical; use automatic parallelization - see details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DLL</code></td>
<td>
<p>DLL of a TMB model.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function controls the number of parallel threads used by a TMB model compiled with OpenMP.
The number of threads is part of the configuration list <code>config()</code> of the DLL.
The value only affects parallelization of the DLL. It does <em>not</em> affect BLAS/LAPACK specific parallelization which has to be specified elsewhere.
</p>
<p>When a DLL is loaded, the number of threads is set to 1 by default.
To activate parallelization you have to explicitly call <code>openmp(nthreads)</code> after loading the DLL. Calling <code>openmp(max=TRUE)</code> should normally pick up the environment variable <code>OMP_NUM_THREADS</code>, but this may be platform dependent.
</p>
<p>An experimental option <code>autopar=TRUE</code> can be set to parallelize models automatically. This requires the model to be compiled with <code>framework="TMBad"</code> and <code>openmp=TRUE</code> without further requirements on the C++ code. If the C++ code already has explicit parallel constructs these will be ignored if automatic parallelization is enabled.
</p>


<h3>Value</h3>

<p>Number of threads.
</p>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>tierChart</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Create tier charts 
</h2>

<h3>Description</h3>

<p>A tier chart plots several years' observations of a series against the
times of year in which they were observed.  Useful for seeing seasonal
patterns in daily, weekly and irregularly-spaced data. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">tierChart(x,
          startMonth = latestJanuary(end(x)),
          nMonths = 4,
          nYears = 7,
          offsets = 0,
          padDays = 6,
          pch = "year",
          lty = "solid",
          lwd = 1.5,
          col = 1 + (n.y:1),
          type = "b",
          ylim = NULL,
          outlier.trim = 0,
          noTrimLastYear = TRUE,
          extendHorizontalTicks = TRUE,
          circles.ymd = NULL,
          circles.col = 6,
          circles.inches = 0.1,
          vlines.ymd = NULL,
          vlines.col = 2,
          vlines.lty = 4,
          vlines.lwd = 1.5,
          vlines2.ymd = NULL,
          vlines2.col = 3,
          vlines2.lty = "solid",
          vlines2.lwd = 2,
          hlines = NULL,
          hlines.col = 1,
          hlines.lty = 1,
          hlines.lwd = 1,
          tiPoints.1 = NULL,
          tiPoints.2 = NULL,
          pch.1 = "*",
          pch.2 = "+",
          col.1 = 2,
          col.2 = 3,
          nolegend = FALSE,
          main = deparse(substitute(x)),
          topleft.labels = NULL,
          topright.labels = NULL,
          legend.ncol = length(years),
          legend.bg = 0,
          timestamp = TRUE,
          topline = TRUE,
          vlines.periodEnd = TRUE,
          vlines.month = TRUE,
          midperiod = FALSE,
          lwdLastYear = 1.5,
          cex = 1.5,
          boxes = TRUE,
          ...)

adjustableTierChart(x,
                    ...,
                    edit = TRUE,
                    changes = numeric(0),
                    verbose = FALSE) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>A monhly or higher frequency (such as weekly or daily) time indexed
series (a <code>tis</code> object) or something that <code>as.tis</code> can
convert to one.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startMonth</code></td>
<td>

<p>a monthly time index (<code>ti</code>) object indicating first month to
show on plot. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nMonths</code></td>
<td>

<p>number of months to show on plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nYears</code></td>
<td>

<p>number of years to include in the plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offsets</code></td>
<td>

<p>vector of day offsets for the years in descending order.  If
<code>offsets[2]</code> is 3, for example, the points for the
second-to-last year will be shifted forward 3 days on the plot.
Negative numbers shift points back.
If <code>length(offsets) &lt; nYears</code>, zeroes will be appended to
<code>offsets</code> to make it <code>nYears</code> long. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>padDays</code></td>
<td>

<p>number of extra days to plot before and after the requested months.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch</code></td>
<td>

<p>plotting symbols to be drawn when plotting points.  If pch is a
character string, such as "a1b2", the first year's points will be
labeled "a", the second year's with "1", the third with "b", and so
on.  Alternatively, pch can be a numeric vector giving the numbers of
plotting symbols to use, as detailed in the documentation for
<code>lines</code>.  The default string "year" uses the last digit of the
year number for each point in that year.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>

<p>vector of line types.  The first element is for the first year, the second
element for the second year, etc., even if lines are not plotted for all
years. Line types will be used cyclically until all years are drawn. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>

<p>number specifying line width
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>

<p>vector of colors for the years, specified as numbers or color names.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>

<p>character string, telling which type of plot
(<code>"p"</code>, points; <code>"l"</code>, lines; <code>"b"</code>, both;
<code>"n"</code>, none; or <code>"h"</code>, high-density) should be done for
each year.  The first character of <code>type</code> defines the first
year, the second character the second, etc. Characters in
<code>type</code> are cycled through; e.g., <code>"pl"</code> alternately plots
points and lines.  The default is "b". 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>

<p>ylim is a vector of 2 numbers giving desired y-axis limits.  The
actual limits on the plot will be the result of <code>pretty(ylim)</code>.
If <code>ylim</code> is not set explicitly, the value of
<code>outlier.trim</code> is used to calculate it such that the
<code>c(outlier.trim, 1 - outlier.trim)</code> quantiles of the
plotted points fall within the calculated <code>ylim</code> before it is
"prettied".  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outlier.trim</code></td>
<td>

<p>see <code>ylim</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noTrimLastYear</code></td>
<td>

<p>if <code>TRUE</code> (the default), <code>outlier.trim</code> is effectively
set to zero for the most recent year, i.e., the y-axis limits will
be expanded, if necessary, to insure that all of the points plotted
for the most recent year fit on the plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extendHorizontalTicks</code></td>
<td>

<p>if <code>TRUE</code> (the default), extend the horizontal ticks with a
dotted line all the	way across the chart.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circles.ymd</code></td>
<td>

<p>draws circles around the plotted points corresponding to these ymd
dates. The colors and sizes of the circles are given by
<code>circles.col</code> and <code>circles.inches</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circles.col</code></td>
<td>

<p>see <code>circles.ymd</code> above.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circles.inches</code></td>
<td>

<p>see <code>circles.ymd</code> above.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines.ymd</code></td>
<td>

<p>numeric vector of yyyymmdd dates, draws vertical lines of type
<code>vlines.lty</code> width <code>vlines.lwd</code> and colors
<code>vlines.col</code> at the dates given.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines.col</code></td>
<td>

<p>see <code>vlines.ymd</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines.lty</code></td>
<td>

<p>see <code>vlines.ymd</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines.lwd</code></td>
<td>

<p>see <code>vlines.ymd</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines2.ymd</code></td>
<td>

<p>numeric vector of yyyymmdd dates, draws vertical lines of type
<code>vlines2.lty</code> width <code>vlines2.lwd</code> and colors
<code>vlines2.col</code> at the dates given. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines2.col</code></td>
<td>

<p>see <code>vlines2.ymd</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines2.lty</code></td>
<td>

<p>see <code>vlines2.ymd</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines2.lwd</code></td>
<td>

<p>see <code>vlines2.ymd</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hlines</code></td>
<td>

<p>numeric vector, draws horizontal lines of type <code>hlines.lty</code> width
<code>hlines.lwd</code> and colors <code>hlines.col</code> at the locations given.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hlines.col</code></td>
<td>

<p>see <code>hlines</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hlines.lty</code></td>
<td>

<p>see <code>hlines</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hlines.lwd</code></td>
<td>

<p>see <code>hlines</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tiPoints.1</code></td>
<td>

<p>a <code>ti</code> object specifying dates for which the corresponding
points will be marked with the characters in <code>pch.1</code> in 
colors <code>col.1</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch.1</code></td>
<td>

<p>see <code>tiPoints.1</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.1</code></td>
<td>

<p>see <code>tiPoints.1</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tiPoints.2</code></td>
<td>

<p>a <code>ti</code> object specifying dates for which the corresponding
points will be marked with the characters in <code>pch.2</code> in 
colors <code>col.2</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch.2</code></td>
<td>

<p>see <code>tiPoints.2</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.2</code></td>
<td>

<p>see <code>tiPoints.2</code> above
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nolegend</code></td>
<td>

<p>if <code>T</code> do not plot a legend
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>

<p>character string giving main title for the chart.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>topleft.labels</code></td>
<td>

<p>strings to place in left corner of top margin
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>topright.labels</code></td>
<td>

<p>strings to place in right corner of top margin
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.ncol</code></td>
<td>

<p>number of columns to use for legend.  Has no effect if
<code>nolegend</code> is <code>T</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.bg</code></td>
<td>

<p>background color for legend
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timestamp</code></td>
<td>

<p>if <code>T</code> put a timestamp in upper right corner of top margin
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>topline</code></td>
<td>

<p>if <code>T</code> (the default) draw an axis line across the top of the plot
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines.periodEnd</code></td>
<td>

<p>if <code>T</code> (the default) draw a light vertical line at each period end of
the most recent year plotted.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines.month</code></td>
<td>

<p>if <code>T</code> (the default) draw a light vertical line at month boundaries
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>midperiod</code></td>
<td>

<p>if <code>T</code> draw the point for each period on the middle day of the
period.  If <code>F</code> (the default) draw points on the last day of
the period.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwdLastYear</code></td>
<td>

<p>line width for the last year plotted.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boxes</code></td>
<td>

<p>if <code>T</code> (the default) add scroll arrow and PrintMe boxes to the
plot for use by <code>adjustableTierChart</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>

<p>numeric character expansion factor for the characters denoting the
points on the plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>for <code>adjustableTierChart</code>, arguments to be passed on to
<code>tierChart</code>.  For <code>tierChart</code>, ... denote arguments to
be passed to <code>matplot</code>, which does the actual plotting. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edit</code></td>
<td>

<p>if <code>T</code>, the points on the plot are editable. Clicking above or
below a point draws an arrow from the point to it desired new
location.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>changes</code></td>
<td>

<p>used internally by the function to remember what points have been
moved thus far while scrolling.  This argument should never be set
by the user.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>if <code>T</code>, <code>adjustableTierChart</code> is chattier about what it is
doing.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A tier chart shows seasonal patterns in data by superimposing the data
from the same months of several years onto a single plot.  Tier charts
can be used both to present a view of a time series and to graphically
edit its values by pointing and clicking.
</p>
<p>For most purposes, <code>adjustableTierChart</code> is preferred to
<code>tierChart</code>, since the former presents a chart that can be
edited, scrolled and printed via mouse clicks, while the latter simply
draws a single chart and returns.  However, <code>adjustableTierChart</code>
requires user interaction, which may make it unsuitable for some uses.
</p>
<p>When <code>adjustableTierChart</code> is called, it draws on the current
graphics device and then waits for mouse clicks to occur.  A left mouse
button click on one of the scroll arrows changes the display to show
adjacent months, while a left mouse click on the <b>PrintMe</b> box
causes the current plot to be copied to the printer.  Left mouse clicks
in the data area of the plot are used to edit the values of the time
series.  Arrows are drawn from the current data points to the mouse
location to show where the new data values will be.
</p>
<p>A middle mouse button click causes <code>adjustableTierChart</code> to
return.  Closing the graphics window via the windowing system (e.g.,
clicking on the window's <b>X</b> button) has the same effect.
<em>Until <code>adjustableTierChart</code> is told to return, the entire R
process will appear to be frozen.</em> It isn't actually frozen, it's just
waiting for mouse input. Use <code>tierChart</code> instead if no user
interaction is desired.
</p>


<h3>Value</h3>

<p><code>tierChart</code> invisibly returns a list with the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>px</code></td>
<td>

<p>a matrix with <code>nYears</code> columns containing the x coordinates of
the points for each year.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>py</code></td>
<td>

<p>a matrix with <code>nYears</code> columns containing the y coordinates of
the points for each year.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ymd</code></td>
<td>

<p>matrix of yyyymmdd dates corresponding to x coordinates in <code>px</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>

<p>matrix giving positions of the elements of the y matrix in the
original x series, that is, x[index[i,j]] == y[i,j]
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lBox</code></td>
<td>

<p>vector of 4 numbers giving the c(left, bottom, right, top) bounds of
the scroll arrow box in the upper left corner of the plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rBox</code></td>
<td>

<p>vector of 4 numbers giving the c(left, bottom, right, top) bounds of
the scroll arrow box in the upper right corner of the plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>printBox</code></td>
<td>

<p>vector of 4 numbers giving the c(left, bottom, right, top) bounds of
the print box in the adjoining the left scroll box.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startMonth</code></td>
<td>

<p>the input argument of the same name
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nMonths</code></td>
<td>

<p>number of months wide the plot is
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nYears</code></td>
<td>

<p>number of years plotted
</p>
</td>
</tr>
</table>
<p>If the input argument codeboxes is <code>F</code>, the <code>lBox</code>,
<code>rBox</code> and <code>printBox</code> elements of the list will not be
present.
</p>
<p><code>adjustableTierChart</code> returns the edited input series <code>x</code> as
a <code>tis</code> object, with an additional <code>startMonth</code> attribute. 
</p>


<h3>Side Effects</h3>

<p>a tier chart is drawn on the current graphics device.
</p>


<h3>See Also</h3>

<p><code>monthplot</code> for a nice way to look at seaonality in monthly
data.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
tierChart(m1.w)   ## January - April of 7 most recent years

tierChart(m1.w, startMonth=1, nMonths = 12)  ## Tier chart for entire year

tierChart(m1.w, type="l", lty=1)   ## same as first example, but with
                                   ## solid lines and no plotting symbols

xe &lt;- adjustableTierChart(x)    ## xe will be edited version of x

## End(Not run)
</code></pre>


</div>
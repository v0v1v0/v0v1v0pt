<div class="container">

<table style="width: 100%;"><tr>
<td>roll_circstats</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply Rolling Functions using Circular Statistics</h2>

<h3>Description</h3>

<p>A generic function for applying a function to rolling margins of an array.
</p>


<h3>Usage</h3>

<pre><code class="language-R">roll_circstats(
  x,
  w = NULL,
  FUN,
  axial = TRUE,
  na.rm = TRUE,
  width = NULL,
  by.column = FALSE,
  partial = TRUE,
  fill = NA,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>numeric vector. Values in degrees.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>(optional) Weights. A vector of positive numbers and of the same
length as <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>the function to be applied</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axial</code></td>
<td>
<p>logical. Whether the data are axial, i.e. pi-periodical
(<code>TRUE</code>, the default) or directional, i.e. <code class="reqn">2 \pi</code>-periodical (<code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>logical value indicating whether <code>NA</code> values in <code>x</code>
should be stripped before the computation proceeds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>integer specifying the window width (in numbers of observations)
which is aligned to the original sample according to the <code>align</code> argument.
If <code>NULL</code>, an optimal width is calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by.column</code></td>
<td>
<p>logical. If <code>TRUE</code>, <code>FUN</code> is applied to each column
separately.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>partial</code></td>
<td>
<p>logical or numeric. If <code>FALSE</code> then <code>FUN</code> is only
applied when all indexes of the rolling window are within the observed time
range. If <code>TRUE</code> (default), then the subset of indexes that are in range
are passed to <code>FUN</code>. A numeric argument to partial can be used to determine
the minimal window size for partial computations. See below for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>a three-component vector or list (recycled otherwise) providing
filling values at the left/within/to the right of the data range. See the
fill argument of <code>zoo::na.fill()</code> for details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>optional arguments passed to <code>zoo::rollapply()</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>numeric vector  with the results of the rolling function.
</p>


<h3>Note</h3>

<p>If the rolling statistics are applied to values that are a function of
distance it is recommended to sort the values first.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("plates")
plate_boundary &lt;- subset(plates, plates$pair == "na-pa")
data("san_andreas")
PoR &lt;- subset(nuvel1, nuvel1$plate.rot == "na")
distance &lt;- distance_from_pb(
  x = san_andreas,
  PoR = PoR,
  pb = plate_boundary,
  tangential = TRUE
)
dat &lt;- san_andreas[order(distance), ]
roll_circstats(dat$azi, w = 1 / dat$unc, circular_mean, width = 51)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>tm_g_ipp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>teal Module: Individual Patient Plots</h2>

<h3>Description</h3>

<p>This module produces <code>ggplot2::ggplot()</code> type individual patient plots that display trends in parameter
values over time for each patient, using data with ADaM structure.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tm_g_ipp(
  label,
  dataname,
  parentname = ifelse(inherits(arm_var, "data_extract_spec"),
    teal.transform::datanames_input(arm_var), "ADSL"),
  arm_var,
  paramcd,
  id_var = teal.transform::choices_selected(teal.transform::variable_choices(dataname,
    "USUBJID"), "USUBJID", fixed = TRUE),
  visit_var = teal.transform::choices_selected(teal.transform::variable_choices(dataname,
    "AVISIT"), "AVISIT", fixed = TRUE),
  aval_var = teal.transform::choices_selected(teal.transform::variable_choices(dataname,
    "AVAL"), "AVAL", fixed = TRUE),
  avalu_var = teal.transform::choices_selected(teal.transform::variable_choices(dataname,
    "AVALU"), "AVALU", fixed = TRUE),
  base_var = lifecycle::deprecated(),
  baseline_var =
    teal.transform::choices_selected(teal.transform::variable_choices(dataname, "BASE"),
    "BASE", fixed = TRUE),
  add_baseline_hline = FALSE,
  separate_by_obs = FALSE,
  suppress_legend = FALSE,
  add_avalu = TRUE,
  plot_height = c(1200L, 400L, 5000L),
  plot_width = NULL,
  pre_output = NULL,
  post_output = NULL,
  ggplot2_args = teal.widgets::ggplot2_args()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>(<code>character</code>)<br> menu item label of the module in the teal app.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataname</code></td>
<td>
<p>(<code>character</code>)<br> analysis data used in teal module.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parentname</code></td>
<td>
<p>(<code>character</code>)<br> parent analysis data used in teal module, usually this refers to <code>ADSL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arm_var</code></td>
<td>
<p>(<code>teal.transform::choices_selected()</code>)<br> object with
all available choices and preselected option for variable values that can be used as arm variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>paramcd</code></td>
<td>
<p>(<code>teal.transform::choices_selected()</code>)<br> object with all
available choices and preselected option for the parameter code variable from <code>dataname</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_var</code></td>
<td>
<p>(<code>teal.transform::choices_selected()</code>)<br> object specifying
the variable name for subject id.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>visit_var</code></td>
<td>
<p>(<code>teal.transform::choices_selected()</code>)<br> object with
all available choices and preselected option for variable names that can be used as <code>visit</code> variable.
Must be a factor in <code>dataname</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aval_var</code></td>
<td>
<p>(<code>teal.transform::choices_selected()</code>)<br> object with
all available choices and pre-selected option for the analysis variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avalu_var</code></td>
<td>
<p>(<code>teal.transform::choices_selected()</code>)<br> object with
all available choices and preselected option for the analysis unit variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_var</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Please use the <code>baseline_var</code> argument instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseline_var</code></td>
<td>
<p>(<code>teal.transform::choices_selected()</code>)<br> object with
all available choices and preselected option for variable values that can be used as <code>baseline_var</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_baseline_hline</code></td>
<td>
<p>(<code>logical</code>)<br> whether a horizontal line should be added to the plot at baseline y-value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>separate_by_obs</code></td>
<td>
<p>(<code>logical</code>)<br> whether to create multi-panel plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suppress_legend</code></td>
<td>
<p>(<code>logical</code>)<br> whether to suppress the plot legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_avalu</code></td>
<td>
<p>(<code>logical</code>)<br> whether <code>avalu_first</code> text should be appended to the plot title and y-axis label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_height</code></td>
<td>
<p>(<code>numeric</code>) optional<br> vector of length three with <code>c(value, min, max)</code>. Specifies the
height of the main plot and renders a slider on the plot to interactively adjust the plot height.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_width</code></td>
<td>
<p>(<code>numeric</code>) optional<br> vector of length three with <code>c(value, min, max)</code>. Specifies the width
of the main plot and renders a slider on the plot to interactively adjust the plot width.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre_output</code></td>
<td>
<p>(<code>shiny.tag</code>) optional,<br> with text placed before the output to put the output into context.
For example a title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>post_output</code></td>
<td>
<p>(<code>shiny.tag</code>) optional,<br> with text placed after the output to put the output into context.
For example the <code>shiny::helpText()</code> elements are useful.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ggplot2_args</code></td>
<td>
<p>(<code>ggplot2_args</code>) optional<br> object created by <code>teal.widgets::ggplot2_args()</code> with settings
for the module plot. For this module, this argument will only accept <code>ggplot2_args</code> object with <code>labs</code> list of
the following child elements: <code>title</code>, <code>subtitle</code>, <code>x</code>, <code>y</code>. No other elements are taken into account. The
argument is merged with option <code>teal.ggplot2_args</code> and with default module arguments (hard coded in the module
body).
</p>
<p>For more details, see the vignette: <code>vignette("custom-ggplot2-arguments", package = "teal.widgets")</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a <code>teal_module</code> object.
</p>


<h3>See Also</h3>

<p>The <a href="https://insightsengineering.github.io/tlg-catalog/stable/">TLG Catalog</a> where additional example
apps implementing this module can be found.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(nestcolor)
library(dplyr)

ADSL &lt;- tmc_ex_adsl %&gt;%
  slice(1:20) %&gt;%
  df_explicit_na()
ADLB &lt;- tmc_ex_adlb %&gt;%
  filter(USUBJID %in% ADSL$USUBJID) %&gt;%
  df_explicit_na() %&gt;%
  filter(AVISIT != "SCREENING")

app &lt;- init(
  data = cdisc_data(
    ADSL = ADSL,
    ADLB = ADLB,
    code = "
      ADSL &lt;- tmc_ex_adsl %&gt;% slice(1:20) %&gt;% df_explicit_na()
      ADLB &lt;- tmc_ex_adlb %&gt;% filter(USUBJID %in% ADSL$USUBJID) %&gt;%
        df_explicit_na() %&gt;% filter(AVISIT != \"SCREENING\")
    "
  ),
  modules = modules(
    tm_g_ipp(
      label = "Individual Patient Plot",
      dataname = "ADLB",
      arm_var = choices_selected(
        value_choices(ADLB, "ARMCD"),
        "ARM A"
      ),
      paramcd = choices_selected(
        value_choices(ADLB, "PARAMCD"),
        "ALT"
      ),
      aval_var = choices_selected(
        variable_choices(ADLB, c("AVAL", "CHG")),
        "AVAL"
      ),
      avalu_var = choices_selected(
        variable_choices(ADLB, c("AVALU")),
        "AVALU",
        fixed = TRUE
      ),
      id_var = choices_selected(
        variable_choices(ADLB, c("USUBJID")),
        "USUBJID",
        fixed = TRUE
      ),
      visit_var = choices_selected(
        variable_choices(ADLB, c("AVISIT")),
        "AVISIT"
      ),
      baseline_var = choices_selected(
        variable_choices(ADLB, c("BASE")),
        "BASE",
        fixed = TRUE
      ),
      add_baseline_hline = FALSE,
      separate_by_obs = FALSE
    )
  )
)
if (interactive()) {
  shinyApp(app$ui, app$server)
}

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>tongfen_aggregate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform tongfen according to correspondence</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing"><img src="../help/figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
</p>
<p>Aggregate variables secified in meta for several datasets according to correspondence.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tongfen_aggregate(data, correspondence, meta = NULL, base_geo = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>list of datasets to be aggregated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correspondence</code></td>
<td>
<p>correspondence data for gluing up the datasets</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meta</code></td>
<td>
<p>metadata containing aggregation rules as for example returned by 'meta_for_ca_census_vectors'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_geo</code></td>
<td>
<p>identifier for which data element to base the final geography on,
uses the first data element if  'NULL' (default),
expects that 'base_geo' is an element of 'names(data)'.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>aggregated dataset of class sf if base_geo is not NULL and data is of type sf or tibble otherwise.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># aggregate census tract level 2006 population data on common gepgraphy build through
# correspondence from 2006 and 2016 census tracts in the City of Vancouver.
## Not run: 
regions &lt;- list(CSD="5915022")
geo1 &lt;- cancensus::get_census("CA06",regions=regions,geo_format='sf',level='CT')
geo2 &lt;- cancensus::get_census("CA16",regions=regions,geo_format='sf',level='CT')
meta &lt;- meta_for_additive_variables("CA06","Population")
correspondence &lt;- get_tongfen_correspondence_ca_census(geo_datasets=c('CA06','CA16'),
                                                       regions=regions,level='CT')
result &lt;- tongfen_aggregate(list(geo1 %&gt;% rename(GeoUIDCA06=GeoUID),
                                 geo2 %&gt;% rename(GeoUIDCA16=GeoUID)),correspondence,meta)

## End(Not run)
</code></pre>


</div>
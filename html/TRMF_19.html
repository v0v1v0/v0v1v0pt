<div class="container">

<table style="width: 100%;"><tr>
<td>TRMF_seasonal</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add seasonal regularization model to a TRMF object</h2>

<h3>Description</h3>

<p>Creates a regularization scheme that favors seasonally varying solutions and adds it to a TRMF object. In matrix optimization form, it adds the following term to the TRMF cost function:  <code class="reqn">R(x) = lambdaD^2||w(DX_s)||^2 + lambdaA^2||X_s||^2</code>  where <code class="reqn">X_s</code> is sub-set of the Xm matrix controlled by this model and D is a (with a lag of freq) finite difference matrix (or rolling sum matrix, see details).</p>


<h3>Usage</h3>

<pre><code class="language-R">TRMF_seasonal(obj,numTS = 1,freq = 12,sumFirst=FALSE,lambdaD=1,lambdaA=0.0001,weight=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>A TRMF object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numTS</code></td>
<td>
<p>number of latent time series in this model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambdaD</code></td>
<td>
<p>regularization parameter for temporal constraint matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambdaA</code></td>
<td>
<p>regularization parameter to apply simple L2 regularization to this time series model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>optional vector of weights to weight constraints, i.e. R(x) = lambdaD^2*||w*(D%*%X)||^2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freq</code></td>
<td>
<p>The frequency of the seasonal time series model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sumFirst</code></td>
<td>
<p>Minimize the rolling sum of length <code>freq</code> instead of a lagged finite difference.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>TRMF_seasonal(freq=N)</code> fits a lag N random walk. For monthly data, use freq=12, for quarterly data, freq=4. If <code>sumFirst = TRUE</code>, (called this for legacy reasons), a different regularization matrix is used which minimizes a rolling sum of length <code>freq</code> in the latent time series. This can be useful to prevent drift and force the seasonal component to vary around a zero mean.
</p>


<h3>Value</h3>

<p>Returns an updated object of class TRMF.
</p>


<h3>Note</h3>

<p>Unlike <code>TRMF_columns()</code>, these lambdas are squared in the code.</p>


<h3>Author(s)</h3>

<p>Chad Hammerquist
</p>


<h3>References</h3>

<p>Yu, Hsiang-Fu, Nikhil Rao, and Inderjit S. Dhillon. "High-dimensional time series prediction with missing values." arXiv preprint arXiv:1509.08333 (2015).
</p>


<h3>See Also</h3>

<p><code>create_TRMF</code>, <code>TRMF_columns</code>,<code>TRMF_simple</code>, <code>TRMF_trend</code></p>


<h3>Examples</h3>

<pre><code class="language-R"># create test data
tm = 3*poly(x = (-20:20)/10,degree=3)
sm = diffinv(rnorm(29,0,.1),lag=12,xi=(-5:6)/6)
xm = cbind(sm,tm)
fm = matrix(runif(40),4,10)
Am = xm%*%fm+rnorm(410,0,.1)

# create model
obj = create_TRMF(Am)
obj = TRMF_columns(obj,reg_type ="interval")
obj = TRMF_trend(obj,numTS=3,order=2)
obj = TRMF_seasonal(obj,numTS=1,freq=12,lambdaD=5)
out = train(obj)
plot(out)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>encoding</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adapt the (Declared) Encoding of a Character Vector</h2>

<h3>Description</h3>

<p>Functions for testing and adapting the (declared) encoding
of the components of a vector of mode <code>character</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">is.utf8(x)
is.ascii(x)
is.locale(x)

translate(x, recursive = FALSE, internal = FALSE)
fixEncoding(x, latin1 = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a vector (of character).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recursive</code></td>
<td>
<p>option to process list components.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>internal</code></td>
<td>
<p>option to use internal translation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latin1</code></td>
<td>
<p>option to assume <code>"latin1"</code> if the declared 
encoding is <code>"unknown"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>is.utf8</code> tests if the components of a vector of character
are true UTF-8 strings, i.e. contain one or more valid UTF-8
multi-byte sequence(s).
</p>
<p><code>is.locale</code> tests if the components of a vector of character
are in the encoding of the current locale.
</p>
<p><code>translate</code> encodes the components of a vector of <code>character</code>
in the encoding of the current locale. This includes the <code>names</code>
attribute of vectors of arbitrary mode. If <code>recursive = TRUE</code>
the components of a <code>list</code> are processed. If <code>internal = TRUE</code>
multi-byte sequences that are invalid in the encoding of the current
locale are changed to literal hex numbers (see FIXME).
</p>
<p><code>fixEncoding</code> sets the declared encoding of the components of
a vector of character to their correct or preferred values. If
<code>latin1 = TRUE</code> strings that are not valid UTF-8 strings are
declared to be in <code>"latin1"</code>. On the other hand, strings that
are true UTF-8 strings are declared to be in <code>"UTF-8"</code> encoding.
</p>


<h3>Value</h3>

<p>The same type of object as <code>x</code> with the (declared) encoding
possibly changed.
</p>


<h3>Note</h3>

<p>Currently <code>translate</code> uses <code>iconv</code> and therefore is not
guaranteed to work on all platforms.
</p>


<h3>Author(s)</h3>

<p>Christian Buchta</p>


<h3>References</h3>

<p>FIXME PCRE, RFC 3629</p>


<h3>See Also</h3>

<p><code>Encoding</code> and <code>iconv</code>.</p>


<h3>Examples</h3>

<pre><code class="language-R">## Note that we assume R runs in an UTF-8 locale
text &lt;- c("aa", "a\xe4")
Encoding(text) &lt;- c("unknown", "latin1")
is.utf8(text)
is.ascii(text)
is.locale(text)
## implicit translation
text
##
t1 &lt;- iconv(text, from = "latin1", to = "UTF-8")
Encoding(t1)
## oops
t2 &lt;- iconv(text, from = "latin1", to = "utf-8")
Encoding(t2)
t2
is.locale(t2)
##
t2 &lt;- fixEncoding(t2)
Encoding(t2)
## explicit translation
t3 &lt;- translate(text)
Encoding(t3)
</code></pre>


</div>
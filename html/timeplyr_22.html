<div class="container">

<table style="width: 100%;"><tr>
<td>fcount</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A fast replacement to dplyr::count()</h2>

<h3>Description</h3>

<p>Near-identical alternative to <code>dplyr::count()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fcount(
  data,
  ...,
  wt = NULL,
  sort = FALSE,
  order = df_group_by_order_default(data),
  name = NULL,
  .by = NULL,
  .cols = NULL
)

fadd_count(
  data,
  ...,
  wt = NULL,
  sort = FALSE,
  order = df_group_by_order_default(data),
  name = NULL,
  .by = NULL,
  .cols = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Variables to group by.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wt</code></td>
<td>
<p>Frequency weights.
Can be <code>NULL</code> or a variable:
</p>

<ul>
<li>
<p> If <code>NULL</code> (the default), counts the number of rows in each group.
</p>
</li>
<li>
<p> If a variable, computes <code>sum(wt)</code> for each group.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort</code></td>
<td>
<p>If <code>TRUE</code>, will show the largest groups at the top.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>Should the groups be calculated as ordered groups?
If <code>FALSE</code>, this will return the groups in order of first appearance,
and in many cases is faster.
If <code>TRUE</code> (the default), the groups are returned in sorted order,
exactly the same way as <code>dplyr::count</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>The name of the new column in the output.
If there's already a column called <code>n</code>,
it will use <code>nn</code>.
If there's a column called <code>n</code> and <code>n</code>n,
it'll use <code>nnn</code>, and so on, adding <code>n</code>s until it gets a new name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.by</code></td>
<td>
<p>(Optional). A selection of columns to group by for this operation.
Columns are specified using tidy-select.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.cols</code></td>
<td>
<p>(Optional) alternative to <code>...</code> that accepts
a named character vector or numeric vector.
If speed is an expensive resource, it is recommended to use this.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is a fast and near-identical alternative to dplyr::count() using the <code>collapse</code> package.
Unlike <code>collapse::fcount()</code>, this works very similarly to <code>dplyr::count()</code>.
The only main difference is that anything supplied to <code>wt</code>
is recycled and added as a data variable.
Other than that everything works exactly as the dplyr equivalent.
</p>
<p><code>fcount()</code> and <code>fadd_count()</code> can be up to &gt;100x faster than the dplyr equivalents.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> of frequency counts by group.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(timeplyr)
library(dplyr)

iris %&gt;%
  fcount()
iris %&gt;%
  fadd_count(name = "count") %&gt;%
  fslice_head(n = 10)
iris %&gt;%
  group_by(Species) %&gt;%
  fcount()
iris %&gt;%
  fcount(Species)
iris %&gt;%
  fcount(across(where(is.numeric), mean))

### Sorting behaviour

# Sorted by group
starwars %&gt;%
  fcount(hair_color)
# Sorted by frequency
starwars %&gt;%
  fcount(hair_color, sort = TRUE)
# Groups sorted by order of first appearance (faster)
starwars %&gt;%
  fcount(hair_color, order = FALSE)

</code></pre>


</div>
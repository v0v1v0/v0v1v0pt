<div class="container">

<table style="width: 100%;"><tr>
<td>ps.xgb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gradient boosted propensity score estimation</h2>

<h3>Description</h3>

<p><code>ps.xgb</code> calculates propensity scores using gradient boosted logistic
regression and diagnoses the resulting propensity scores using a variety of
methods
</p>


<h3>Usage</h3>

<pre><code class="language-R">ps.xgb(
  formula = formula(data),
  strata = NULL,
  data,
  params,
  file = NULL,
  max.steps = Inf,
  iters.per.step = 100,
  id.var,
  min.iter = 1000,
  min.width = NULL,
  verbose = TRUE,
  save.model = FALSE,
  weights = NULL,
  linkage = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>An object of class formula: a symbolic
description of the propensity score model to be fit with the treatment
indicator on the left side of the formula and the
variables to be balanced on the right side.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>An optional factor variable identifying the strata.
If specified, balance is optimized within strata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>xgboost parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>An optional character string naming a file to save intermediate results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.steps</code></td>
<td>
<p>An integer specifying the maximum number of steps to take.
Note that <code>max.steps</code>*<code>iters.per.step</code> must be greater than or equal to <code>min.iter</code>. Default: Inf.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iters.per.step</code></td>
<td>
<p>An integer specifying the number of iterations to add
to the model at each step of algorithm. Note that <code>max.steps</code>*<code>iters.per.step</code> must be greater than or equal to <code>min.iter</code>. Default: 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id.var</code></td>
<td>
<p>A variable that uniquely identifies observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.iter</code></td>
<td>
<p>An integer specifying the minimum number of iterations before checking for convergence.
Note that <code>max.steps</code>*<code>iters.per.step</code> must be greater than or equal to <code>min.iter</code>. Default: 1000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.width</code></td>
<td>
<p>An integer specifying the minimum number of iterations between the current
number of iterations and the optimal value. Default: <code>5*iters.per.step</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>A logical value indicating if the function should update
the user on its progres Default: TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.model</code></td>
<td>
<p>A logical value indicating if the xgboost model be saved as part of the output object. Default: FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>An optional variable that identifies user defined weights to be incorporated into the optimization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linkage</code></td>
<td>
<p>An indicator of whether the weighting should be for linkage failure (or nonresponse) versus comparison group construction.
A value of TRUE requests weighting to account for linkage failure, while a value of FALSE
requests weighting for comparison group construction. Default: TRUE.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns an object of class <code>ps.xgb</code>, a list containing
</p>

<ul>
<li> <p><code>bal.tab</code> A table summarizing the balance at the optimal number of iterations.
</p>
</li>
<li> <p><code>es</code> A table summarizing the standardized differences within strata at the optimal number of iterations.
</p>
</li>
<li> <p><code>es.max</code> A table summarizing the maximum absolute standardized difference by strata.
</p>
</li>
<li> <p><code>es.mean</code>A table summarizing the mean absolute standardized difference by strata.
</p>
</li>
<li> <p><code>iter.per.step</code> Saves the value of <code>iters.per.step</code> specified by the user.
</p>
</li>
<li> <p><code>opt.iter</code> The optimal number of iterations.
</p>
</li>
<li> <p><code>strata</code> A list of the strata used in the optimization.
</p>
</li>
<li> <p><code>weight.data</code> A dataset containing the unique ID and the optimal weight for each observation.
</p>
</li>
</ul>
<h3>References</h3>

<p>Dan McCaffrey, G. Ridgeway, Andrew Morral (2004). "Propensity
Score Estimation with Boosted Regression for Evaluating Adolescent
Substance Abuse Treatment", <em>Psychological Methods</em> 9(4):403-425.
</p>


<h3>See Also</h3>

<p>twang::ps, xgboost
</p>


<h3>Examples</h3>

<pre><code class="language-R"># See the vignette for examples.


</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>gather_variables</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gather variables from a tidy data frame of draws from variables into a single column</h2>

<h3>Description</h3>

<p>Given a data frame such as might be returned by <code>tidy_draws()</code> or <code>spread_draws()</code>,
gather variables and their values from that data frame into a <code>".variable"</code> and <code>".value"</code> column.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gather_variables(data, exclude = c(".chain", ".iteration", ".draw", ".row"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame with variable names spread across columns, such as one returned by
<code>tidy_draws()</code> or <code>spread_draws()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude</code></td>
<td>
<p>A character vector of names of columns to be excluded from the gather. Default
ignores several meta-data column names used in tidybayes.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function gathers every column except grouping columns and those matching the expression
<code>exclude</code> into key/value columns <code>".variable"</code> and <code>".value"</code>.
</p>
<p>Imagine a data frame <code>data</code> as returned by <code>spread_draws(fit, a[i], b[i,v])</code>, like this:
</p>

<ul>
<li>
<p> column <code>".chain"</code>: the chain number
</p>
</li>
<li>
<p> column <code>".iteration"</code>: the iteration number
</p>
</li>
<li>
<p> column <code>".draw"</code>: the draw number
</p>
</li>
<li>
<p> column <code>"i"</code>: value in <code>1:5</code>
</p>
</li>
<li>
<p> column <code>"v"</code>: value in <code>1:10</code>
</p>
</li>
<li>
<p> column <code>"a"</code>: value of <code>"a[i]"</code> for draw number <code>".draw"</code>
</p>
</li>
<li>
<p> column <code>"b"</code>: value of <code>"b[i,v]"</code> for draw number <code>".draw"</code>
</p>
</li>
</ul>
<p><code>gather_variables(data)</code> on that data frame would return a grouped
data frame (grouped by <code>i</code> and <code>v</code>), with:
</p>

<ul>
<li>
<p> column <code>".chain"</code>: the chain number
</p>
</li>
<li>
<p> column <code>".iteration"</code>: the iteration number
</p>
</li>
<li>
<p> column <code>".draw"</code>: the draw number
</p>
</li>
<li>
<p> column <code>"i"</code>: value in <code>1:5</code>
</p>
</li>
<li>
<p> column <code>"v"</code>: value in <code>1:10</code>
</p>
</li>
<li>
<p> column <code>".variable"</code>: value in <code>c("a", "b")</code>.
</p>
</li>
<li>
<p> column <code>".value"</code>: value of <code>"a[i]"</code> (when <code>".variable"</code> is <code>"a"</code>;
repeated for every value of <code>"v"</code>) or <code>"b[i,v]"</code> (when <code>".variable"</code> is
<code>"b"</code>) for draw number <code>".draw"</code>
</p>
</li>
</ul>
<p>In this example, this call:
</p>
<pre>gather_variables(data)</pre>
<p>Is roughly equivalent to:
</p>
<pre>data %&gt;%
  gather(.variable, .value, -c(.chain, .iteration, .draw, i, v)) %&gt;%
  group_by(.variable, .add = TRUE)
</pre>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Author(s)</h3>

<p>Matthew Kay
</p>


<h3>See Also</h3>

<p><code>spread_draws()</code>, <code>tidy_draws()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

library(dplyr)

data(RankCorr, package = "ggdist")

RankCorr %&gt;%
  spread_draws(b[i,v], tau[i]) %&gt;%
  gather_variables() %&gt;%
  median_qi()

# the first three lines below are roughly equivalent to ggmcmc::ggs(RankCorr)
RankCorr %&gt;%
  tidy_draws() %&gt;%
  gather_variables() %&gt;%
  median_qi()


</code></pre>


</div>
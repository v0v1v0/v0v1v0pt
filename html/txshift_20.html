<div class="container">

<table style="width: 100%;"><tr>
<td>tmle_txshift</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Targeted Minimum Loss Estimate of Counterfactual Mean of Stochastic Shift
Intervention</h2>

<h3>Description</h3>

<p>Targeted Minimum Loss Estimate of Counterfactual Mean of Stochastic Shift
Intervention
</p>


<h3>Usage</h3>

<pre><code class="language-R">tmle_txshift(
  data_internal,
  C_samp = rep(1, nrow(data_internal)),
  V = NULL,
  delta,
  samp_estim,
  gn_cens_weights,
  Qn_estim,
  Hn_estim,
  fluctuation = c("standard", "weighted"),
  max_iter = 10,
  eif_reg_type = c("hal", "glm"),
  samp_fit_args,
  ipcw_efficiency = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data_internal</code></td>
<td>
<p>A <code>data.table</code> constructed internally by a call to
<code>txshift</code>. This contains most of the data for computing the
targeted minimum loss (TML) estimator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>C_samp</code></td>
<td>
<p>A <code>numeric</code> indicator for whether a given observation was
included in the second-stage sample, used to compute an IPC-weighted
one-step estimator in cases where two-stage sampling is performed. Default
assumes no censoring due to sampling.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>V</code></td>
<td>
<p>The covariates that are used in determining the sampling procedure
that gives rise to censoring. The default is <code>NULL</code> and corresponds to
scenarios in which there is no censoring (in which case all values in the
preceding argument <code>C_samp</code> must be 1. To specify this, pass in a
NAMED <code>list</code> identifying variables amongst W, A, Y that are thought to
have played a role in defining the sampling mechanism.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>
<p>A <code>numeric</code> value indicating the shift in the treatment to
be used in defining the target parameter. This is defined with respect to
the scale of the treatment (A).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samp_estim</code></td>
<td>
<p>An object providing the value of the sampling mechanism
evaluated across the full data. This object is passed in after being
constructed by a call to the internal function <code>est_samp</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gn_cens_weights</code></td>
<td>
<p>TODO: document</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Qn_estim</code></td>
<td>
<p>An object providing the value of the outcome evaluated after
imposing a shift in the treatment. This object is passed in after being
constructed by a call to the internal function <code>est_Q</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Hn_estim</code></td>
<td>
<p>An object providing values of the auxiliary ("clever")
covariate, constructed from the treatment mechanism and required for
targeted minimum loss-based estimation. This object object should be passed
in after being constructed by a call to <code>est_Hn</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fluctuation</code></td>
<td>
<p>The method to be used in the submodel fluctuation step
(targeting step) to compute the TML estimator. The choices are "standard"
and "weighted" for where to place the auxiliary covariate in the logistic
tilting regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter</code></td>
<td>
<p>A <code>numeric</code> integer giving the maximum number of steps
to be taken in iterating to a solution of the efficient influence function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eif_reg_type</code></td>
<td>
<p>Whether a flexible nonparametric function ought to be
used in the dimension-reduced nuisance regression of the targeting step for
the censored data case. By default, the method used is a nonparametric
regression based on the Highly Adaptive Lasso (from <span class="pkg">hal9001</span>).
Set this to <code>"glm"</code> to instead use a simple linear regression model.
In this step, the efficient influence function (EIF) is regressed against
covariates contributing to the censoring mechanism (i.e., EIF ~ V | C = 1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samp_fit_args</code></td>
<td>
<p>A <code>list</code> of arguments, all but one of which are
passed to <code>est_samp</code>. For details, consult the documentation
for <code>est_samp</code>. The first element (i.e., <code>fit_type</code>) is
used to determine how this regression is fit: "glm" for generalized linear
model, "sl" for a Super Learner, and "external" for a user-specified input
of the form produced by <code>est_samp</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ipcw_efficiency</code></td>
<td>
<p>Whether to invoke an augmentation of the IPCW-TMLE
procedure that performs an iterative process to ensure efficiency of the
resulting estimate. The default is <code>TRUE</code>; set to <code>FALSE</code> to use
an IPC-weighted loss rather than the IPC-augmented influence function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Invokes the procedure to construct a targeted minimum loss estimate
(TMLE) of the counterfactual mean under a modified treatment policy.
</p>


<h3>Value</h3>

<p>S3 object of class <code>txshift</code> containing the results of the
procedure to compute a TML estimate of the treatment shift parameter.
</p>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>dataset_prepare</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare a dataset for analysis</h2>

<h3>Description</h3>

<p>Transform a dataset with named columns into a list with features (<code>x</code>) and
response (<code>y</code>) elements.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dataset_prepare(
  dataset,
  x,
  y = NULL,
  named = TRUE,
  named_features = FALSE,
  parallel_records = NULL,
  batch_size = NULL,
  num_parallel_batches = NULL,
  drop_remainder = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>A dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Features to include. When <code>named_features</code> is <code>FALSE</code> all features
will be stacked into a single tensor so must have an identical data type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>(Optional). Response variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>named</code></td>
<td>
<p><code>TRUE</code> to name the dataset elements "x" and "y", <code>FALSE</code> to
not name the dataset elements.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>named_features</code></td>
<td>
<p><code>TRUE</code> to yield features as a named list; <code>FALSE</code> to
stack features into a single array. Note that in the case of <code>FALSE</code> (the
default) all features will be stacked into a single 2D tensor so need to
have the same underlying data type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel_records</code></td>
<td>
<p>(Optional) An integer, representing the number of
records to decode in parallel. If not specified, records will be
processed sequentially.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch_size</code></td>
<td>
<p>(Optional). Batch size if you would like to fuse the
<code>dataset_prepare()</code> operation together with a <code>dataset_batch()</code> (fusing
generally improves overall training performance).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_parallel_batches</code></td>
<td>
<p>(Optional) An integer, representing the number of batches
to create in parallel. On one hand, higher values can help mitigate the effect of
stragglers. On the other hand, higher values can increase contention if CPU is
scarce.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_remainder</code></td>
<td>
<p>(Optional.) A boolean, representing whether the last
batch should be dropped in the case it has fewer than <code>batch_size</code>
elements; the default behavior is not to drop the smaller batch.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A dataset. The dataset will have a structure of either:
</p>

<ul>
<li>
<p> When <code>named_features</code> is <code>TRUE</code>: <code>list(x = list(feature_name = feature_values, ...), y = response_values)</code>
</p>
</li>
<li>
<p> When <code>named_features</code> is <code>FALSE</code>: <code>list(x = features_array, y = response_values)</code>,
where <code>features_array</code> is a Rank 2 array of <code style="white-space: pre;">⁠(batch_size, num_features)⁠</code>.
</p>
</li>
</ul>
<p>Note that the <code>y</code> element will be omitted when <code>y</code> is <code>NULL</code>.
</p>


<h3>See Also</h3>

<p>input_fn() for use with <span class="pkg">tfestimators</span>.
</p>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>cut.trip</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Split trip events into exact time-based boundaries.</h2>

<h3>Description</h3>

<p>Split trip events within a single object into exact time boundaries, adding
interpolated coordinates as required.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'trip'
cut(x, breaks, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A trip object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>A character string such as the <code>breaks</code> argument
for <code>cut.POSIXt</code>, or alternatively a vector of
date-time boundaries. (If the latter these must encompass all the time range of
the entire trip object.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Unused arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Motion between boundaries is assumed linear and extra coordinates are added
at the cut points.
</p>
<p>This function was completely rewritten in version 1.1-20.
</p>


<h3>Value</h3>

<p>list of S4 trip objects, each with aligned boundaries in time based on cutting the input into intervals
</p>
<p>A list of trip objects, named by the time boundary in which they lie.
</p>


<h3>Author(s)</h3>

<p>Michael D. Sumner and Sebastian Luque
</p>


<h3>See Also</h3>

<p>See also <code>tripGrid</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

set.seed(66)
d &lt;- data.frame(x=1:100, y=rnorm(100, 1, 10),
                tms= as.POSIXct(as.character(Sys.time()), tz = "GMT") + c(seq(10, 1000, length=50),
                seq(100, 1500, length=50)), id=gl(2, 50))
sp::coordinates(d) &lt;- ~x+y
tr &lt;- trip(d, c("tms", "id"))

cut(tr, "200 sec")

bound.dates &lt;- seq(min(tr$tms) - 1, max(tr$tms) + 1, length=5)
trip.list &lt;- cut(tr, bound.dates)
bb &lt;- sp::bbox(tr)
cn &lt;- c(20, 8)
g &lt;- sp::GridTopology(bb[, 1], apply(bb, 1, diff) / (cn - 1), cn)

tg &lt;- tripGrid(tr, grid=g)
tg &lt;- sp::as.image.SpatialGridDataFrame(tg)
tg$x &lt;- tg$x - diff(tg$x[1:2]) / 2
tg$y &lt;- tg$y - diff(tg$y[1:2]) / 2

op &lt;- par(mfcol=c(4, 1))
for (i in 1:length(trip.list)) {
  plot(sp::coordinates(tr), pch=16, cex=0.7)
  title(names(trip.list)[i], cex.main=0.9)
  lines(trip.list[[i]])
  abline(h=tg$y, v=tg$x, col="grey")
  image(tripGrid(trip.list[[i]], grid=g), interpolate=FALSE,
  col=c("white", grey(seq(0.2, 0.7,  length=256))),add=TRUE)
  abline(h=tg$y, v=tg$x,  col="grey")
  lines(trip.list[[i]])
  points(trip.list[[i]], pch=16, cex=0.7)
}

par(op)
print("you may need to resize the window to see the grid data")

cn &lt;- c(200, 80)
g &lt;- sp::GridTopology(bb[, 1], apply(bb, 1, diff) / (cn - 1), cn)

tg &lt;- tripGrid(tr, grid=g)
tg &lt;- sp::as.image.SpatialGridDataFrame(tg)
tg$x &lt;- tg$x - diff(tg$x[1:2]) / 2
tg$y &lt;- tg$y - diff(tg$y[1:2]) / 2

op &lt;- par(mfcol=c(4, 1))
for (i in 1:length(trip.list)) {
  plot(sp::coordinates(tr), pch=16, cex=0.7)
  title(names(trip.list)[i], cex.main=0.9)
  image(tripGrid(trip.list[[i]], grid=g, method="density", sigma=1),
        interpolate=FALSE,
        col=c("white", grey(seq(0.2, 0.7, length=256))),
        add=TRUE)
  lines(trip.list[[i]])
  points(trip.list[[i]], pch=16, cex=0.7)
}

par(op)
print("you may need to resize the window to see the grid data")



data("walrus818", package = "trip")
library(lubridate)
walrus_list &lt;- cut(walrus818, seq(floor_date(min(walrus818$DataDT), "month"),
ceiling_date(max(walrus818$DataDT), "month"), by = "1 month"))
g &lt;- rasterize(walrus818) * NA_real_
stk &lt;- raster::stack(lapply(walrus_list, rasterize, grid = g))
st &lt;- raster::aggregate(stk, fact = 4, fun = sum, na.rm = TRUE)
st[!st &gt; 0] &lt;- NA_real_

plot(st, col = oc.colors(52))
</code></pre>


</div>
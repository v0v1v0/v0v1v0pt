<div class="container">

<table style="width: 100%;"><tr>
<td>dataset_map_and_batch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fused implementation of dataset_map() and dataset_batch()</h2>

<h3>Description</h3>

<p>Maps 'map_funcâ€œ across batch_size consecutive elements of this dataset and then combines
them into a batch. Functionally, it is equivalent to map followed by batch. However, by
fusing the two transformations together, the implementation can be more efficient.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dataset_map_and_batch(
  dataset,
  map_func,
  batch_size,
  num_parallel_batches = NULL,
  drop_remainder = FALSE,
  num_parallel_calls = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>A dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map_func</code></td>
<td>
<p>A function mapping a nested structure of tensors (having
shapes and types defined by <code>output_shapes()</code> and <code>output_types()</code> to
another nested structure of tensors. It also supports <code>purrr</code> style
lambda functions powered by <code>rlang::as_function()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch_size</code></td>
<td>
<p>An integer, representing the number of consecutive elements
of this dataset to combine in a single batch.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_parallel_batches</code></td>
<td>
<p>(Optional) An integer, representing the number of batches
to create in parallel. On one hand, higher values can help mitigate the effect of
stragglers. On the other hand, higher values can increase contention if CPU is
scarce.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_remainder</code></td>
<td>
<p>(Optional.) A boolean, representing whether the last
batch should be dropped in the case it has fewer than <code>batch_size</code>
elements; the default behavior is not to drop the smaller batch.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_parallel_calls</code></td>
<td>
<p>(Optional) An integer, representing the
number of elements to process in parallel If not specified, elements will
be processed sequentially.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p>Other dataset methods: 
<code>dataset_batch()</code>,
<code>dataset_cache()</code>,
<code>dataset_collect()</code>,
<code>dataset_concatenate()</code>,
<code>dataset_decode_delim()</code>,
<code>dataset_filter()</code>,
<code>dataset_interleave()</code>,
<code>dataset_map()</code>,
<code>dataset_padded_batch()</code>,
<code>dataset_prefetch()</code>,
<code>dataset_prefetch_to_device()</code>,
<code>dataset_reduce()</code>,
<code>dataset_repeat()</code>,
<code>dataset_shuffle()</code>,
<code>dataset_shuffle_and_repeat()</code>,
<code>dataset_skip()</code>,
<code>dataset_take()</code>,
<code>dataset_take_while()</code>,
<code>dataset_window()</code>
</p>


</div>
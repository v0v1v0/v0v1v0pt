<div class="container">

<table style="width: 100%;"><tr>
<td>fittestMAS</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Automatic prediction with moving average smoothing</h2>

<h3>Description</h3>

<p>The function uses an automatically produced moving average smoother as base
for predicting and returning the next n consecutive values of the provided
univariate time series using an also automatically fitted model
(<code>ets</code>/<code>stlf</code> or <code>arima</code>). It also
evaluates the fitness and prediction accuracy of the produced model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fittestMAS(
  timeseries,
  timeseries.test = NULL,
  h = NULL,
  order = NULL,
  minorder = 1,
  maxorder = min(36, length(ts(na.action(timeseries)))/2),
  model = c("ets", "arima"),
  level = 0.95,
  na.action = stats::na.omit,
  rank.by = c("MSE", "NMSE", "MAPE", "sMAPE", "MaxError", "AIC", "AICc", "BIC",
    "logLik", "errors", "fitness"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>timeseries</code></td>
<td>
<p>A vector or univariate time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeseries.test</code></td>
<td>
<p>A vector or univariate time series containing a
continuation for <code>timeseries</code> with actual values. It is used as a
testing set and base for calculation of prediction error measures. Ignored
if <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>
<p>Number of consecutive values of the time series to be predicted. If
<code>h</code> is <code>NULL</code>, the number of consecutive values to be predicted is
assumed to be equal to the length of <code>timeseries.test</code>. Required when
<code>timeseries.test</code> is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>A numeric integer value corresponding to the order of moving
average smoother to be produced. If <code>NULL</code>, the order of the moving
average smoother returned by the function is automatically selected within
the interval <code>minorder:maxorder</code>. See 'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minorder</code></td>
<td>
<p>A numeric integer value corresponding to the minimum order
of candidate moving average smoothers to be produced and evaluated. Ignored
if <code>order</code> is provided. See 'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxorder</code></td>
<td>
<p>A numeric integer value corresponding to the maximal order
of candidate moving average smoothers to be produced and evaluated. Ignored
if <code>order</code> is provided. See 'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>Character string. Indicates which model is to be used for
fitting and prediction of the moving average smoothed series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Confidence level for prediction intervals. See the
<code>forecast</code> function of the <code>forecast</code> package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>A function for treating missing values in <code>timeseries</code>
and <code>timeseries.test</code>. The default function is <code>na.omit</code>,
which omits any missing values found in <code>timeseries</code> or
<code>timeseries.test</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rank.by</code></td>
<td>
<p>Character string. Criteria used for ranking candidate models
generated. See 'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to the modeling functions.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function produces a moving average smoother of <code>timeseries</code> with
order <code>order</code> and uses it as base for model fitting and prediction. If
<code>model="arima"</code>, an arima model is used and automatically fitted using
the <code>auto.arima</code> function. If <code>model="ets"</code>, the
function fits an <code>[forecast]ets</code> model (if <code>timeseries</code> is
non-seasonal or the seasonal period is 12 or less) or
<code>stlf</code> model (if the seasonal period is 13 or more).
</p>
<p>For producing the prediction of the next <code>h</code> consecutive values of the
provided univariate time series, the function <code>mas.rev</code> is used.
</p>
<p>If <code>order</code> is <code>NULL</code>, it is automatically selected. For that, a
set with candidate models constructed for moving average smoothers of orders
from <code>minorder</code> to <code>maxorder</code> is generated. The default value of
<code>maxorder</code> is set based on code from the <code>sma</code> function of
<code>smooth</code> package. The value option of <code>order</code> which generate the
best ranked candidate model acoording to the criteria in <code>rank.by</code> is
selected.
</p>
<p>The ranking criteria in <code>rank.by</code> may be set as a prediction error
measure (such as <code>MSE</code>, <code>NMSE</code>, <code>MAPE</code>,
<code>sMAPE</code> or <code>MAXError</code>), or as a fitness criteria
(such as <code>AIC</code>, <code>AICc</code>, <code>BIC</code> or
<code>logLik</code>). In the former case, the candidate models are used for
time series prediction and the error measures are calculated by means of a
cross-validation process. In the latter case, the candidate models are
fitted and fitness criteria are calculated based on all observations in
<code>timeseries</code>.
</p>
<p>If <code>rank.by</code> is set as <code>"errors"</code> or <code>"fitness"</code>, the
candidate models are ranked by all the mentioned prediction error measures
or fitness criteria, respectively. The wheight of the ranking criteria is
equally distributed. In this case, a <code>rank.position.sum</code> criterion is
produced for ranking the candidate models. The <code>rank.position.sum</code>
criterion is calculated as the sum of the rank positions of a model (1 = 1st
position = better ranked model, 2 = 2nd position, etc.) on each calculated
ranking criteria.
</p>


<h3>Value</h3>

<p>A list with components: </p>
<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A list containing information
about the best evaluated model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>The order of moving average
smoother provided or automatically selected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ma</code></td>
<td>
<p>The simple moving
average smoother of order <code>order</code> of the provided time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AICc</code></td>
<td>
<p>Numeric value of the computed AICc criterion of the best
evaluated model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AIC</code></td>
<td>
<p>Numeric value of the computed AIC criterion of
the best evaluated model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>BIC</code></td>
<td>
<p>Numeric value of the computed BIC
criterion of the best evaluated model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logLik</code></td>
<td>
<p>Numeric value of the
computed log-likelihood of the best evaluated model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pred</code></td>
<td>
<p>A list
with the components <code>mean</code>, <code>lower</code> and <code>upper</code>, containing
the predictions of the best evaluated model and the lower and upper limits
for prediction intervals, respectively. All components are time series. See
the <code>forecast</code> function in the <code>forecast</code>
package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MSE</code></td>
<td>
<p>Numeric value of the resulting MSE error of prediction.
Require <code>timeseries.test</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NMSE</code></td>
<td>
<p>Numeric value of the resulting
NMSE error of prediction. Require <code>timeseries.test</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MAPE</code></td>
<td>
<p>Numeric value of the resulting MAPE error of prediction. Require
<code>timeseries.test</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sMAPE</code></td>
<td>
<p>Numeric value of the resulting sMAPE
error of prediction. Require <code>timeseries.test</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MaxError</code></td>
<td>
<p>Numeric value of the maximal error of prediction. Require
<code>timeseries.test</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rank.val</code></td>
<td>
<p>Data.frame with the fitness or
prediction accuracy criteria computed for all candidate models ranked by
<code>rank.by</code>. It has the attribute <code>"ranked.models"</code>, which is a list
of objects containing all the candidate models, also ranked by
<code>rank.by</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rank.by</code></td>
<td>
<p>Ranking criteria used for ranking candidate
models and producing <code>rank.val</code>.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Rebecca Pontes Salles
</p>


<h3>References</h3>

<p>R.J. Hyndman and G. Athanasopoulos, 2013, Forecasting:
principles and practice. OTexts.
</p>
<p>R.H. Shumway and D.S. Stoffer, 2010, Time Series Analysis and Its
Applications: With R Examples. 3rd ed. 2011 edition ed. New York, Springer.
</p>


<h3>See Also</h3>

<p><code>fittestEMD</code>, <code>fittestWavelet</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(CATS)

fMAS &lt;- fittestMAS(CATS[,1],h=20,model="arima")

#automatically selected order of moving average
mas.order &lt;- fMAS$order


</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>RangeFilterState</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
<code>FilterState</code> object for numeric data</h2>

<h3>Description</h3>

<p>Manages choosing a numeric range.
</p>


<h3>Super class</h3>

<p><code>teal.slice::FilterState</code> -&gt; <code>RangeFilterState</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-RangeFilterState-new"><code>RangeFilterState$new()</code></a>
</p>
</li>
<li> <p><a href="#method-RangeFilterState-get_call"><code>RangeFilterState$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-RangeFilterState-get_keep_inf"><code>RangeFilterState$get_keep_inf()</code></a>
</p>
</li>
<li> <p><a href="#method-RangeFilterState-clone"><code>RangeFilterState$clone()</code></a>
</p>
</li>
</ul>
<details><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="destroy_observers"><a href="../../teal.slice/html/FilterState.html#method-FilterState-destroy_observers"><code>teal.slice::FilterState$destroy_observers()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="format"><a href="../../teal.slice/html/FilterState.html#method-FilterState-format"><code>teal.slice::FilterState$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="get_state"><a href="../../teal.slice/html/FilterState.html#method-FilterState-get_state"><code>teal.slice::FilterState$get_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="print"><a href="../../teal.slice/html/FilterState.html#method-FilterState-print"><code>teal.slice::FilterState$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="server"><a href="../../teal.slice/html/FilterState.html#method-FilterState-server"><code>teal.slice::FilterState$server()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="set_state"><a href="../../teal.slice/html/FilterState.html#method-FilterState-set_state"><code>teal.slice::FilterState$set_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="ui"><a href="../../teal.slice/html/FilterState.html#method-FilterState-ui"><code>teal.slice::FilterState$ui()</code></a></span></li>
</ul></details><hr>
<a id="method-RangeFilterState-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Initialize a <code>FilterState</code> object for range selection.
</p>


<h5>Usage</h5>

<div class="r"><pre>RangeFilterState$new(
  x,
  x_reactive = reactive(NULL),
  extract_type = character(0),
  slice
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt>
<dd>
<p>(<code>numeric</code>)
variable to be filtered.</p>
</dd>
<dt><code>x_reactive</code></dt>
<dd>
<p>(<code>reactive</code>)
returning vector of the same type as <code>x</code>. Is used to update
counts following the change in values of the filtered dataset.
If it is set to <code>reactive(NULL)</code> then counts based on filtered
dataset are not shown.</p>
</dd>
<dt><code>extract_type</code></dt>
<dd>
<p>(<code>character</code>)
specifying whether condition calls should be prefixed by <code>dataname</code>. Possible values:
</p>

<ul>
<li> <p><code>character(0)</code> (default) <code>varname</code> in the condition call will not be prefixed
</p>
</li>
<li> <p><code>"list"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">⁠&lt;dataname&gt;$&lt;varname&gt;⁠</code>
</p>
</li>
<li> <p><code>"matrix"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">⁠&lt;dataname&gt;[, &lt;varname&gt;]⁠</code>
</p>
</li>
</ul>
</dd>
<dt><code>slice</code></dt>
<dd>
<p>(<code>teal_slice</code>)
specification of this filter state.
<code>teal_slice</code> is stored in the object and <code>set_state</code> directly manipulates values within <code>teal_slice</code>.
<code>get_state</code> returns <code>teal_slice</code> object which can be reused in other places.
Note that <code>teal_slice</code> is a <code>reactiveValues</code>, which means it has reference semantics, i.e.
changes made to an object are automatically reflected in all places that refer to the same <code>teal_slice</code>.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Object of class <code>RangeFilterState</code>, invisibly.
</p>


<hr>
<a id="method-RangeFilterState-get_call"></a>



<h4>Method <code>get_call()</code>
</h4>

<p>Returns reproducible condition call for current selection.
For this class returned call looks like
<code style="white-space: pre;">⁠&lt;varname&gt; &gt;= &lt;min value&gt; &amp; &lt;varname&gt; &lt;= &lt;max value&gt;⁠</code> with
optional <code style="white-space: pre;">⁠is.na(&lt;varname&gt;)⁠</code> and <code style="white-space: pre;">⁠is.finite(&lt;varname&gt;)⁠</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>RangeFilterState$get_call(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt>
<dd>
<p>name of data set; defaults to <code>private$get_dataname()</code></p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>call</code>
</p>


<hr>
<a id="method-RangeFilterState-get_keep_inf"></a>



<h4>Method <code>get_keep_inf()</code>
</h4>

<p>Returns current <code>keep_inf</code> selection.
</p>


<h5>Usage</h5>

<div class="r"><pre>RangeFilterState$get_keep_inf()</pre></div>



<h5>Returns</h5>

<p><code>logical(1)</code>
</p>


<hr>
<a id="method-RangeFilterState-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>RangeFilterState$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R"># use non-exported function from teal.slice
include_css_files &lt;- getFromNamespace("include_css_files", "teal.slice")
include_js_files &lt;- getFromNamespace("include_js_files", "teal.slice")
RangeFilterState &lt;- getFromNamespace("RangeFilterState", "teal.slice")

library(shiny)

filter_state &lt;- RangeFilterState$new(
  x = c(NA, Inf, seq(1:10)),
  slice = teal_slice(varname = "x", dataname = "data")
)
isolate(filter_state$get_call())
filter_state$set_state(
  teal_slice(
    dataname = "data",
    varname = "x",
    selected = c(3L, 8L),
    keep_na = TRUE,
    keep_inf = TRUE
  )
)
isolate(filter_state$get_call())

# working filter in an app
library(shinyjs)

data_range &lt;- c(runif(100, 0, 1), NA, Inf)
fs &lt;- RangeFilterState$new(
  x = data_range,
  slice = teal_slice(
    dataname = "data",
    varname = "x",
    selected = c(0.15, 0.93),
    keep_na = TRUE,
    keep_inf = TRUE
  )
)

ui &lt;- fluidPage(
  useShinyjs(),
  include_css_files(pattern = "filter-panel"),
  include_js_files(pattern = "count-bar-labels"),
  column(4, tags$div(
    tags$h4("RangeFilterState"),
    fs$ui("fs")
  )),
  column(4, tags$div(
    id = "outputs", # div id is needed for toggling the element
    tags$h4("Condition (i.e. call)"), # display the condition call generated by this FilterState
    textOutput("condition_range"), tags$br(),
    tags$h4("Unformatted state"), # display raw filter state
    textOutput("unformatted_range"), tags$br(),
    tags$h4("Formatted state"), # display human readable filter state
    textOutput("formatted_range"), tags$br()
  )),
  column(4, tags$div(
    tags$h4("Programmatic filter control"),
    actionButton("button1_range", "set drop NA", width = "100%"), tags$br(),
    actionButton("button2_range", "set keep NA", width = "100%"), tags$br(),
    actionButton("button3_range", "set drop Inf", width = "100%"), tags$br(),
    actionButton("button4_range", "set keep Inf", width = "100%"), tags$br(),
    actionButton("button5_range", "set a range", width = "100%"), tags$br(),
    actionButton("button6_range", "set full range", width = "100%"), tags$br(),
    actionButton("button0_range", "set initial state", width = "100%"), tags$br()
  ))
)

server &lt;- function(input, output, session) {
  fs$server("fs")
  output$condition_range &lt;- renderPrint(fs$get_call())
  output$formatted_range &lt;- renderText(fs$format())
  output$unformatted_range &lt;- renderPrint(fs$get_state())
  # modify filter state programmatically
  observeEvent(
    input$button1_range,
    fs$set_state(teal_slice(dataname = "data", varname = "x", keep_na = FALSE))
  )
  observeEvent(
    input$button2_range,
    fs$set_state(teal_slice(dataname = "data", varname = "x", keep_na = TRUE))
  )
  observeEvent(
    input$button3_range,
    fs$set_state(teal_slice(dataname = "data", varname = "x", keep_inf = FALSE))
  )
  observeEvent(
    input$button4_range,
    fs$set_state(teal_slice(dataname = "data", varname = "x", keep_inf = TRUE))
  )
  observeEvent(
    input$button5_range,
    fs$set_state(
      teal_slice(dataname = "data", varname = "x", selected = c(0.2, 0.74))
    )
  )
  observeEvent(
    input$button6_range,
    fs$set_state(teal_slice(dataname = "data", varname = "x", selected = c(0, 1)))
  )
  observeEvent(
    input$button0_range,
    fs$set_state(
      teal_slice("data", "variable", selected = c(0.15, 0.93), keep_na = TRUE, keep_inf = TRUE)
    )
  )
}

if (interactive()) {
  shinyApp(ui, server)
}
</code></pre>


</div>
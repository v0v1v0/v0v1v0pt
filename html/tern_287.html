<div class="container">

<table style="width: 100%;"><tr>
<td>h_worsen_counter</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Helper function to analyze patients for <code>s_count_abnormal_lab_worsen_by_baseline()</code>
</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>
<p>Helper function to count the number of patients and the fraction of patients according to
highest post-baseline lab grade variable <code>.var</code>, baseline lab grade variable <code>baseline_var</code>,
and the direction of interest specified in <code>direction_var</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">h_worsen_counter(df, id, .var, baseline_var, direction_var)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>(<code>data.frame</code>)<br> data set containing all analysis variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>(<code>string</code>)<br> subject variable name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.var</code></td>
<td>
<p>(<code>string</code>)<br> single variable name that is passed by <code>rtables</code> when requested
by a statistics function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseline_var</code></td>
<td>
<p>(<code>string</code>)<br> name of the baseline lab grade variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>direction_var</code></td>
<td>
<p>(<code>string</code>)<br> name of the direction variable specifying the direction of the shift table of
interest. Only lab records flagged by <code>L</code>, <code>H</code> or <code>B</code> are included in the shift table.
</p>

<ul>
<li> <p><code>L</code>: low direction only
</p>
</li>
<li> <p><code>H</code>: high direction only
</p>
</li>
<li> <p><code>B</code>: both low and high directions
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The counts and fraction of patients
whose worst post-baseline lab grades are worse than their baseline grades, for
post-baseline worst grades "1", "2", "3", "4" and "Any".
</p>


<h3>See Also</h3>

<p>abnormal_by_worst_grade_worsen
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)

# The direction variable, GRADDR, is based on metadata
adlb &lt;- tern_ex_adlb %&gt;%
  mutate(
    GRADDR = case_when(
      PARAMCD == "ALT" ~ "B",
      PARAMCD == "CRP" ~ "L",
      PARAMCD == "IGA" ~ "H"
    )
  ) %&gt;%
  filter(SAFFL == "Y" &amp; ONTRTFL == "Y" &amp; GRADDR != "")

df &lt;- h_adlb_worsen(
  adlb,
  worst_flag_low = c("WGRLOFL" = "Y"),
  worst_flag_high = c("WGRHIFL" = "Y"),
  direction_var = "GRADDR"
)

# `h_worsen_counter`
h_worsen_counter(
  df %&gt;% filter(PARAMCD == "CRP" &amp; GRADDR == "Low"),
  id = "USUBJID",
  .var = "ATOXGR",
  baseline_var = "BTOXGR",
  direction_var = "GRADDR"
)

</code></pre>


</div>
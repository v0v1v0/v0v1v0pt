<div class="container">

<table style="width: 100%;"><tr>
<td>cate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Conditional Average Treatment Effect estimation</h2>

<h3>Description</h3>

<p>Conditional Average Treatment Effect estimation via Double Machine Learning
</p>


<h3>Usage</h3>

<pre><code class="language-R">cate(
  treatment,
  response_model,
  propensity_model,
  contrast = c(1, 0),
  data,
  nfolds = 5,
  type = "dml2",
  silent = FALSE,
  stratify = FALSE,
  mc.cores,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>formula specifying treatment and variables to condition on</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response_model</code></td>
<td>
<p>formula or ml_model object (formula =&gt; glm)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>propensity_model</code></td>
<td>
<p>formula or ml_model object (formula =&gt; glm)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contrast</code></td>
<td>
<p>treatment contrast (default 1 vs 0)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfolds</code></td>
<td>
<p>Number of folds</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>'dml1' or 'dml2'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>supress all messages and progressbars</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratify</code></td>
<td>
<p>If TRUE the response_model will be stratified by treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.cores</code></td>
<td>
<p>mc.cores Optional number of cores. parallel::mcmapply used
instead of future</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to future.apply::future_mapply</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>cate.targeted object
</p>


<h3>Author(s)</h3>

<p>Klaus KÃ¤hler Holst
</p>


<h3>Examples</h3>

<pre><code class="language-R">sim1 &lt;- function(n=1e4,
                 seed=NULL,
                 return_model=FALSE, ...) {
suppressPackageStartupMessages(require("lava"))
if (!is.null(seed)) set.seed(seed)
m &lt;- lava::lvm()
regression(m, ~a) &lt;- function(z1,z2,z3,z4,z5)
         cos(z1)+sin(z1*z2)+z3+z4+z5^2
regression(m, ~u) &lt;- function(a,z1,z2,z3,z4,z5)
        (z1+z2+z3)*a + z1+z2+z3 + a
distribution(m, ~a) &lt;- binomial.lvm()
if (return_model) return(m)
lava::sim(m, n, p=par)
}

d &lt;- sim1(200)
e &lt;- cate(a ~ z1+z2+z3, response=u~., data=d)
e
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>jmvtab</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Crosstables</h2>

<h3>Description</h3>

<p>Crosstables
</p>


<h3>Usage</h3>

<pre><code class="language-R">jmvtab(
  data,
  row_vars = NULL,
  col_vars = NULL,
  tab_vars = NULL,
  wt = NULL,
  pct = "no",
  color = "no",
  chi2 = TRUE,
  OR = "no",
  na = "keep",
  lvs = "all",
  other_if_less_than = 0,
  cleannames = TRUE,
  ref = "auto",
  ref2 = "first",
  comp = "tab",
  ci = "auto",
  conf_level = 0.95,
  ci_print = "ci",
  totaltab = "line",
  wrap_rows = 35,
  wrap_cols = 15,
  display = "auto",
  add_n = TRUE,
  add_pct = FALSE,
  subtext = "",
  digits = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_vars</code></td>
<td>
<p>The row variable, which will be printed with one level per
line. If numeric, it will be converted to factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_vars</code></td>
<td>
<p>One column is printed for each level of each column
variable. For numeric variables means are calculated, in a single column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tab_vars</code></td>
<td>
<p>One subtable is made for each combination of levels of the
tab variables. All tab variables are converted to factor. Leave empty to
make a simple table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wt</code></td>
<td>
<p>A weight variable, of class numeric. Leave empty for unweighted
results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pct</code></td>
<td>
<p>The type of percentages to calculate :  </p>
    <ul>
<li>
<p><code>"row"</code>: row percentages.    </p>
</li>
<li> <p><code>"col"</code>: column percentages.
</p>
</li>
<li> <p><code>"all"</code>: frequencies for each subtable/group, if there is
<code>tab_vars</code>.    </p>
</li>
<li> <p><code>"all_tabs"</code>: frequencies for the whole (set
of) table(s).  </p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p>The type of colors to print, as a single string. Vectorised
over <code>row_vars</code>.  </p>
    <ul>
<li> <p><code>"no"</code>: by default, no
colors are printed.    </p>
</li>
<li> <p><code>"diff"</code>: color percentages and means
based on cells differences from    totals (or from first cells when
<code>ref = "first"</code>).    </p>
</li>
<li> <p><code>"diff_ci"</code>: color pct and means based
on cells differences from totals    or first cells, removing coloring when
the confidence interval of this difference    is higher than the difference
itself.    </p>
</li>
<li> <p><code>"after_ci"</code>: idem, but cut off the confidence
interval from the    difference first.    </p>
</li>
<li> <p><code>"contrib"</code>: color
cells based on their contribution to variance    (except mean columns, from
numeric variables).    </p>
</li>
<li> <p><code>"OR"</code>: for <code>pct == "col"</code> or
<code>pct == "row"</code>,    color based on odds ratios (or relative risks
ratios)  </p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chi2</code></td>
<td>
<p>Set to <code>TRUE</code> to make a Chi2 and add summary stats. Also
useful to color cells based on their contribution to variance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OR</code></td>
<td>
<p>With <code>pct = "row"</code> or <code>pct = "col"</code>, calculate and
print odds ratios  (for binary variables) or relative risks ratios (for
variables with 3 levels  or more). </p>
  <ul>
<li> <p><code>"no"</code>: by
default, no OR are calculated.  </p>
</li>
<li> <p><code>"OR"</code>: print OR (instead of
percentages).  </p>
</li>
<li> <p><code>"OR_pct"</code>: print OR, with percentages in
bracket. </p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na</code></td>
<td>
<p>The policy to adopt with missing values. It must be a single
string.  </p>
    <ul>
<li> <p><code>na = "keep"</code>: by default, prints
<code>NA</code>'s as explicit <code>"NA"</code> level.    </p>
</li>
<li> <p><code>na = "drop"</code>:
removes <code>NA</code> levels before making each table    (tabs made with
different column variables may have a different number of    observations,
and won't exactly have the same total columns).    </p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lvs</code></td>
<td>
<p>The levels of <code>col_vars</code> to keep.  </p>
    <ul>
<li>
<p><code>"all"</code>: by default, all levels are kept.    </p>
</li>
<li> <p><code>"first"</code>:
only keep the first level of each <code>col_vars</code>    </p>
</li>
<li> <p><code>"auto"</code>:
keep the first level when <code>col_var</code> is only two levels,    keep all
levels otherwise.    </p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>other_if_less_than</code></td>
<td>
<p>When set to a positive integer, levels with less
count than that will be merged into an "Others" level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cleannames</code></td>
<td>
<p>By default, clean levels names, by removing prefix
numbers like "1-", and text in parenthesis. Set to <code>FALSE</code> to avoid
this behaviour.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref</code></td>
<td>
<p>The reference cell to calculate differences and ratios   (used
to print <code>colors</code>) :   </p>
    <ul>
<li> <p><code>"auto"</code>: by default,
cell difference from the corresponding total    (rows or cols depending on
<code>pct = "row"</code> or <code>pct = "col"</code>) is    used for <code>diff</code> ; cell
ratio from the first line (or col) is use for <code>OR</code>    (odds
ratio/relative risks ratio).    </p>
</li>
<li> <p><code>"tot"</code>: totals are always used.
</p>
</li>
<li> <p><code>"first"</code>: calculate cell difference or ratio from the first
cell  of the row or column (useful to color temporal developments).
</p>
</li>
<li> <p><code>n</code>: when <code>ref</code> is an integer, the nth row (or column) is
used for comparison.    </p>
</li>
<li> <p><code>"regex"</code>: when <code>ref</code> is a string,
it it used as a regular expression,    to match with the names of the rows
(or columns). Be precise enough to match only one    column or row,
otherwise you get a warning message.    </p>
</li>
<li> <p><code>"no"</code>: not use ref and
not calculate diffs to gain calculation time.  </p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref2</code></td>
<td>
<p>A second reference cell is needed to calculate odds ratios  (or
relative risks ratios). The first cell of the row or column is used by
default.  See <code>ref</code>  for the full list of possible values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comp</code></td>
<td>
<p>The comparison level : by subtables/groups, or for the whole
table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>The type of confidence intervals to calculate, passed to
<code>tab_ci</code>.     </p>
      <ul>
<li> <p><code>"cell"</code>: absolute
confidence intervals of cells percentages.      </p>
</li>
<li> <p><code>"diff"</code>:
confidence intervals of the difference between a cell and the      relative
total cell (or relative first cell when <code>ref = "first"</code>).      </p>
</li>
<li>
<p><code>"auto"</code>: <code>ci = "diff"</code> for means and row/col percentages,
<code>ci = "cell"</code> for frequencies ("all", "all_tabs").     </p>
</li>
</ul>
<p> By default,
for percentages, with <code>ci = "cell"</code> Wilson's method is used, and with
<code>ci = "diff"</code> Wald's method along Agresti and Caffo's adjustment.
Means use classic method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf_level</code></td>
<td>
<p>The confidence level, as a single numeric between 0 and
</p>

<ol><li>
<p> Default to 0.95 (95\
</p>
</li></ol>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci_print</code></td>
<td>
<p>By default confidence interval are printed with the
interval display. Set to "moe" to use pct +- moe instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>totaltab</code></td>
<td>
<p>The total table, if there are subtables/groups   (i.e. when
<code>tab_vars</code> is provided). Vectorised over <code>row_vars</code>.  </p>

<ul>
<li> <p><code>"line"</code>: by default, add a general total line (necessary for
calculations with <code>comp = "all"</code>)    </p>
</li>
<li> <p><code>"table"</code>: add a
complete total table   (i.e. <code>row_var</code> by <code>col_vars</code> without
<code>tab_vars</code>).    </p>
</li>
<li> <p><code>"no"</code>: not to draw any total table.   </p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wrap_rows</code></td>
<td>
<p>By default, rownames are wrapped when larger than 30
characters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wrap_cols</code></td>
<td>
<p>By default, colnames are wrapped when larger than 12
characters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>display</code></td>
<td>
<p>The information to display in the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_n</code></td>
<td>
<p>For <code>pct = "row"</code> or <code>pct = "col"</code>, set to
<code>FALSE</code> not to add another column or row with unweighted counts
(<code>n</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_pct</code></td>
<td>
<p>Set to <code>TRUE</code> to add a column with the frequencies of
the row variable (for <code>pct = "row"</code>) or a row with the frequencies of
the column variable (for  <code>pct = "col"</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subtext</code></td>
<td>
<p>A character vector to print rows of legend under the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>The number of digits to print, as a single integer, or an
integer vector the same length as <code>col_vars</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A results object containing:
</p>

<table>
<tr>
<td style="text-align: left;">
<code>results$html_table</code> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> a html </td>
</tr>
<tr>
<td style="text-align: left;">
<code>results$chi2_table</code> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> a table </td>
</tr>
<tr>
<td style="text-align: left;">
<code>results$plot</code> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> an image </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>Tables can be converted to data frames with <code>asDF</code> or <code>as.data.frame</code>. For example:
</p>
<p><code>results$chi2_table$asDF</code>
</p>
<p><code>as.data.frame(results$chi2_table)</code>
</p>


</div>
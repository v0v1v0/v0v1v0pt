<div class="container">

<table style="width: 100%;"><tr>
<td>tbl_json</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Combines structured JSON (as a data.frame) with remaining JSON</h2>

<h3>Description</h3>

<p>Constructs a <code>tbl_json</code> object, for further downstream manipulation
by other tidyjson functions. Methods exist to convert JSON stored in
character strings without any other associated data, as a separate
character string and associated data frame, or as a single data frame
with a specified character string JSON column.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tbl_json(df, json.list, drop.null.json = FALSE, ..., .column_order = NULL)

as.tbl_json(.x, ...)

as_tbl_json(.x, ...)

## S3 method for class 'tbl_json'
as.tbl_json(.x, ...)

## S3 method for class 'character'
as.tbl_json(.x, ...)

## S3 method for class 'list'
as.tbl_json(.x, ...)

## S3 method for class 'data.frame'
as.tbl_json(.x, json.column, ...)

is.tbl_json(.x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>data.frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>json.list</code></td>
<td>
<p>list of json lists parsed with
<code>fromJSON</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop.null.json</code></td>
<td>
<p>drop <code>NULL</code> json entries from <code>df</code> and
<code>json.list</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.column_order</code></td>
<td>
<p>Experimental argument to preserve column order for the hidden column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.x</code></td>
<td>
<p>an object to convert into a <code>tbl_json</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>json.column</code></td>
<td>
<p>the name of the json column of data in <code>.x</code>, if
<code>.x</code> is a data frame</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Most tidyjson functions accept a <code>tbl_json</code> object as the first
argument, and return a <code>tbl_json</code> object unless otherwise specified.
tidyjson functions will attempt to convert an object that isn't a
<code>tbl_json</code> object first, and so explicit construction of <code>tidyjson</code>
objects is rarely needed.
</p>
<p><code>tbl_json</code> objects consist of a data frame along with it's associated
JSON, where each row of the data frame corresponds to a single JSON
document. The JSON is stored in a <code>"JSON"</code> attribute.
</p>
<p>Note that <code>json.list</code> must have the same length as <code>nrow(df)</code>, and
if <code>json.list</code> has any <code>NULL</code> elements, the corresponding rows will
be removed from <code>df</code>. Also note that <code>"..JSON"</code> is a reserved
column name used internally for filtering tbl_json objects, and so is not
allowed in the names of <code>df</code>.
</p>


<h3>Value</h3>

<p>a <code>tbl_json</code> object
</p>


<h3>See Also</h3>

<p><code>read_json</code> for reading json from files
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Construct a tbl_json object using a charater string of JSON
json &lt;- '{"animal": "cat", "count": 2}'
json %&gt;% as.tbl_json

# access the "JSON" argument
json %&gt;% as.tbl_json %&gt;% attr("JSON")

# Construct a tbl_json object using multiple documents
json &lt;- c('{"animal": "cat", "count": 2}', '{"animal": "parrot", "count": 1}')
json %&gt;% as.tbl_json

# Construct a tbl_json object from a data.frame with a JSON colum
library(tibble)
farms &lt;- tribble(
  ~farm, ~animals,
  1L,    '[{"animal": "pig", "count": 50}, {"animal": "cow", "count": 10}]',
  2L,    '[{"animal": "chicken", "count": 20}]'
)
farms %&gt;% as.tbl_json(json.column = "animals")
# tidy the farms
farms %&gt;% as.tbl_json(json.column = "animals") %&gt;%
  gather_array %&gt;% spread_all
</code></pre>


</div>
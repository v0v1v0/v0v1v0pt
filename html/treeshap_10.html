<div class="container">

<table style="width: 100%;"><tr>
<td>plot_contribution</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>SHAP value based Break-Down plot</h2>

<h3>Description</h3>

<p>This function plots contributions of features into the prediction for a single observation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_contribution(
  treeshap,
  obs = 1,
  max_vars = 5,
  min_max = NA,
  digits = 3,
  explain_deviation = FALSE,
  title = "SHAP Break-Down",
  subtitle = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>treeshap</code></td>
<td>
<p>A treeshap object produced with the <code>treeshap</code> function. <code>treeshap.object</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>A numeric indicating which observation should be plotted. Be default it's first observation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_vars</code></td>
<td>
<p>maximum number of variables that shall be presented. Variables with the highest importance will be presented.
Remaining variables will be summed into one additional contribution. By default <code>5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_max</code></td>
<td>
<p>a range of OX axis. By default <code>NA</code>, therefore it will be extracted from the contributions of <code>x</code>.
But it can be set to some constants, useful if these plots are to be used for comparisons.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>number of decimal places (<code>round</code>) to be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>explain_deviation</code></td>
<td>
<p>if <code>TRUE</code> then instead of explaining prediction and plotting intercept bar, only deviation from mean prediction of the reference dataset will be explained. By default <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>the plot's title, by default <code>'SHAP Break-Down'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subtitle</code></td>
<td>
<p>the plot's subtitle. By default no subtitle.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a <code>ggplot2</code> object
</p>


<h3>See Also</h3>

<p><code>treeshap</code> for calculation of SHAP values
</p>
<p><code>plot_feature_importance</code>, <code>plot_feature_dependence</code>, <code>plot_interaction</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(xgboost)
data &lt;- fifa20$data[colnames(fifa20$data) != 'work_rate']
target &lt;- fifa20$target
param &lt;- list(objective = "reg:squarederror", max_depth = 3)
xgb_model &lt;- xgboost::xgboost(as.matrix(data), params = param, label = target,
                              nrounds = 20, verbose = FALSE)
unified_model &lt;- xgboost.unify(xgb_model, as.matrix(data))
x &lt;- head(data, 1)
shap &lt;- treeshap(unified_model, x)
plot_contribution(shap, 1,  min_max = c(0, 120000000))

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>roll</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rolling (moving) functions</h2>

<h3>Description</h3>

<p>Compute "rolling" or "moving" values, such as the "rolling average" for each cell in a SpatRaster.
</p>
<p>See <code>focal</code> for spatially moving averages and similar computations. And see <code>cumsum</code> and other cum* functions to compute cumulate values.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'SpatRaster'
roll(x, n, fun=mean, type="around", circular=FALSE,
			na.rm=FALSE, filename="", ..., wopt=list()) 

## S4 method for signature 'numeric'
roll(x, n, fun=mean, type="around", circular=FALSE, na.rm=FALSE, ...) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>SpatRaster or numeric</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>integer &gt; 1. The size of the "window", that is, the number of sequential cells to use in <code>fun</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>a function like mean, min, max, sum</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character. One of "around", "to", or "from". The choice indicates which values should be used in the computation. The focal cell is always used. If type is "around", <code>(n-1)/2</code> before and after the focal cell are also included. If type = "from", <code>n-1</code> cells are after the focal cell are included. If type = "to", <code>n-1</code> cells before the focal cell are included. For example, when using n=3 for element 5 of a vector; "around" used elements 4,5,6; "to" used elements 3,4,5, and "from" uses elements 5,6,7</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circular</code></td>
<td>
<p>logical. If <code>TRUE</code>, the data are considered to have a circular nature (e.g. days or months of the year), such that there are no missing values before first or after the last value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>logical. If <code>TRUE</code>, <code>NA</code> values should be ignored (by <code>fun</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>character. Output filename</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments for <code>fun</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wopt</code></td>
<td>
<p>list with named options for writing files as in <code>writeRaster</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Same as <code>x</code>
</p>


<h3>See Also</h3>

<p><code>cumsum</code>, <code>focal</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## numeric
roll(1:12, 3, mean)
roll(1:12, 3, mean, "to")
roll(1:12, 3, mean, circular=TRUE)

## SpatRaster
r &lt;- rast(ncol=2, nrow=2, nlyr=10, vals=1)
r[1,2] = 2
r[2,2] = 4

roll(r, n=3, "sum", "from", na.rm=FALSE) |&gt; values()
roll(r, n=3, "sum", "from", na.rm=TRUE) |&gt; values()
roll(r, n=3, "sum", "from", circular=TRUE) |&gt; values()

roll(r, n=3, "sum", "to", na.rm=TRUE) |&gt; values()

roll(r, n=3, "sum", "around", circular=TRUE) |&gt; values()
</code></pre>


</div>
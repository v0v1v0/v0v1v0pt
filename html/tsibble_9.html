<div class="container">

<table style="width: 100%;"><tr>
<td>as_tsibble</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Coerce to a tsibble object</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>


<h3>Usage</h3>

<pre><code class="language-R">as_tsibble(
  x,
  key = NULL,
  index,
  regular = TRUE,
  validate = TRUE,
  .drop = TRUE,
  ...
)

## S3 method for class 'ts'
as_tsibble(x, ..., tz = "UTC")

## S3 method for class 'mts'
as_tsibble(x, ..., tz = "UTC", pivot_longer = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Other objects to be coerced to a tsibble (<code>tbl_ts</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>Variable(s) that uniquely determine time indices. <code>NULL</code> for
empty key, and <code>c()</code> for multiple variables. It works with tidy selector
(e.g. <code>dplyr::starts_with()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>A variable to specify the time index variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regular</code></td>
<td>
<p>Regular time interval (<code>TRUE</code>) or irregular (<code>FALSE</code>). The
interval is determined by the greatest common divisor of index column, if <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validate</code></td>
<td>
<p><code>TRUE</code> suggests to verify that each key or each combination
of key variables leads to unique time indices (i.e. a valid tsibble). If you
are sure that it's a valid input, specify <code>FALSE</code> to skip the checks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.drop</code></td>
<td>
<p>If <code>TRUE</code>, empty key groups are dropped.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments passed on to individual methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p>Time zone. May be useful when a <code>ts</code> object is more frequent than
daily.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pivot_longer</code></td>
<td>
<p><code>TRUE</code> gives a "longer" form of the data, otherwise as is.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A tsibble is sorted by its key first and index.
</p>


<h3>Value</h3>

<p>A tsibble object.
</p>


<h3>Index</h3>

<p>An extensive range of indices are supported by tsibble:
</p>

<ul>
<li>
<p> native time classes in R (such as <code>Date</code>, <code>POSIXct</code>, and <code>difftime</code>)
</p>
</li>
<li>
<p> tsibble's new additions (such as yearweek, yearmonth, and yearquarter).
</p>
</li>
<li>
<p> other commonly-used classes: <code>ordered</code>, <code>hms::hms</code>, <code>lubridate::period</code>,
and <code>nanotime::nanotime</code>.
</p>
</li>
</ul>
<p>For a <code>tbl_ts</code> of regular interval, a choice of index representation has to
be made. For example, a monthly data should correspond to time index created
by yearmonth, instead of <code>Date</code> or <code>POSIXct</code>. Because months in a year
ensures the regularity, 12 months every year. However, if using <code>Date</code>, a
month containing days ranges from 28 to 31 days, which results in irregular
time space. This is also applicable to year-week and year-quarter.
</p>
<p>Tsibble supports arbitrary index classes, as long as they can be ordered from
past to future. To support a custom class, you need to define <code>index_valid()</code>
for the class and calculate the interval through <code>interval_pull()</code>.
</p>


<h3>Key</h3>

<p>Key variable(s) together with the index uniquely identifies each record:
</p>

<ul>
<li>
<p> Empty: an implicit variable. <code>NULL</code> resulting in a univariate time series.
</p>
</li>
<li>
<p> A single variable: For example, <code>data(pedestrian)</code> uses <code>Sensor</code> as the key.
</p>
</li>
<li>
<p> Multiple variables: For example, Declare <code>key = c(Region, State, Purpose)</code>
for <code>data(tourism)</code>.
Key can be created in conjunction with tidy selectors like <code>starts_with()</code>.
</p>
</li>
</ul>
<h3>Interval</h3>

<p>The interval function returns the interval associated with the tsibble.
</p>

<ul>
<li>
<p> Regular: the value and its time unit including "nanosecond", "microsecond",
"millisecond", "second", "minute", "hour", "day", "week", "month", "quarter",
"year". An unrecognisable time interval is labelled as "unit".
</p>
</li>
<li>
<p> Irregular: <code>as_tsibble(regular = FALSE)</code> gives the irregular tsibble. It is
marked with <code>!</code>.
</p>
</li>
<li>
<p> Unknown: Not determined (<code style="white-space: pre;">⁠?⁠</code>), if it's an empty tsibble, or one entry for
each key variable.
</p>
</li>
</ul>
<p>An interval is obtained based on the corresponding index representation:
</p>

<ul>
<li>
<p> integerish numerics between 1582 and 2499: "year" (<code>Y</code>). Note the year of
1582 saw the beginning of the Gregorian Calendar switch.
</p>
</li>
<li> <p><code>yearquarter</code>: "quarter" (<code>Q</code>)
</p>
</li>
<li> <p><code>yearmonth</code>: "month" (<code>M</code>)
</p>
</li>
<li> <p><code>yearweek</code>: "week" (<code>W</code>)
</p>
</li>
<li> <p><code>Date</code>: "day" (<code>D</code>)
</p>
</li>
<li> <p><code>difftime</code>: "week" (<code>W</code>), "day" (D), "hour" (<code>h</code>), "minute" (<code>m</code>), "second" (<code>s</code>)
</p>
</li>
<li> <p><code>POSIXt</code>/<code>hms</code>: "hour" (<code>h</code>), "minute" (<code>m</code>), "second" (<code>s</code>), "millisecond" (<code>us</code>),
"microsecond" (<code>ms</code>)
</p>
</li>
<li> <p><code>period</code>: "year" (<code>Y</code>), "month" (<code>M</code>), "day" (<code>D</code>), "hour" (<code>h</code>),
"minute" (<code>m</code>), "second" (<code>s</code>), "millisecond" (<code>us</code>), "microsecond" (<code>ms</code>)
</p>
</li>
<li> <p><code>nanotime</code>: "nanosecond" (<code>ns</code>)
</p>
</li>
<li>
<p> other numerics &amp;<code>ordered</code> (ordered factor): "unit"
When the interval cannot be obtained due to the mismatched index format, an
error is issued.
</p>
</li>
</ul>
<p>The interval is invariant to subsetting, such as <code>filter()</code>, <code>slice()</code>, and <code style="white-space: pre;">⁠[.tbl_ts⁠</code>.
However, if the result is an empty tsibble, the interval is always unknown.
When joining a tsibble with other data sources and aggregating to different
time scales, the interval gets re-calculated.
</p>


<h3>See Also</h3>

<p>tsibble
</p>


<h3>Examples</h3>

<pre><code class="language-R"># coerce tibble to tsibble w/o a key
tbl1 &lt;- tibble(
  date = as.Date("2017-01-01") + 0:9,
  value = rnorm(10)
)
as_tsibble(tbl1)
# supply the index to suppress the message
as_tsibble(tbl1, index = date)

# coerce tibble to tsibble with a single variable for key
# use `yearquarter()` to represent quarterly data
tbl2 &lt;- tibble(
  qtr = rep(yearquarter("2010 Q1") + 0:9, 3),
  group = rep(c("x", "y", "z"), each = 10),
  value = rnorm(30)
)
# "qtr" is automatically considered as the index var
as_tsibble(tbl2, key = group)
as_tsibble(tbl2, key = group, index = qtr)

# create a tsibble with multiple variables for key
# use `yearmonth()` to represent monthly data
tbl3 &lt;- tibble(
  mth = rep(yearmonth("2010 Jan") + 0:8, each = 3),
  xyz = rep(c("x", "y", "z"), each = 9),
  abc = rep(letters[1:3], times = 9),
  value = rnorm(27)
)
as_tsibble(tbl3, key = c(xyz, abc))
# coerce ts to tsibble
as_tsibble(AirPassengers)
as_tsibble(sunspot.year)
as_tsibble(sunspot.month)
as_tsibble(austres)
# coerce mts to tsibble
z &lt;- ts(matrix(rnorm(300), 100, 3), start = c(1961, 1), frequency = 12)
as_tsibble(z)
as_tsibble(z, pivot_longer = FALSE)
</code></pre>


</div>
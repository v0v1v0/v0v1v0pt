<div class="container">

<table style="width: 100%;"><tr>
<td>ots_create_tidy_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Downloads and processes the data from the API to return a human-readable tibble</h2>

<h3>Description</h3>

<p>Accesses <code>api.tradestatistics.io</code> and
performs different API calls to transform and return tidy data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ots_create_tidy_data(
  years = 2020,
  reporters = "all",
  partners = "all",
  commodities = "all",
  sections = "all",
  table = "yr",
  max_attempts = 5,
  use_cache = FALSE,
  file = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>years</code></td>
<td>
<p>Year contained within the years specified in
api.tradestatistics.io/year_range (e.g. <code>c(2002,2004)</code>, <code>c(2002:2004)</code> or <code>2002</code>).
Default set to <code>2019</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reporters</code></td>
<td>
<p>ISO code for reporter country (e.g. <code>"chl"</code>, <code>"Chile"</code> or
<code>c("chl", "Peru")</code>). Default set to <code>"all"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>partners</code></td>
<td>
<p>ISO code for partner country (e.g. <code>"chl"</code>, <code>"Chile"</code> or
<code>c("chl", "Peru")</code>). Default set to <code>"all"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>commodities</code></td>
<td>
<p>HS commodity codes (e.g. <code>"0101"</code>, <code>"01"</code> or search
matches for <code>"apple"</code>)
to filter commodities. Default set to <code>"all"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sections</code></td>
<td>
<p>HS section codes (e.g. <code>"01"</code>). Default set to <code>"all"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>Character string to select the table to obtain the data.
Default set to <code>yr</code> (Year - Reporter).
Run <code>ots_tables</code> in case of doubt.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_attempts</code></td>
<td>
<p>How many times to try to download data in case the
API or the internet connection fails when obtaining data. Default set
to <code>5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_cache</code></td>
<td>
<p>Logical to save and load from cache. If <code>TRUE</code>, the results will be cached in memory
if <code>file</code> is <code>NULL</code> or on disk if 'file' is not <code>NULL</code>. Default set to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>Optional character with the full file path to save the data. Default set to <code>NULL</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tibble that describes bilateral trade metrics (imports,
exports, trade balance and relevant metrics
such as exports growth w/r to last year) between a <code>reporter</code>
and <code>partner</code> country.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# The next examples can take more than 5 seconds to compute,
# so these are just shown without evaluation according to CRAN rules

# Run `ots_countries` to display the full table of countries
# Run `ots_commodities` to display the full table of commodities

# What does Chile export to China? (2002)
ots_create_tidy_data(years = 2002, reporters = "chl", partners = "chn")

# What can we say about Horses export in Chile and the World? (2002)
ots_create_tidy_data(years = 2002, commodities = "010110", table = "yc")
ots_create_tidy_data(years = 2002, reporters = "chl", commodities = "010110", table = "yrc")

# What can we say about the different types of apples exported by Chile? (2002)
ots_create_tidy_data(years = 2002, reporters = "chl", commodities = "apple", table = "yrc")

## End(Not run)
</code></pre>


</div>
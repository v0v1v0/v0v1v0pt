<div class="container">

<table style="width: 100%;"><tr>
<td>calculate_triplot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate triplot that sums up automatic aspect/feature importance grouping</h2>

<h3>Description</h3>

<p>This function shows:
</p>
 <ul>
<li>
<p> plot for the importance of single variables,
</p>
</li>
<li>
<p> tree that shows importance for every newly expanded group of variables,
</p>
</li>
<li>
<p> clustering tree. </p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">calculate_triplot(x, ...)

## S3 method for class 'explainer'
calculate_triplot(
  x,
  type = c("predict", "model"),
  new_observation = NULL,
  N = 1000,
  loss_function = DALEX::loss_root_mean_square,
  B = 10,
  fi_type = c("raw", "ratio", "difference"),
  clust_method = "complete",
  cor_method = "spearman",
  ...
)

## Default S3 method:
calculate_triplot(
  x,
  data,
  y = NULL,
  predict_function = predict,
  label = class(x)[1],
  type = c("predict", "model"),
  new_observation = NULL,
  N = 1000,
  loss_function = DALEX::loss_root_mean_square,
  B = 10,
  fi_type = c("raw", "ratio", "difference"),
  clust_method = "complete",
  cor_method = "spearman",
  ...
)

## S3 method for class 'triplot'
print(x, ...)

model_triplot(x, ...)

predict_triplot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an explainer created with the <code>DALEX::explain()</code> function
or a model to be explained.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>if <code>predict</code> then aspect_importance is used, if
<code>model</code> than feature_importance is calculated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_observation</code></td>
<td>
<p>selected observation with columns that corresponds to
variables used in the model, should be without target variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>number of rows to be sampled from data
NOTE: Small <code>N</code> may cause unstable results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loss_function</code></td>
<td>
<p>a function that will be used to assess variable
importance, if <code>type = model</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>integer, number of permutation rounds to perform on each variable
in feature importance calculation, if <code>type = model</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fi_type</code></td>
<td>
<p>character, type of transformation that should be applied for
dropout loss, if <code>type = model</code>. "raw" results raw drop losses,
"ratio" returns <code>drop_loss/drop_loss_full_model</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clust_method</code></td>
<td>
<p>the agglomeration method to be used, see
<code>hclust</code> methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor_method</code></td>
<td>
<p>the correlation method to be used see 
<code>cor</code> methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>dataset, it will be extracted from <code>x</code> if it's an explainer
NOTE: Target variable shouldn't be present in the <code>data</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>true labels for <code>data</code>, will be extracted from <code>x</code>
if it's an explainer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predict_function</code></td>
<td>
<p>predict function, it will be extracted from <code>x</code>
if it's an explainer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>name of the model. By default it's extracted from the 'class'
attribute of the model.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>triplot object
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(DALEX)
set.seed(123)
apartments_num &lt;- apartments[,unlist(lapply(apartments, is.numeric))]
apartments_num_lm_model &lt;- lm(m2.price ~ ., data = apartments_num)
apartments_num_new_observation &lt;- apartments_num[30, ]
explainer_apartments &lt;- explain(model = apartments_num_lm_model,
                                data = apartments_num[,-1],
                                y = apartments_num[, 1],
                                verbose = FALSE)
apartments_tri &lt;- calculate_triplot(x = explainer_apartments,
                                    new_observation =
                                      apartments_num_new_observation[-1])
apartments_tri
                                   

</code></pre>


</div>
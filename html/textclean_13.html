<div class="container">

<table style="width: 100%;"><tr>
<td>fgsub</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Replace a Regex with an Functional Operation on the Regex Match</h2>

<h3>Description</h3>

<p>This is a stripped down version of <code>gsubfn</code> from the <span class="pkg">gsubfn</span> 
package.  It finds a regex match, and then uses a function to operate on
these matches and uses them to replace the original matches.  Note that
the <span class="pkg">stringi</span> packages is used for matching and extracting the regex 
matches.  For more powerful or flexible needs please see the <span class="pkg">gsubfn</span> 
package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fgsub(x, pattern, fun, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>Character string to be matched in the given character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>A function to operate on the extracted matches.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a vector with the pattern replaced.
</p>


<h3>See Also</h3>

<p><code>gsubfn</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## In this example the regex looks for words that contain a lower case letter 
## followed by the same letter at least 2 more times.  It then extracts these
## words, splits them appart into letters, reverses the string, pastes them
## back together, wraps them with double angle braces, and then puts them back 
## at the original locations.
fgsub(
    x = c(NA, 'df dft sdf', 'sd fdggg sd dfhhh d', 'ddd'),
    pattern = "\\b\\w*([a-z])(\\1{2,})\\w*\\b",
    fun = function(x) {
        paste0('&lt;&lt;', paste(rev(strsplit(x, '')[[1]]), collapse =''), '&gt;&gt;')
    }    
)

## In this example we extract numbers, strip out non-digits, coerce them to 
## numeric, cut them in half, round up to the closest integer, add the commas 
## back, and replace back into the original locations.
fgsub(
    x = c(NA, 'I want 32 grapes', 'he wants 4 ice creams', 
        'they want 1,234,567 dollars'
    ),
    pattern = "[\\d,]+",
    fun = function(x) {
        prettyNum(
            ceiling(as.numeric(gsub('[^0-9]', '', x))/2), 
            big.mark = ','
        )
    }    
)

## In this example we extract leading zeros, convert to an equal number of 
## spaces. 
fgsub(
    x = c(NA, "00:04", "00:08", "00:01", "06:14", "00:02", "00:04"),
    pattern = '^0+',
    fun = function(x) {gsub('0', ' ', x)}
)
</code></pre>


</div>
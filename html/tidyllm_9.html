<div class="container">

<table style="width: 100%;"><tr>
<td>LLMMessage</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Large Language Model Message Class</h2>

<h3>Description</h3>

<p>Large Language Model Message Class
</p>
<p>Large Language Model Message Class
</p>


<h3>Details</h3>

<p>This class manages a history of messages and media interactions intended for use with large language  models.
It allows for adding messages, converting messages for API usage, and printing the history in a structured format.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>message_history</code></dt>
<dd>
<p>List to store all message interactions.</p>
</dd>
<dt><code>system_prompt</code></dt>
<dd>
<p>The system prompt used for a conversation</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LLMMessage-new"><code>LLMMessage$new()</code></a>
</p>
</li>
<li> <p><a href="#method-LLMMessage-clone_deep"><code>LLMMessage$clone_deep()</code></a>
</p>
</li>
<li> <p><a href="#method-LLMMessage-add_message"><code>LLMMessage$add_message()</code></a>
</p>
</li>
<li> <p><a href="#method-LLMMessage-to_api_format"><code>LLMMessage$to_api_format()</code></a>
</p>
</li>
<li> <p><a href="#method-LLMMessage-has_image"><code>LLMMessage$has_image()</code></a>
</p>
</li>
<li> <p><a href="#method-LLMMessage-print"><code>LLMMessage$print()</code></a>
</p>
</li>
<li> <p><a href="#method-LLMMessage-clone"><code>LLMMessage$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-LLMMessage-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Initializes the LLMMessage object with an optional system prompt.
</p>


<h5>Usage</h5>

<div class="r"><pre>LLMMessage$new(system_prompt = "You are a helpful assistant")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>system_prompt</code></dt>
<dd>
<p>A string that sets the initial system prompt.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>A new LLMMessage object.
Deep Clone of LLMMessage Object
</p>
<p>This method creates a deep copy of the <code>LLMMessage</code> object. It ensures that
all internal states, including message histories and settings, are copied
so that the original object remains unchanged when mutations are applied
to the copy. This is particularly useful for maintaining immutability in
a tidyverse-like functional programming context where functions should
not have side effects on their inputs.
</p>


<hr>
<a id="method-LLMMessage-clone_deep"></a>



<h4>Method <code>clone_deep()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>LLMMessage$clone_deep()</pre></div>



<h5>Returns</h5>

<p>A new <code>LLMMessage</code> object that is a deep copy of the original.
Add a message
</p>
<p>Adds a message to the history. Optionally includes media.
</p>


<hr>
<a id="method-LLMMessage-add_message"></a>



<h4>Method <code>add_message()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>LLMMessage$add_message(role, content, media = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>role</code></dt>
<dd>
<p>The role of the message sender (e.g., "user", "assistant").</p>
</dd>
<dt><code>content</code></dt>
<dd>
<p>The textual content of the message.</p>
</dd>
<dt><code>media</code></dt>
<dd>
<p>Optional; media content to attach to the message.
Convert to API format
</p>
<p>Converts the message history to a format suitable for various API calls.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-LLMMessage-to_api_format"></a>



<h4>Method <code>to_api_format()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>LLMMessage$to_api_format(api_type, cgpt_image_detail = "auto")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>api_type</code></dt>
<dd>
<p>The type of API (e.g., "claude","groq","chatgpt").</p>
</dd>
<dt><code>cgpt_image_detail</code></dt>
<dd>
<p>Specific option for ChatGPT API (imagedetail - set to auto)
Simple helper function to determine whether the message history contains
an image
We check this function whenever we call models that do not support images
so we can post a warning to the user that images were found but not sent
to the model</p>
</dd>
</dl>
</div>


<hr>
<a id="method-LLMMessage-has_image"></a>



<h4>Method <code>has_image()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>LLMMessage$has_image()</pre></div>



<h5>Returns</h5>

<p>Returns TRUE if the message hisotry contains images
</p>


<hr>
<a id="method-LLMMessage-print"></a>



<h4>Method <code>print()</code>
</h4>

<p>Prints the current message history in a structured format.
</p>


<h5>Usage</h5>

<div class="r"><pre>LLMMessage$print()</pre></div>


<hr>
<a id="method-LLMMessage-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LLMMessage$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




</div>
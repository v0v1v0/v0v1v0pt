<div class="container">

<table style="width: 100%;"><tr>
<td>testex</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A syntactic helper for writing quick and easy example tests</h2>

<h3>Description</h3>

<p>A wrapper around <code>stopifnot</code> that allows you to use <code>.</code> to refer to
<code>.Last.value</code> and preserve the last non-test output from an example.
</p>


<h3>Usage</h3>

<pre><code class="language-R">testex(
  ...,
  srcref = NULL,
  example_srcref = NULL,
  value = get_example_value(),
  envir = parent.frame(),
  style = "standalone"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Expressions to evaluated. <code>.</code> will be replaced with the
expression passed to <code>val</code>, and may be used as a shorthand for the
last example result.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>srcref</code></td>
<td>
<p>An option <code>srcref_key</code> string used to indicate where the
relevant test code originated from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>example_srcref</code></td>
<td>
<p>An option <code>srcref_key</code> string used to indicate where
the relevant example code originated from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>A value to test against. By default, this will use the example's
<code>.Last.value</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>An environment in which tests should be evaluated. By default
the parent environment where tests are evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>style</code></td>
<td>
<p>A syntactic style used by the test. Defaults to <code>"standalone"</code>,
which expects <code>TRUE</code> and uses a <code>.</code>-notation. Accepts one of
<code>"standalone"</code> or <code>"testthat"</code>. By default, styles will be implicitly
converted to accommodate known testing frameworks, though this can be
disabled by passing the style <code>"AsIs"</code> with <code>I()</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Invisibly returns the <code>.Last.value</code> as it existed prior to evaluating
the test.
</p>


<h3>Documenting with <code>testex</code>
</h3>

<p><code>testex</code> is a simple wrapper around execution that propagates the
<code>.Last.value</code> returned before running, allowing you to chain tests
more easily.
</p>


<h4>Use in <code>Rd</code> files:</h4>

<pre>
\examples{
  f &lt;- function(a, b) a + b
  f(3, 4)
  \testonly{
    testex::testex(
      is.numeric(.),
      identical(., 7)
    )
  }
}
</pre>
<p>But <code>Rd</code> files are generally regarded as being a bit cumbersome to author
directly. Instead, <code>testex</code> provide helpers that generate this style of
documentation, which use this function internally.
</p>



<h4>Use with <code>roxygen2</code>
</h4>

<p>Within a <code>roxygen2</code> <code style="white-space: pre;">⁠@examples⁠</code> block you can instead use the <code style="white-space: pre;">⁠@test⁠</code> tag
which will generate Rd code as shown above.
</p>
<pre>
#' @examples
#' f &lt;- function(a, b) a + b
#' f(3, 4)
#' @test is.numeric(.)
#' @test identical(., 7)
</pre>



</div>
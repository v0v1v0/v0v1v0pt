<div class="container">

<table style="width: 100%;"><tr>
<td>calibrate.trtsel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>assess model calibration of a trtsel object</h2>

<h3>Description</h3>

<p>Assess calibration of fitted models for risk and treatment effect given
marker.  Plots are used to compare observed vs. fitted risks and treatment
effects and Hosmer-Lemeshow goodness-of-fit tests are reported.  An object
of class "trtsel" must first be created using the function "trtsel" by
supplying a data.frame containing marker, treatment, and event status
information.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'trtsel'
calibrate(x, ..., groups = 10, plot.type = "calibration",
  trt.names = c("Treatment", "No Treatment"), line.color = "black",
  point.color = "grey10", ci = 0.95, main = NULL, ylim = NULL,
  xlim = NULL, ylab = NULL, xlab = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class "trtsel", created by using the function
"trtsel."</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p>Number of groups; observations are split into groups based on
quantiles of predicted risk or treatment effect, depending on plot.type. For
plot.type = "treatment effect", observations are split into groups based on
quantile of predicted treatment effect; for plot.type= "calibration",
"risk.t0", or "risk.t1", and for the Hosmer-Lemshow test statistic,
observations on each treatment are split into groups based on quantile of
predicted risk.  The default value is 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.type</code></td>
<td>
<p>Which type of plot to produce. Options are "calibration"
(default), which plots average predicted vs. observed risks on a log scale;
"risk.t1" and "risk.t0" which overlays observed risks on fitted risk curves
for T = 1 and T = 0 subjects, respectively; and "treatment effect" which
overlays observed treatment effects on the fitted treatment effect curve.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trt.names</code></td>
<td>
<p>A vector of length 2 indicating the names for the two
treatment options, T= 1 and T = 0, respectively, for the plot legend. This
option is only used when plot.type="calibration". The default value is
c("Treatment", "No Treatment").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>line.color</code></td>
<td>
<p>color for lines in calibration plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>point.color</code></td>
<td>
<p>color for points in calibration plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>numeric value (default 0.95) specifying the level for confidence intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>The main title for the plot.  Only applies if plot.type is
specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>The limits for the y-axis of the plot, in the form
c(lower,upper). Only applies if plot.type is specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>The limits for the x-axisof the plot, in the form
c(lower,upper). Only applies if plot.type is specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>A label for the y-axis. Default values depend on plot.type.
Only applies if plot.type is specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>A label for the x-axis. Default values depend on plot.type. Only
applies if plot.type is specified.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>HL.TestStat</code></td>
<td>
<p>Hosmer-Lemeshow test statistic for assessing fit of the
risk models for the T = 0 and T = 1 groups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.value</code></td>
<td>
<p>P-values for the
Hosmer-Lemeshow tests in each treatment group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Df</code></td>
<td>
<p>Degrees of freedom
for the chi-square distribution used to generate a p-value for the
Hosmer-Lemeshow chi-square test. This equals "groups" - 2. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>If
plot output was created, the ggplot plotting object.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>trtsel</code> for creating trtsel objects,
<code>plot.trtsel</code> for plotting risk curves and more,
<code>evaluate.trtsel</code> for evaluating marker performance, and
<code>compare.trtsel</code> to compare two trtsel object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(tsdata)

###########################
## Create trtsel objects 
###########################
trtsel.Y1 &lt;- trtsel(event ~ Y1*trt, 
                   treatment.name = "trt", 
                   data = tsdata, 
                   study.design = "RCT",
                   default.trt = "trt all")

trtsel.Y1

##############################
## Assess model calibration
##############################

 
cali.Y1 &lt;- calibrate(trtsel.Y1, plot.type = "calibration")
cali.Y1

# A "treatment effect" plot 
calibrate(trtsel.Y1, line.color = "coral", plot.type = "treatment effect")


</code></pre>


</div>
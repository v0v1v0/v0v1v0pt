<div class="container">

<table style="width: 100%;"><tr>
<td>tongfen_estimate_ca_census</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Tongfen estimate data for given geometry</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing"><img src="../help/figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
</p>
<p>Estimates values for the given census vectors for the given geometry using
data from the specified level range
</p>


<h3>Usage</h3>

<pre><code class="language-R">tongfen_estimate_ca_census(
  geometry,
  meta,
  level,
  intersection_level = level,
  downsample_level = NULL,
  na.rm = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>geometry</code></td>
<td>
<p>geometry</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meta</code></td>
<td>
<p>metadata for the census variables to aggregate, for example as returned by 'meta_for_ca_census_vectors'.
At this point this function only accepts variables from the same census geography year. We will expand this to also
allow estimates across multiple census geography years, but this requires further attention to detail. It is
recommended to apply due caution when running this function separately across several census geography years with
the purpose of comparing data across time as a naive application can lead to systematic biases.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>level to use for tongfen</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intersection_level</code></td>
<td>
<p>level to use for geometry intersection, if different from tongfen level
by <code>meta_for_ca_census_vectors</code>. This can be set at a higher aggregation level to conserve API points
for the 'get_intersecting_geometries' call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>downsample_level</code></td>
<td>
<p>default 'NULL', can be a geographic level lower than 'level', in which case the data is downsamples
to that geography level proportionally using the value of the 'downsample' column (must be supplied) in the 'meta'
argument before intersecting the geometries. This can lead to more accurate results. At this point the only allowed
variables for the 'downsample' column in 'meta' are "Population", "Households" or "Dwellings", and it can only be
one of these for all variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>how to deal with NA values, default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>suppress progress messages</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R"># Estimate a common geography for 2006 and 2016 dissemination areas in the City of Vancouver
# based on the geographic data and check estimation errors
## Not run: 
toronto_city_hall &lt;- sf::st_point(c(-79.3839,43.6534)) %&gt;%
  sf::st_sfc(crs=4326) %&gt;%
  sf::st_transform(3348) %&gt;%
  sf::st_buffer(1000) %&gt;%
  sf::st_sf()

meta &lt;- meta_for_additive_variables("CA16","Population")

data &lt;- tongfen_estimate_ca_census(toronto_city_hall,meta,level="DA",intersection_level="CT")

print(paste0("Approximately ",scales::comma(data$Population,accuracy=100),
             " people live within a 1 km radius of Toronto City."))


## End(Not run)
</code></pre>


</div>
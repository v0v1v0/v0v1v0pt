<div class="container">

<table style="width: 100%;"><tr>
<td>tcplCytoPt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate the cytotoxicity point based on the "burst" endpoints</h2>

<h3>Description</h3>

<p><code>tcplCytoPt</code> calculates the cytotoxicity point and average cytotoxicity 
distribution based on the activity in the "burst" assay endpoints.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tcplCytoPt(
  chid = NULL,
  aeid = NULL,
  flag = TRUE,
  min.test = TRUE,
  default.pt = 3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>chid</code></td>
<td>
<p>Integer, chemical ID values to subset on</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aeid</code></td>
<td>
<p>Integer, assay endpoint ID values to override the "burst assay"
definitions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flag</code></td>
<td>
<p>Integer, mc6_mthd_id values to be passed to 
<code>tcplSubsetChid</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.test</code></td>
<td>
<p>Integer or Boolean, the number of tested assay endpoints
required for a chemical to be used in calculating the "global MAD."</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default.pt</code></td>
<td>
<p>Numeric of length 1, the default cytotoxicity point value</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>tcplCytoPt</code> provides estimates for chemical-specific cytotoxicity 
distributions (more information available in the vignette.) Before 
calculating the cytotoxicity distributions, the level 5 data is subsetted
by the <code>tcplSubsetChid</code> function. 
</p>
<p>The 'chid' parameter specifies a subset of chemicals to use in the 
calculations, given by chemical ID (chid). The 'aeid' parameter specifies
which assays to use in calculating the cytotoxicity point and distribution.
By default <code>tcplCytoPt</code> will use all available chemicals and the 
assay endpoints defined by the 'burst_assay' field in the 
"assay_component_endpoint" table. The examples show how to identify the 
"burst" endpoints.
</p>
<p><code>tcplCytoPt</code> returns the cytotoxicity point (the AC50 values of the 
active "burst" endpoints), the corresponding MAD, and the global MAD (median
of the calculated MAD values). Not every chemical must be tested in every
"burst" endpoint. The 'min.test' parameter allows the user to specify a 
minimum number of tested assay endpoints as a requirement for MAD values to 
be included in the global MAD calculation. For example, suppose the user 
supplies 10 "burst" assays. The user can choose to require a chemical to be
tested in at least 5 of those assays for it's MAD value to be included in 
the global MAD calculation. Having chemicals with many less "burst" endpoints
tested may inflate or deflate the global MAD calculation. By default (values 
of <code>TRUE</code> or <code>NULL</code>), <code>tcplCytoPt</code> requires a chemical to be 
tested in at least 80% of the given "burst" assays. The user can also 
provide 'min.test' values of <code>FALSE</code> (indicating to include all MAD 
values), or a number (indicating a specific number of endpoints). 
</p>
<p>Chemicals without at least 2 active "burst" assays do not have a MAD value, 
and the cytotoxicity point is defined by the 'default.pt' parameter. The
default value for 'default.pt' is 3.
</p>
<p>The resulting data.table has the following fields:
</p>

<ol>
<li>
<p> "chid" – The chemical ID.
</p>
</li>
<li>
<p> "code" – The chemical code.
</p>
</li>
<li>
<p> "chnm" – The chemical name.
</p>
</li>
<li>
<p> "casn" – The chemical CASRN.
</p>
</li>
<li>
<p> "med" – The median of the "burst" endpoint log(AC50)
</p>
</li>
<li>
<p> "mad" – The MAD of the "burst" endpoint log(AC50) values.
</p>
</li>
<li>
<p> "ntst" – The number of "burst" endpoints tested.
</p>
</li>
<li>
<p> "nhit" – The number of active "burst" endpoints.
</p>
</li>
<li>
<p> "used_in_global_mad_calc" – TRUE/FALSE, whether the mad value was used in the
global MAD calculation.
</p>
</li>
<li>
<p> "global_mad" – The median of the "mad" values where "used_in_global_mad_calc" 
is TRUE.
</p>
</li>
<li>
<p> "cyto_pt" – The cytotoxicity point, or the value in "med" when 
"nhit" is at least 2.
</p>
</li>
<li>
<p> "cyto_pt_um" – <code class="reqn">10^\mathit{cyto\_pt}</code>  
</p>
</li>
<li>
<p> "lower_bnd_um" – <code class="reqn">10^{\mathit{cyto\_pt} - 3\mathit{global\_mad}}</code>
</p>
</li>
</ol>
<h3>Value</h3>

<p>A data.table with the cytotoxicity distribution for each chemical.
The definition of the field names are listed under "details."
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## Can only calculate the cytotox burst if using the MySQL database and
## TCPL_DRVR == 'MySQL'

if (getOption("TCPL_DRVR") == "MySQL") {

## Load the "burst" endpoints -- none are defined in the example dataset
tcplLoadAeid(fld = "burst_assay", val = 1)

## Calculate the cytotoxicity distributions using both example endpoints
tcplCytoPt(aeid = 1:2)

## The above example does not calculate a global MAD, because no chemical
## hit both endpoints. (This makes sense, because both endpoints are 
## derived from one component, where one endpoint is acitivity in the
## up direction, and the other is activity in the down direction.)
## Note, the cyto_pt is also 3 for all chemicals, because the function
## requires at least two endpoints to calculate a cytotoxicity point. If 
## the user wishes to use one assay, this function is not necessary. 

## Changing 'default.pt' will change cyto_pt in the resulting data.table
tcplCytoPt(aeid = 1:2, default.pt = 6)
}

## End(Not run)

</code></pre>


</div>
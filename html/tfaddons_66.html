<div class="container">

<table style="width: 100%;"><tr>
<td>img_sparse_image_warp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sparse image warp</h2>

<h3>Description</h3>

<p>Image warping using correspondences between sparse control points.
</p>


<h3>Usage</h3>

<pre><code class="language-R">img_sparse_image_warp(
  image,
  source_control_point_locations,
  dest_control_point_locations,
  interpolation_order = 2,
  regularization_weight = 0,
  num_boundary_points = 0,
  name = "sparse_image_warp"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>image</code></td>
<td>
<p>'[batch, height, width, channels]' float 'Tensor'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source_control_point_locations</code></td>
<td>
<p>'[batch, num_control_points, 2]' float 'Tensor'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dest_control_point_locations</code></td>
<td>
<p>'[batch, num_control_points, 2]' float 'Tensor'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interpolation_order</code></td>
<td>
<p>polynomial order used by the spline interpolation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regularization_weight</code></td>
<td>
<p>weight on smoothness regularizer in interpolation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_boundary_points</code></td>
<td>
<p>How many zero-flow boundary points to include at each image edge.
Usage:
num_boundary_points=0: don't add zero-flow points
num_boundary_points=1: 4 corners of the image
num_boundary_points=2: 4 corners and one in the middle of each edge (8 points total)
num_boundary_points=n: 4 corners and n-1 along each edge</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>A name for the operation (optional).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Apply a non-linear warp to the image, where the warp is specified by
the source and destination locations of a (potentially small) number of
control points. First, we use a polyharmonic spline
('tf$contrib$image$interpolate_spline') to interpolate the displacements
between the corresponding control points to a dense flow field.
Then, we warp the image using this dense flow field
('tf$contrib$image$dense_image_warp'). Let t index our control points.
For regularization_weight=0, we have:
warped_image[b, dest_control_point_locations[b, t, 0],
dest_control_point_locations[b, t, 1], :] =
image[b, source_control_point_locations[b, t, 0],
source_control_point_locations[b, t, 1], :]. For regularization_weight &gt; 0,
this condition is met approximately, since
regularized interpolation trades off smoothness of the interpolant vs.
reconstruction of the interpolant at the control points.
See 'tf$contrib$image$interpolate_spline' for further documentation of the
interpolation_order and regularization_weight arguments.
</p>


<h3>Value</h3>

<p>warped_image: '[batch, height, width, channels]' float 'Tensor' with
same type as input image. flow_field: '[batch, height, width, 2]'
float 'Tensor' containing the dense flow field produced by the interpolation.
</p>


</div>
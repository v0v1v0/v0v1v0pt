<div class="container">

<table style="width: 100%;"><tr>
<td>tk_augment_holiday</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add many holiday features to the data</h2>

<h3>Description</h3>

<p>Quickly add the "holiday signature" - sets of holiday features that correspond
to calendar dates. Works with <code>dplyr</code> groups too.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tk_augment_holiday_signature(
  .data,
  .date_var = NULL,
  .holiday_pattern = ".",
  .locale_set = c("all", "none", "World", "US", "CA", "GB", "FR", "IT", "JP", "CH", "DE"),
  .exchange_set = c("all", "none", "NYSE", "LONDON", "NERC", "TSX", "ZURICH")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>A time-based tibble or time-series object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.date_var</code></td>
<td>
<p>A column containing either date or date-time values.
If <code>NULL</code>, the time-based column will interpret from the object (tibble).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.holiday_pattern</code></td>
<td>
<p>A regular expression pattern to search the "Holiday Set".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.locale_set</code></td>
<td>
<p>Return binary holidays based on locale.
One of: "all", "none", "World", "US", "CA", "GB", "FR", "IT", "JP", "CH", "DE".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.exchange_set</code></td>
<td>
<p>Return binary holidays based on Stock Exchange Calendars.
One of: "all", "none", "NYSE", "LONDON", "NERC", "TSX", "ZURICH".</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>tk_augment_holiday_signature</code> adds the holiday signature
features. See <code>tk_get_holiday_signature()</code> (powers the augment function)
for a full description and examples for how to use.
</p>
<p><strong>1. Individual Holidays</strong>
</p>
<p>These are <strong>single holiday features</strong> that can be filtered using a pattern.
This helps in identifying which holidays are important to a machine learning model.
This can be useful for example in <strong>e-commerce initiatives</strong>
(e.g. sales during Christmas and Thanskgiving).
</p>
<p><strong>2. Locale-Based Summary Sets</strong>
</p>
<p>Locale-based holdiay sets are useful for <strong>e-commerce initiatives</strong>
(e.g. sales during Christmas and Thanskgiving). Filter on a locale to
identify all holidays in that locale.
</p>
<p><strong>3. Stock Exchange Calendar Summary Sets</strong>
</p>
<p>Exchange-based holdiay sets are useful for identifying <strong>non-working days.</strong>
Filter on an index to identify all holidays that are commonly non-working.
</p>


<h3>Value</h3>

<p>Returns a <code>tibble</code> object describing the holiday timeseries.
</p>


<h3>See Also</h3>

<p>Augment Operations:
</p>

<ul>
<li> <p><code>tk_augment_timeseries_signature()</code> - Group-wise augmentation of timestamp features
</p>
</li>
<li> <p><code>tk_augment_holiday_signature()</code> - Group-wise augmentation of holiday features
</p>
</li>
<li> <p><code>tk_augment_slidify()</code> - Group-wise augmentation of rolling functions
</p>
</li>
<li> <p><code>tk_augment_lags()</code> - Group-wise augmentation of lagged data
</p>
</li>
<li> <p><code>tk_augment_differences()</code> - Group-wise augmentation of differenced data
</p>
</li>
<li> <p><code>tk_augment_fourier()</code> - Group-wise augmentation of fourier series
</p>
</li>
</ul>
<p>Underlying Function:
</p>

<ul><li> <p><code>tk_get_holiday_signature()</code> - Underlying function that powers holiday feature generation
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)

dates_in_2017_tbl &lt;- tibble(index = tk_make_timeseries("2017-01-01", "2017-12-31", by = "day"))

# Non-working days in US due to Holidays using NYSE stock exchange calendar
dates_in_2017_tbl %&gt;%
    tk_augment_holiday_signature(
        index,
        .holiday_pattern = "^$",   # Returns nothing on purpose
        .locale_set      = "none",
        .exchange_set    = "NYSE")

# All holidays in US
dates_in_2017_tbl %&gt;%
    tk_augment_holiday_signature(
        index,
        .holiday_pattern = "US_",
        .locale_set      = "US",
        .exchange_set    = "none")

# All holidays for World and Italy-specific Holidays
# - Note that Italy celebrates specific holidays in addition to many World Holidays
dates_in_2017_tbl %&gt;%
    tk_augment_holiday_signature(
        index,
        .holiday_pattern = "(World)|(IT_)",
        .locale_set      = c("World", "IT"),
        .exchange_set    = "none")



</code></pre>


</div>
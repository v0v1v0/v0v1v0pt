<div class="container">

<table style="width: 100%;"><tr>
<td>seqdef</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a state sequence object</h2>

<h3>Description</h3>

<p>Create a state sequence object with attributes such as alphabet, color palette and state labels. Most TraMineR functions for state sequences require such a state sequence object as input argument. There are specific methods for plotting,  summarizing and printing state sequence objects.
</p>


<h3>Usage</h3>

<pre><code class="language-R">seqdef(data, var=NULL, informat="STS", stsep=NULL,
       alphabet=NULL, states=NULL, id=NULL, weights=NULL, start=1,
       left=NA, right="DEL", gaps=NA, missing=NA, void="%", nr="*",
       cnames=NULL, xtstep=1, tick.last=FALSE, cpal=NULL,
       missing.color="darkgrey", labels=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame, matrix, or character string vector containing sequence data (tibble will be converted with <code>as.data.frame</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>the list of columns containing the sequences. Default is
<code>NULL</code>, i.e. all the columns. The function detects automatically
whether the sequences are in the compressed (successive states in a
character string) or extended format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>informat</code></td>
<td>
<p>format of the original data. Default is <code>"STS"</code>.
Other available formats are: <code>"SPS"</code> and <code>"SPELL"</code>, in which case the <code>seqformat</code> function is called to convert the data into the <code>"STS"</code> format (see TraMineR user's manual (<cite>Gabadinho et al., 2010</cite>) for a
description of these formats). A better solution is nonetheless to convert first your
data with <code>seqformat</code>, so as to have better control over the conversion process and visualize the intermediate <code>"STS"</code> formatted data.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stsep</code></td>
<td>
<p>the character used as separator in the original
data if input format is successive states in a character string. If
<code>NULL</code> (default value), the <code>seqfcheck</code> function is
called for detecting automatically a separator among "-" and ":".
Other separators must be specified explicitly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alphabet</code></td>
<td>
<p>optional vector containing the alphabet (the list of all possible states). Use this option if some states in the alphabet don't appear in the data or if you want to reorder the states. The specified vector MUST contain AT LEAST all the states appearing in the data. It may possibly contain additional states not appearing in the data. If <code>NULL</code>, the alphabet is set to the distinct states appearing in the data as returned by the <code>seqstatl</code> function. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>states</code></td>
<td>
<p>an optional vector containing the short state labels. Must have a length equal to the size of the alphabet and the labels must be ordered conformably with alpha-numeric ordered values returned by the <code>seqstatl</code> function, or, when <code>alphabet=</code> is set, with the thus newly defined alphabet.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>optional argument for setting the rownames of the sequence object. If <code>NULL</code> (default), the rownames are taken from the input data. If set to <code>"auto"</code>, sequences are numbered from 1 to the number of sequences. A vector of rownames of length equal to the number of sequences may be specified as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>optional numerical vector containing weights, which are taken into account by plotting and statistical functions when applicable. Weights must be non-negative and cannot be <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>starting time. For instance, if sequences begin
at age 15, you can specify 15. At this stage, used only for labelling column names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>left</code></td>
<td>
<p>the behavior for missing values appearing before the
first (leftmost) valid state in each sequence. When <code>NA</code> (default),
left missing values are treated as 'real' missing values and converted to the
internal missing value code defined by the <code>nr</code> option. Other
options are <code>"DEL"</code> to delete the positions containing missing values
or a state code (belonging to the alphabet or not) to replace the
missing values. See <cite>Gabadinho et
al. (2010)</cite> for more details on the options for handling missing
values when defining sequence objects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>right</code></td>
<td>
<p>the behavior for missing values appearing after the
last (rightmost) valid state in each sequence. Same options as for
the <code>left</code> argument. Default is <code>'DEL'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gaps</code></td>
<td>
<p>the behavior for missing values appearing inside the
sequences, i.e. after the first (leftmost) valid state and before the
last (rightmost) valid state of each sequence. Same options as for
the <code>left</code> argument. Default is <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing</code></td>
<td>
<p>the code used for missing values in the input
data. Default is <code>NA</code>. When any other value, all cells containing this value are treated
as <code>NA</code>s and replaced by <code>nr</code> or <code>void</code> code according to the
<code>left</code>, <code>gaps</code>, and <code>right</code> options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>void</code></td>
<td>
<p>the internal
code used by TraMineR for representing void elements in the
sequences. Default is <code>"%"</code>. Must be different from <code>left</code>, <code>gaps</code>, and <code>right</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nr</code></td>
<td>
<p>the internal code used by TraMineR for representing real
missing elements in the sequences. Default is <code>"*"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cnames</code></td>
<td>
<p>optional names for the columns composing the
sequence data. Those names will be used by default in the graphics as
axis labels. If <code>NULL</code> (default), names are taken from the
original column names in the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xtstep</code></td>
<td>
<p>step between displayed tick-marks and labels on the time x-axis of state sequence plots.
If not overridden by the user, plotting functions retrieve this parameter from the <code>xtstep</code> attribute of the sequence object. For example, with <code>xtstep=3</code> a tick-mark is displayed at positions 1, 4, 7, etc...  Default value is 1; i.e., a tick mark is displayed at each position. The display of the corresponding labels depends on the available space and is dealt with automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tick.last</code></td>
<td>
<p>Logical. Should a tick mark be enforced at the last position on the time x-axis?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cpal</code></td>
<td>
<p>an optional color palette for representing the states
in the graphics. If <code>NULL</code> (default), a color palette is created
by means of the <code>brewer.pal</code> function of the <code>RColorBrewer</code>
package for number of states up to 12. When the number of states is less or equal than 8, the
<code>"Accent"</code> palette is used. If number of states is between 8 and
12, the <code>"Set3"</code> palette is used. When the number of states is greater than 12,
colors are set using <code>hcl.colors</code> with
the "Set 3" palette. To specify your own palette use e.g. the <code>colors</code>
function, or the RColorBrewer or colorspace packages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing.color</code></td>
<td>
<p>alternative color for representing missing
values inside the sequences. Defaults to <code>"darkgrey"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>optional state labels used for the color legend of
TraMineR's graphics. If <code>NULL</code> (default), the state names in the
alphabet are used as state labels as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>options passed to the <code>seqformat</code> function
for handling input data that is not in STS format.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Applying subscripts to sequence objects (eg. <code>seq[,1:5]
or seq[1:10,]</code>) returns a state sequence object with some attributes
preserved (alphabet, missing) and some others (start, column names, weights)
adapted to the selected column or row subset. When the number of
columns selected is 1, the returned object is a factor. <br></p>
<p>For reordering the states use the <code>alphabet</code> argument. This may
for instance be useful to compare data from
different sources with different codings of similar states. Using
<code>alphabet</code> permits to order the states conformably in all
sequence objects. Otherwise, the default state order is the
alpha-numeric order returned by the <code>seqstatl</code> function
which may differ when you have different original codings.
</p>


<h3>Value</h3>

<p>An object of class <code>stslist</code>.
</p>
<p>There are <code>print</code>, <code>plot</code>, <code>rbind</code>, <code>summary</code>, and subsetting <code>[,]</code> methods for such objects.
</p>


<h3>Author(s)</h3>

<p>Alexis Gabadinho and Gilbert Ritschard</p>


<h3>References</h3>

<p>Gabadinho, A., G. Ritschard, N. S. Müller and M. Studer (2011). Analyzing and Visualizing State Sequences in R with TraMineR. <em>Journal of Statistical Software</em> <b>40</b>(4), 1-37.
</p>
<p>Gabadinho, A., G. Ritschard, M. Studer and N. S. Müller (2010). Mining Sequence Data in <code>R</code> with the <code>TraMineR</code>
package: A user's guide. <em>Department of Econometrics and
Laboratory of Demography, University of Geneva</em>. </p>


<h3>See Also</h3>

<p><code>plot.stslist</code> plot method for state sequence objects,<br><code>print.stslist</code> print method for state sequence objects,<br><code>is.stslist</code> to test whether an object is a proper <code>stslist</code> object,<br><code>seqplot</code> for high level plots of state sequence objects,<br><code>seqecreate</code> to create an event sequence object,<br><code>seqformat</code> for converting between various longitudinal data formats. </p>


<h3>Examples</h3>

<pre><code class="language-R">## Creating a sequence object with the columns 13 to 24
## in the 'actcal' example data set
data(actcal)
actcal.seq &lt;- seqdef(actcal,13:24,
	labels=c("&gt; 37 hours", "19-36 hours", "1-18 hours", "no work"))

## Displaying the first 10 rows of the sequence object
actcal.seq[1:10,]

## Displaying the first 10 rows of the sequence object
## in SPS format
print(actcal.seq[1:10,], format="SPS")

## Plotting the first 10 sequences
plot(actcal.seq)

## Re-ordering the alphabet
actcal.seq &lt;- seqdef(actcal,13:24,alphabet=c("B","A","D","C"))
alphabet(actcal.seq)

## Adding a state not appearing in the data to the
## alphabet
actcal.seq &lt;- seqdef(actcal,13:24,alphabet=c("A","B","C","D","E"))
alphabet(actcal.seq)

## Adding a state not appearing in the data to the
## alphabet and changing the states labels
actcal.seq &lt;- seqdef(actcal,13:24,
  alphabet=c("A","B","C","D","E"),
  states=c("FT","PT","LT","NO","TR"))
alphabet(actcal.seq)

## rbind and summary
seq1 &lt;- actcal.seq[1:10,]
seq2 &lt;- actcal.seq[20:25,]
seq &lt;- rbind(seq1,seq2)
summary(seq)

## ============================
## Example with missing values
## ============================
data(ex1)

## With right="DEL" default value
seqdef(ex1,1:13)

## Eliminating 'left' missing values
seqdef(ex1,1:13, left="DEL")

## Eliminating 'left' missing values and gaps
seqdef(ex1,1:13, left="DEL", gaps="DEL")

## ====================
## Example with weights
## ====================
ex1.seq &lt;- seqdef(ex1, 1:13, weights=ex1$weights)

## weighted sequence frequencies
seqtab(ex1.seq)


</code></pre>


</div>